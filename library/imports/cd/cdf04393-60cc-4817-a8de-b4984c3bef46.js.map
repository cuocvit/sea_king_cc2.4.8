{"version":3,"sources":["assets\\start-scene\\scripts\\SignEntry.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM;AACN,uCAAsC;AACtC,6CAAmC;AACnC,+CAA8C;AAExC,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA+B,6BAAY;IAA3C;QAAA,qEAoCC;QAlCW,cAAQ,GAAqB,IAAI,CAAC;QAGlC,oBAAc,GAAmB,IAAI,CAAC;;IA+BlD,CAAC;IA7Ba,4BAAQ,GAAlB;QACI,gBAAE,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,CACpB,mBAAQ,CAAC,iBAAiB,EAC1B,IAAI,CAAC,WAAW,EAChB,IAAI,CACP,CAAC;QACF,IAAI,CAAC,WAAW,EAAE,CAAC;IACvB,CAAC;IAES,6BAAS,GAAnB;QACI,gBAAE,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CACrB,mBAAQ,CAAC,iBAAiB,EAC1B,IAAI,CAAC,WAAW,EAChB,IAAI,CACP,CAAC;IACN,CAAC;IAEO,+BAAW,GAAnB;QACI,IAAM,QAAQ,GAAG,gBAAE,CAAC,IAAI,CAAC,SAAS,CAAC;QACnC,IAAI,CAAC,cAAc,CAAC,MAAM;YACtB,QAAQ,CAAC,UAAU,GAAG,CAAC;gBACvB,QAAQ,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;IAClD,CAAC;IAEM,kDAA8B,GAArC,UAAsC,KAAe;;QACjD,IAAI,KAAK,CAAC,MAAM,YAAK,IAAI,CAAC,QAAQ,0CAAE,IAAI,CAAA,EAAE;YACtC,gBAAE,CAAC,EAAE,CAAC,UAAU,CAAC,gBAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SACnC;IACL,CAAC;IAjCD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;+CACsB;IAG1C;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDAC4B;IALrC,SAAS;QADrB,OAAO;OACK,SAAS,CAoCrB;IAAD,gBAAC;CApCD,AAoCC,CApC8B,2BAAY,GAoC1C;AApCY,8BAAS","file":"","sourceRoot":"/","sourcesContent":["// +-+\r\nimport { SignData } from \"./SignData\";\r\nimport { gm } from \"./GameManager\";\r\nimport { NodePoolItem } from \"./NodePoolItem\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class SignEntry extends NodePoolItem {\r\n    @property(cc.Button)\r\n    private sign_btn: cc.Button | null = null;\r\n\r\n    @property(cc.Node)\r\n    private red_point_node: cc.Node | null = null;\r\n\r\n    protected onEnable(): void {\r\n        gm.data.event_emitter.on(\r\n            SignData.EVENT_DATA_CHANGE,\r\n            this.update_view,\r\n            this\r\n        );\r\n        this.update_view();\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        gm.data.event_emitter.off(\r\n            SignData.EVENT_DATA_CHANGE,\r\n            this.update_view,\r\n            this\r\n        );\r\n    }\r\n\r\n    private update_view(): void {\r\n        const signData = gm.data.sign_data;\r\n        this.red_point_node.active =\r\n            signData.sign_state < 3 ||\r\n            signData.sign_buy_data_array[0].state < 2;\r\n    }\r\n\r\n    public editor_on_button_click_handler(event: cc.Event): void {\r\n        if (event.target === this.sign_btn?.node) {\r\n            gm.ui.show_panel(gm.const.Sign);\r\n        }\r\n    }\r\n}\r\n"]}