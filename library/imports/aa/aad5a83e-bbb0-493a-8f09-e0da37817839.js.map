{"version":3,"sources":["assets\\start-scene\\scripts\\TempData.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["//\r\nimport { gm } from './GameManager';\r\nimport { Utils } from './Utils';\r\nimport { HeroTypeEnum } from './Constants';\r\n\r\n// @\r\nexport interface IGuideData {\r\n  guideID: number;\r\n  isEnd: boolean;\r\n  runningIndex: number;\r\n}\r\n\r\n// @\r\ninterface LocalHeroItem {\r\n  heroID: number;\r\n  heroLvl: number;\r\n  heroNum: number;\r\n  cellID: number[];\r\n  heroUID: number[];\r\n  heroHp: number[];\r\n  sortNum: number;\r\n}\r\n\r\n\r\n\r\n//\r\nexport class TempData {\r\n  public static guideData: TempGuideVO | null = null;\r\n  public static guideBuildMetrailData: GuideBuildMetrailVO | null = null;\r\n  public static heroLock: number[] = [];\r\n  public static map_type: number = 1;\r\n  public static localHeroList: LocalHeroItem[] = [];\r\n  public static is_defense_type: number = 1;\r\n  public static is_need_open_barrkPanel: boolean = false;\r\n  public static map_have_hand: boolean = false;\r\n  public static task_have_hand: boolean = false;\r\n  public static isShowOffline: boolean = false;\r\n  public static mainFunShowLucky: boolean = true;\r\n  public static mainFunShowGuide: boolean = false;\r\n  public static mainFunShowSign: boolean = false;\r\n  public static mainFunShowSuperHero: boolean = false;\r\n  public static offline_time: number = 0;\r\n\r\n  // @\r\n  public static setDefenseType(defenseType: number = 1): void {\r\n    this.is_defense_type = defenseType;\r\n  }\r\n\r\n  // @\r\n  public static getDefenseType(): number {\r\n    return this.is_defense_type;\r\n  }\r\n\r\n  // @\r\n  public static initGuideTempData(): void {\r\n    this.guideData = new TempGuideVO;\r\n    this.guideData.guideID = gm.data.mapCell_data.roleGuideVO.isEnd ? 0 : gm.data.mapCell_data.roleGuideVO.guideID;\r\n    this.guideData.isEnd = gm.data.mapCell_data.roleGuideVO.isEnd;\r\n    this.guideData.runningIndex = 0;\r\n  }\r\n\r\n  // @\r\n  public static setGuideTempData(guideID: number, runningIndex: number): void {\r\n    this.guideData = new TempGuideVO;\r\n    this.guideData.guideID = guideID;\r\n    this.guideData.isEnd = false;\r\n    this.guideData.runningIndex = runningIndex;\r\n  }\r\n\r\n  // @\r\n  public static setRoleGuideDataEnd(): void {\r\n    this.guideData.isEnd = true;\r\n    if (gm.data.mapCell_data.roleGuideVO.guideID == this.guideData.guideID) {\r\n      gm.data.mapCell_data.setRoleGuideDataEnd(this.guideData.guideID, this.guideData.runningIndex);\r\n    }\r\n  }\r\n\r\n  // @\r\n  public static getRoleGuideData(): IGuideData | null {\r\n    return this.guideData;\r\n  }\r\n\r\n  // @\r\n  public static addRoleGuideRunningIndex(): void {\r\n    if (this.guideData) this.guideData.runningIndex++;\r\n  }\r\n\r\n  // @\r\n  public static setBuildGuideMertaril(buildID: number, itemID: number, itemType: number, cellID: number, itemNum: number, needNum: number): void {\r\n    if (!this.guideBuildMetrailData) {\r\n      this.guideBuildMetrailData = new GuideBuildMetrailVO;\r\n      this.guideBuildMetrailData.buildID = buildID;\r\n      this.guideBuildMetrailData.metrailList = [];\r\n    }\r\n\r\n    if (buildID != this.guideBuildMetrailData.buildID) {\r\n      this.guideBuildMetrailData.buildID = buildID,\r\n        this.guideBuildMetrailData.metrailList = [];\r\n    }\r\n    const GuideBuildMetrailItem = new GuideBuildMetrailItemVO;\r\n    GuideBuildMetrailItem.cellID = cellID;\r\n    GuideBuildMetrailItem.itemType = itemType;\r\n    GuideBuildMetrailItem.itemID = itemID;\r\n    GuideBuildMetrailItem.itemNum = itemNum;\r\n    GuideBuildMetrailItem.needNum = needNum;\r\n    this.guideBuildMetrailData.metrailList.push(GuideBuildMetrailItem);\r\n  }\r\n\r\n  // @\r\n  public static getBuildGuideMertarilNumByID(buildID: number, itemID: number): number {\r\n    if (this.guideBuildMetrailData && this.guideBuildMetrailData.buildID === buildID) {\r\n      for (let i = 0; i < this.guideBuildMetrailData.metrailList.length; i++) {\r\n        const itemConfig = gm.data.config_data.getItemCfgByID(itemID);\r\n        if (itemConfig && this.guideBuildMetrailData.metrailList[i].itemType === itemConfig.type) {\r\n          return this.guideBuildMetrailData.metrailList[i].itemNum;\r\n        }\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  // @\r\n  public static getBuildGuideMertarilData(): GuideBuildMetrailVO | null {\r\n    return this.guideBuildMetrailData;\r\n  }\r\n\r\n  // @\r\n  public static addLockHeroID(heroID: number): void {\r\n    if (!this.heroLock.includes(heroID)) {\r\n      this.heroLock.push(heroID);\r\n    }\r\n  }\r\n\r\n  // @\r\n  public static getInitAllHeroList(isDefense: boolean = false): void {\r\n    const heroData = gm.data.mapCell_data.heroData;\r\n    const heroMap: { [key: number]: LocalHeroItem } = {};\r\n    this.localHeroList = [];\r\n    const superHeroData = gm.data.mapCell_data.getAllSuperHeroData();\r\n    //\r\n    for (const key in heroData) {\r\n      if (![0, 10, 11, 12].includes(parseInt(key))) {\r\n        for (let j = 0; j < heroData[key].length; j++) {\r\n          const heroConfig = gm.data.config_data.getHeroCfgByID(heroData[key][j].itemID);\r\n          if (heroConfig) {\r\n            let hp = 0;\r\n            let isDead = false;\r\n            if (heroConfig.hero_type === HeroTypeEnum.SUPER_HERO_TYPE) {\r\n              for (let k = 0; k < superHeroData.length; k++) {\r\n                if (superHeroData[k].cellID === heroData[key][j].cellID && heroConfig.heroid === superHeroData[k].heroid) {\r\n                  if (isDefense) {\r\n                    hp = superHeroData[k].hp;\r\n                    break;\r\n                  }\r\n                  if (superHeroData[k].hp <= 0) {\r\n                    isDead = true;\r\n                    break;\r\n                  }\r\n                  hp = superHeroData[k].hp;\r\n                }\r\n              }\r\n            }\r\n            if (!isDead && heroConfig.sequence !== 0) {\r\n              if (!isDefense || !gm.data.mapCell_data.getHeroIsDefanseByCellID(heroData[key][j].cellID)) {\r\n                if (heroMap[heroConfig.heroid]) {\r\n                  heroMap[heroConfig.heroid].heroNum++;\r\n                  heroMap[heroConfig.heroid].cellID.push(heroData[key][j].cellID);\r\n                  const mapData = gm.data.mapCell_data.getMapdataByCellID(heroData[key][j].cellID);\r\n                  if (mapData !== 0) {\r\n                    heroMap[heroConfig.heroid].heroUID.push(mapData);\r\n                    heroMap[heroConfig.heroid].heroHp.push(hp);\r\n                  } else {\r\n                    cc.log(`tempData getInitAllHeroList line170 heroUID =0  heroList[key][i].cellID =${heroData[key][j].cellID}`);\r\n                  }\r\n                } else {\r\n                  const newHero: LocalHeroItem = {\r\n                    heroID: heroConfig.heroid,\r\n                    heroLvl: heroConfig.lv,\r\n                    heroNum: 1,\r\n                    cellID: [heroData[key][j].cellID],\r\n                    heroUID: [],\r\n                    heroHp: [hp],\r\n                    sortNum: heroConfig.sequence,\r\n                  };\r\n                  const mapData = gm.data.mapCell_data.getMapdataByCellID(heroData[key][j].cellID);\r\n                  if (mapData) {\r\n                    newHero.heroUID.push(mapData);\r\n                    heroMap[heroConfig.heroid] = newHero;\r\n                  } else {\r\n                    cc.log(`tempData getInitAllHeroList line183 heroUID =0  heroList[key][i].cellID =${heroData[key][j].cellID}`);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    for (const key in heroMap) {\r\n      this.localHeroList.push(heroMap[key]);\r\n    }\r\n    Utils.sort_by_props(this.localHeroList, { sortNum: \"ascending\" });\r\n  } // end: getInitAllHeroList\r\n\r\n  // @\r\n  public static removeHeroByID(heroID: number): void {\r\n    for (let i = 0; i < this.localHeroList.length; i++) {\r\n      if (this.localHeroList[i].heroID === heroID) {\r\n        if (this.localHeroList[i].heroNum === 1) {\r\n          this.localHeroList.splice(i, 1);\r\n        } else {\r\n          this.localHeroList[i].heroNum--;\r\n          this.localHeroList[i].cellID.shift();\r\n          this.localHeroList[i].heroUID.shift();\r\n          this.localHeroList[i].heroHp.shift();\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // @\r\n  public static addHeroByID(heroID: number, cellID: number): void {\r\n    let found = false;\r\n    for (let index = 0; index < this.localHeroList.length; index++) {\r\n      if (this.localHeroList[index].heroID == heroID) {\r\n        found = true;\r\n        this.localHeroList[index].heroNum++;\r\n        this.localHeroList[index].cellID.push(index);\r\n        const mapData = gm.data.mapCell_data.getMapdataByCellID(index);\r\n\r\n        if (0 == mapData) {\r\n          cc.log(\"tempData getInitAllHeroList line224 heroUID =0  heroList[key][i].cellID =\" + cellID);\r\n          return;\r\n        }\r\n\r\n        this.localHeroList[index].heroUID.push(mapData);\r\n        const heroCfg = gm.data.config_data.getHeroCfgByID(heroID);\r\n        if (heroCfg) {\r\n          if (heroCfg.hero_type == HeroTypeEnum.SUPER_HERO_TYPE) {\r\n            const superHero = gm.data.mapCell_data.getSuperHeroData(heroCfg.heroid, cellID);\r\n            if (superHero) {\r\n              this.localHeroList[index].heroHp.push(superHero.hp);\r\n            }\r\n          } else {\r\n            this.localHeroList[index].heroHp.push(heroCfg.hp);\r\n          }\r\n        }\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (!found) {\r\n      const heroCfg = gm.data.config_data.getHeroCfgByID(heroID);\r\n      if (heroCfg) {\r\n        const localHeroItem = new LocalHeroItemVO;\r\n        localHeroItem.heroID = heroCfg.heroid;\r\n        localHeroItem.heroLvl = heroCfg.lv;\r\n        localHeroItem.heroNum = 1;\r\n        localHeroItem.cellID = [cellID];\r\n        const mapData = gm.data.mapCell_data.getMapdataByCellID(cellID);\r\n        if (0 != mapData) {\r\n          localHeroItem.heroUID = [mapData];\r\n          if (heroCfg.hero_type == HeroTypeEnum.SUPER_HERO_TYPE) {\r\n            const superHero = gm.data.mapCell_data.getSuperHeroData(heroCfg.heroid, cellID);\r\n            if (superHero) {\r\n              localHeroItem.heroHp = [superHero.hp];\r\n            }\r\n          } else {\r\n            localHeroItem.heroHp = [heroCfg.hp];\r\n          }\r\n          localHeroItem.sortNum = heroCfg.sequence;\r\n          this.localHeroList.push(localHeroItem);\r\n          Utils.sort_by_props(this.localHeroList, {\r\n            sortNum: \"ascending\"\r\n          });\r\n        } else {\r\n          cc.log(\"tempData getInitAllHeroList line252 heroUID =0  heroList[key][i].cellID =\" + cellID);\r\n        }\r\n      }\r\n    }\r\n  } // end: addHeroByID\r\n\r\n  // @\r\n public static getHeroList(): LocalHeroItem[] {\r\n    return this.localHeroList;\r\n  }\r\n}\r\n\r\nexport class LocalHeroItemVO {\r\n  public heroID: number;\r\n  public heroLvl: number;\r\n  public heroNum: number;\r\n  public cellID: number[];\r\n  public heroUID: number[];\r\n  public heroHp: number[];\r\n  public sortNum: number;\r\n}\r\n\r\nexport class OfflineItemVO { }\r\n\r\nexport class TempGuideVO {\r\n  public guideID: number;\r\n  public isEnd: boolean;\r\n  public runningIndex: number\r\n}\r\n\r\nexport class GuideBuildMetrailVO {\r\n  public metrailList: GuideBuildMetrailItemVO[];\r\n  public buildID: number;\r\n}\r\n\r\nexport class GuideBuildMetrailItemVO {\r\n  public needNum: number;\r\n  public itemNum: number;\r\n  public itemID: number;\r\n  public itemType: number;\r\n  public cellID: number;\r\n}\r\n\r\n"]}