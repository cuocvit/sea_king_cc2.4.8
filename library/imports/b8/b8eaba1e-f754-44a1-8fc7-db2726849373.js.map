{"version":3,"sources":["assets\\settings\\scripts\\Settings.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ChannelManager, BANNER_AD_TYPE } from '../../start-scene/scripts/ChannelManager';\r\nimport { SettingsData } from '../../start-scene/scripts/SettingsData';\r\nimport { gm } from '../../start-scene/scripts/GameManager';\r\nimport { GameModule } from '../../start-scene/scripts/GameModule';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass Settings extends GameModule {\r\n    @property(cc.Button)\r\n    private close_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private anywhere_close_btn: cc.Button = null;\r\n\r\n    @property(cc.Label)\r\n    private name_lbl: cc.Label = null;\r\n\r\n    @property(cc.Button)\r\n    private rename_btn: cc.Button = null;\r\n\r\n    @property(cc.Node)\r\n    private rename_red_node: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    private device_id_lbl: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private uid_lbl: cc.Label = null;\r\n\r\n    @property(cc.Button)\r\n    private clear_ware_house_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private copy_btn: cc.Button = null;\r\n\r\n    @property(cc.Label)\r\n    private cp_lbl: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private version_lbl: cc.Label = null;\r\n\r\n    @property(cc.Button)\r\n    private user_agreement_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private privacy_policy_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private announcement_btn: cc.Button = null;\r\n\r\n    protected onEnable(): void {\r\n        gm.data.event_emitter.on(SettingsData.EVENT_DATA_CHANGE, this.update_view, this);\r\n        this.update_view();\r\n        gm.channel.show_banner_ad(BANNER_AD_TYPE.ALL);\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        gm.data.event_emitter.off(SettingsData.EVENT_DATA_CHANGE, this.update_view, this);\r\n        gm.channel.hide_banner_ad(BANNER_AD_TYPE.ALL);\r\n    }\r\n\r\n    public update_view(): void {\r\n        this.name_lbl.string = gm.data.server_data.nickname || gm.data.server_data.uid;\r\n        this.device_id_lbl.string = gm.channel.get_device_id();\r\n        this.uid_lbl.string = gm.data.server_data.uid;\r\n        this.cp_lbl.string = \"Nhà phát triển: DEFIX NETWORK\";\r\n        this.version_lbl.string = \"Phiên bản：v\" + gm.channel.get_version_name() + \"_\" + gm.channel.get_version_code();\r\n        this.rename_red_node.active = 0 == gm.data.server_data.free_rename;\r\n\r\n        const channelName = gm.channel.get_channel_name();\r\n        if (channelName == ChannelManager.TAP_TAP_GAME ||\r\n            channelName == ChannelManager.OHAYOO_GAME ||\r\n            channelName == ChannelManager.MOMOYU_GAME ||\r\n            channelName == ChannelManager.KE_SHENG_GAME) {\r\n            this.privacy_policy_btn.node.active = true;\r\n            this.user_agreement_btn.node.active = true;\r\n            this.copy_btn.node.active = true;\r\n        } else {\r\n            this.privacy_policy_btn.node.active = false;\r\n            this.user_agreement_btn.node.active = false;\r\n            this.copy_btn.node.active = false;\r\n        }\r\n    }\r\n\r\n    private editor_on_button_click_handler(event: cc.Event): void {\r\n        if (event.target == this.close_btn.node || event.target == this.anywhere_close_btn.node) {\r\n            gm.ui.async_hide_module(gm.const.Settings);\r\n\r\n        } else if (event.target == this.user_agreement_btn.node) {\r\n            if (gm.channel.get_channel_name() == ChannelManager.OHAYOO_GAME) {\r\n                cc.sys.openURL(\"https://zjsms.com/efCf5c3/\");\r\n\r\n            } else if (!(gm.channel.get_channel_name() != ChannelManager.TAP_TAP_GAME &&\r\n                gm.channel.get_channel_name() != ChannelManager.MOMOYU_GAME &&\r\n                gm.channel.get_channel_name() != ChannelManager.KE_SHENG_GAME)) {\r\n                cc.sys.openURL(\"https://cdnres.qszhg.6hwan.com/sailing/remote/user_agreement.html\");\r\n            }\r\n\r\n        } else if (event.target == this.privacy_policy_btn.node) {\r\n            if (gm.channel.get_channel_name() == ChannelManager.OHAYOO_GAME) {\r\n                cc.sys.openURL(\"https://zjsms.com/efhFTUT/\");\r\n\r\n            } else if (!(gm.channel.get_channel_name() != ChannelManager.TAP_TAP_GAME &&\r\n                gm.channel.get_channel_name() != ChannelManager.MOMOYU_GAME &&\r\n                gm.channel.get_channel_name() != ChannelManager.KE_SHENG_GAME)) {\r\n                cc.sys.openURL(\"https://cdnres.qszhg.6hwan.com/sailing/remote/privacy_agreement.html\");\r\n            }\r\n\r\n        } else if (event.target == this.clear_ware_house_btn.node) {\r\n            gm.data.mapCell_data.clearWareHouseList();\r\n            gm.ui.show_notice(\"Cabin đã được dọn sạch!!!\");\r\n\r\n        } else if (event.target == this.copy_btn.node) {\r\n            const deviceID = this.device_id_lbl.string.trim();\r\n            if (\"\" != deviceID) {\r\n                gm.channel.copy_to_clipboard(deviceID);\r\n            }\r\n\r\n        } else if (event.target == this.rename_btn.node) {\r\n            gm.ui.async_show_module(gm.const.Rename);\r\n\r\n        } else if (event.target == this.announcement_btn.node) {\r\n            gm.ui.async_show_module(gm.const.Announcement);\r\n        }\r\n    }\r\n}\r\n"]}