{"version":3,"sources":["assets\\start-scene\\scripts\\PropItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// @\r\nimport { Utils } from './Utils';\r\nimport { ItemTypeEnum, PropTypeEnum, HeroTypeEnum, BundleName } from './Constants';\r\nimport { gm } from './GameManager';\r\nimport { NodePoolItem } from './NodePoolItem';\r\nimport { MapItemDataVO } from './MapCellCfgData';\r\nimport { ItemConfig } from '../../common/configs/item';\r\nimport { HeroConfig } from '../../common/configs/hero';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PropItem extends cc.Component {\r\n    @property(cc.Sprite)\r\n    private itemImg: cc.Sprite = null;\r\n\r\n    @property(cc.Node)\r\n    private roleNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private bgwhite: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    private lvl: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    private diaoxiangTipsNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private clickNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private moveNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private defenseIcon: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    public newItemNode: cc.Node = null;\r\n\r\n    // private\r\n    private itemCfg: ItemConfig;\r\n    private _itemData: MapItemDataVO;\r\n    private _heroCfg: HeroConfig;\r\n    private _isShowTips: boolean;\r\n    private _isFirstMove: boolean;\r\n    private _startTime: number;\r\n\r\n    // @\r\n    constructor() {\r\n        super();\r\n        this.itemCfg = null;\r\n        this._itemData = null;\r\n        this._heroCfg = null;\r\n        this._isShowTips = false;\r\n        this._isFirstMove = false;\r\n        this._startTime = 0;\r\n    }\r\n\r\n    //\r\n    public initData(itemData: MapItemDataVO): void {\r\n        this._itemData = itemData;\r\n        this.diaoxiangTipsNode.active = false;\r\n        this.defenseIcon.active = false;\r\n        if (0 != this._itemData.itemID) {\r\n            if (this._itemData.itemType == ItemTypeEnum.ITEM_TYPE) {\r\n                this.itemImg.node.active = true;\r\n                this.roleNode.active = false;\r\n                this.itemCfg = gm.data.config_data.getItemCfgByID(this._itemData.itemID) as ItemConfig;\r\n                if (this.itemCfg) {\r\n                    this._heroCfg = null;\r\n                    this.itemImg.node.x = this.itemCfg.xoffset;\r\n                    this.itemImg.node.y = this.itemCfg.offset;\r\n                    if (\"\" == this.itemCfg.anim_name) {\r\n                        Utils.async_set_sprite_frame(this.itemImg, BundleName.MAP, \"res/\" + this.itemCfg.icon);\r\n                        gm.pool.put_children(this.itemImg.node);\r\n                        if (this.itemCfg.type == PropTypeEnum.STONE_HERO_TYPE) {\r\n                            this.diaoxiangTipsNode.active = true;\r\n                        }\r\n                    } else {\r\n                        this.itemImg.spriteFrame = null;\r\n                        gm.pool.put_children(this.itemImg.node);\r\n                        gm.pool.async_get(BundleName.MAP, \"prefabs/item/\" + this.itemCfg.anim_name, NodePoolItem, (nodePoolItem) => {\r\n                            if (0 == this.itemImg.node.childrenCount) {\r\n                                this.itemImg.node.addChild(nodePoolItem.node);\r\n                                const animation = nodePoolItem.getComponent(cc.Animation);\r\n                                if (animation) {\r\n                                    animation.play();\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n\r\n            } else if (this._itemData.itemType == ItemTypeEnum.HERO_TYPE) {\r\n                this._heroCfg = gm.data.config_data.getHeroCfgByID(this._itemData.itemID) as HeroConfig;\r\n                this.itemCfg = null;\r\n                this.defenseIcon.active = gm.data.mapCell_data.getHeroIsDefanseByCellID(this._itemData.cellID);\r\n                this.itemImg.node.active = false;\r\n                this.roleNode.active = true;\r\n                if (0 < this.roleNode.childrenCount) {\r\n                    gm.pool.put_children(this.roleNode);\r\n                }\r\n                gm.pool.async_get(BundleName.COMMON, \"prefabs/model/\" + this._heroCfg.heroid, NodePoolItem, (nodePoolItem) => {\r\n\r\n                    if (0 == this.roleNode.childrenCount) {\r\n                        this.roleNode.addChild(nodePoolItem.node);\r\n                        nodePoolItem.node.x = 0;\r\n                        nodePoolItem.node.y = -15;\r\n                        if (nodePoolItem.getComponent(sp.Skeleton)) {\r\n                            nodePoolItem.getComponent(sp.Skeleton).setSkin(\"front\");\r\n                            nodePoolItem.getComponent(sp.Skeleton).setAnimation(0, \"stay\", !0);\r\n                            if (this._heroCfg.hero_type == HeroTypeEnum.SUPER_HERO_TYPE) {\r\n                                (nodePoolItem.node.x = -20);\r\n                            }\r\n                        }\r\n\r\n                        this.roleNode.active = true;\r\n                        if (10 == this._heroCfg.occupation) {\r\n                            this.setWallImg();\r\n                        }\r\n                        nodePoolItem.node.color = cc.Color.WHITE;\r\n                        const heroNode = gm.data.mapCell_data.getSuperHeroData(this._heroCfg.heroid, this._itemData.cellID)\r\n                        if ((this._heroCfg.hero_type == HeroTypeEnum.SUPER_HERO_TYPE) && heroNode && 1 == heroNode.heroState) {\r\n                            (nodePoolItem.node.color = cc.Color.GRAY);\r\n                        }\r\n                    } else {\r\n                        gm.pool.put(nodePoolItem.node);\r\n                    }\r\n                });\r\n            }\r\n\r\n            this.roleNode.parent.x = 0;\r\n            this.roleNode.parent.y = 0;\r\n            this.bgwhite.active = false;\r\n        } else {\r\n            this.node.removeFromParent();\r\n        }\r\n    }\r\n\r\n    private setWallImg(): void {\r\n        const wallCellIDs = gm.data.config_data.getCallDireCellID(this._itemData.cellID);\r\n        if (0 < this.roleNode.childrenCount) {\r\n            for (let index = 0; index < wallCellIDs.length; index++) {\r\n                if (this.roleNode.children[0].getChildByName(gm.const.WALLNAMELIST[index])) {\r\n                    if (-1 == wallCellIDs[index]) {\r\n                        this.roleNode.children[0].getChildByName(gm.const.WALLNAMELIST[index]).active = false;\r\n                    } else {\r\n                        this.roleNode.children[0].getChildByName(gm.const.WALLNAMELIST[index]).active = gm.data.mapCell_data.getCellIsWall(wallCellIDs[index]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        this.newItemNode.active = false;\r\n        this.clickNode.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.clickNode.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        this.clickNode.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n        this.clickNode.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this);\r\n        this.node.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED, this.openBarrelAnimEnd, this);\r\n        this.roleNode.parent.x = 0;\r\n        this.roleNode.parent.y = 0;\r\n        this.moveNode.active = false;\r\n\r\n        gm.ui.on(\"item_move\", this.on_move_item_move, this);\r\n        gm.ui.on(\"item_move_end\", this.on_move_item_hide, this);\r\n        gm.ui.on(\"item_not_move_end\", this.on_not_move_item_hide, this);\r\n        gm.ui.on(\"compose_anim\", this.playAddItemAnim, this);\r\n        gm.ui.on(\"updateWall\", this.updateWall, this);\r\n        gm.ui.on(\"updateDefenseHero\", this.updateDefenseHero, this);\r\n        gm.ui.on(\"set_item_battle_hero_operty\", this.setBatterHeroOpacity, this);\r\n        gm.ui.on(\"set_new_item_alpha\", this.showIsNewItem, this);\r\n        gm.ui.on(\"refresh_super_hero_color\", this.refreshSuperHeroColor, this);\r\n        gm.ui.on(\"close_new_anim\", this.hideNewAnim, this);\r\n    }\r\n\r\n    private refreshSuperHeroColor(cellID: number, itemID: number): void {\r\n        if (this._itemData && cellID == this._itemData.cellID && itemID == this._itemData.itemID && 0 < this.roleNode.childrenCount) {\r\n            this.roleNode.children[0].color = cc.Color.WHITE;\r\n        }\r\n    }\r\n\r\n    private showIsNewItem(cellID: number): void {\r\n        if (this._itemData && cellID == this._itemData.cellID) {\r\n            this.newItemNode.active = true;\r\n        }\r\n    }\r\n\r\n    private setBatterHeroOpacity(cellID: number, isVisible: boolean): void {\r\n        cc.log(\"setBatterHeroOpacity\" + cellID, isVisible);\r\n        if (this._itemData && cellID == this._itemData.cellID) {\r\n            this.node.opacity = isVisible ? 255 : 0;\r\n        }\r\n    }\r\n\r\n    private updateDefenseHero(cellID: number, isActive: boolean): void {\r\n        if (this._itemData && cellID == this._itemData.cellID) {\r\n            this.defenseIcon.active = isActive;\r\n        }\r\n    }\r\n\r\n    private updateWall(cellID: number): void {\r\n        if (this._itemData && cellID == this._itemData.cellID) {\r\n            this.setWallImg();\r\n        }\r\n    }\r\n\r\n    private on_not_move_item_hide(podition: cc.Vec2, cellID: number): void {\r\n        this.on_move_item_hide(podition, cellID);\r\n    }\r\n\r\n    private on_move_item_move(touchEvent: cc.Vec2, itemType: ItemTypeEnum, itemID: number): void {\r\n        if (this._itemData && !this._isFirstMove) {\r\n            this._isFirstMove = true;\r\n            this._isShowTips = false;\r\n            this.moveNode.active = true;\r\n            if (itemType == ItemTypeEnum.ITEM_TYPE) {\r\n                const itemConfig = gm.data.config_data.getItemCfgByID(itemID);\r\n                if (itemConfig && this.itemCfg) {\r\n                    if (itemConfig.type == this.itemCfg.type) {\r\n                        if (!(itemConfig.type != PropTypeEnum.WOOD_TYPE &&\r\n                            itemConfig.type != PropTypeEnum.IRON_TYPE &&\r\n                            itemConfig.type != PropTypeEnum.SHELL_MONEY_TYPE &&\r\n                            itemConfig.type != PropTypeEnum.SOUL_TYPE)) {\r\n\r\n                            this.lvl.string = this.itemCfg.number + \"\";\r\n                            this._isShowTips = true;\r\n                        }\r\n                    }\r\n\r\n                    if (itemID == this.itemCfg.id && 0 < this.itemCfg.next) {\r\n                        this.bgwhite.active = true;\r\n                        this.node.getComponent(cc.Animation).play(\"item_Tishi\");\r\n                        this._isShowTips = true;\r\n                    }\r\n                }\r\n                else if (itemConfig && this._heroCfg && itemConfig.type == PropTypeEnum.WEAPON_TYPE && this._heroCfg) {\r\n                    for (let index = 0; index < this._heroCfg.nextNeedItem.length; index++) {\r\n                        if (itemConfig.id == this._heroCfg.nextNeedItem[index]) {\r\n                            this.bgwhite.active = true;\r\n                            this.node.getComponent(cc.Animation).play(\"item_Tishi\");\r\n                            this._isShowTips = true;\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n\r\n            } else if (itemType == ItemTypeEnum.HERO_TYPE) {\r\n                const heroConfig = gm.data.config_data.getHeroCfgByID(itemID);\r\n                if (heroConfig) {\r\n                    for (let index = 0; index < heroConfig.nextNeedItem.length; index++) {\r\n                        if (this._itemData.itemID == heroConfig.nextNeedItem[index]) {\r\n                            this.bgwhite.active = true;\r\n                            this.node.getComponent(cc.Animation).play(\"item_Tishi\");\r\n                            this._isShowTips = true;\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private on_move_item_hide(param1?: cc.Vec2, pram2?: number): void {\r\n        this._isFirstMove = false;\r\n        if (this._isShowTips) {\r\n            this._isShowTips = false;\r\n            this.bgwhite.active = false;\r\n            this.lvl.string = \"\";\r\n            this.node.getComponent(cc.Animation).stop();\r\n            this.roleNode.parent.x = 0;\r\n            this.roleNode.parent.y = 0;\r\n            this.itemImg.node.parent.scale = 1;\r\n        }\r\n    }\r\n\r\n    private onTouchStart(): void {\r\n        this.newItemNode.active = false;\r\n        if (this.node.getComponent(cc.Animation).getAnimationState(\"item_TongClose\").isPlaying ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            1 == gm.data.fight_temp_data.open_battle_panel_state ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.type == PropTypeEnum.BARRIL_TYPE ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.type == PropTypeEnum.STONE_HERO_TYPE ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.id == gm.const.HEROGIFTID ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.id == gm.const.GIFTID ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.id == gm.const.PAGODAGIFTID ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.type == PropTypeEnum.DIAMONDS_TYPE) {\r\n            return;\r\n        }\r\n\r\n        this._startTime = Date.now();\r\n    }\r\n\r\n    private onTouchMove(touchEvent: cc.Event.EventTouch): void {\r\n        if (this.node.getComponent(cc.Animation).getAnimationState(\"item_TongClose\").isPlaying ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.type == PropTypeEnum.BARRIL_TYPE ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            1 == gm.data.fight_temp_data.open_battle_panel_state ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.type == PropTypeEnum.STONE_HERO_TYPE ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.id == gm.const.HEROGIFTID ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.id == gm.const.GIFTID ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg && this.itemCfg.id == gm.const.PAGODAGIFTID ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.type == PropTypeEnum.DIAMONDS_TYPE ||\r\n            this._itemData.itemType == ItemTypeEnum.HERO_TYPE &&\r\n            this._heroCfg &&\r\n            this._heroCfg.hero_type == HeroTypeEnum.SUPER_HERO_TYPE &&\r\n            0 == touchEvent.touch._startPoint.sub(touchEvent.touch._point).mag() ||\r\n            this._itemData.itemType == ItemTypeEnum.HERO_TYPE &&\r\n            this._heroCfg &&\r\n            (11 == this._heroCfg.occupation ||\r\n                12 == this._heroCfg.occupation) &&\r\n            0 == touchEvent.touch._startPoint.sub(touchEvent.touch._point).mag()) {\r\n            return;\r\n        }\r\n\r\n        if (0 < this.node.opacity) {\r\n            this.node.opacity = 0;\r\n            this._isFirstMove = false;\r\n        }\r\n        gm.ui.emit(\"item_move\", touchEvent.getLocation(), this._itemData.itemType, this._itemData.itemID);\r\n    }\r\n\r\n    public onOpenBarrel(): void {\r\n        this.node.opacity = 255;\r\n        this.node.getComponent(cc.Animation).play(\"item_TongClose\");\r\n        if (this._itemData) {\r\n            gm.data.mapCell_data.openCase(this._itemData.cellID, this._itemData.itemID);\r\n            if (gm.data.mapCell_data.isGuide) {\r\n                if (3 == gm.data.mapCell_data.role_openBarrel_Times) {\r\n                    gm.data.mapCell_data.setRoleGuideData(2, 0);\r\n                    gm.ui.mapMainUI.checkGuideIsShow();\r\n                } else {\r\n                    gm.ui.mapMainUI.checkHandAnimDelay();\r\n                }\r\n            }\r\n        }\r\n\r\n        this.unscheduleAllCallbacks();\r\n        this.scheduleOnce(() => {\r\n            this.initData(gm.data.mapCell_data.role_map_data[this._itemData.cellID])\r\n        }, .25);\r\n    }\r\n\r\n    public onOpenSuperHeroCase(): void {\r\n        this.node.getComponent(cc.Animation).play(\"item_open_statue\");\r\n        gm.audio.play_effect(gm.const.AUDIO_90_STATUE_BREAKING);\r\n        this.node.opacity = 255;\r\n        gm.data.mapCell_data.openHeroGiftCase(this.itemCfg?.price, this._itemData?.cellID);\r\n        this.initData(gm.data.mapCell_data.role_map_data[this._itemData.cellID]);\r\n    }\r\n\r\n    public onOpenGiftCase(): void {\r\n        this.node.getComponent(cc.Animation).play(\"item_open_statue\");\r\n        gm.audio.play_effect(gm.const.AUDIO_90_STATUE_BREAKING);\r\n        this.node.opacity = 255;\r\n        gm.data.mapCell_data.openWaterGirlCase(this.itemCfg?.price, this._itemData?.cellID);\r\n    }\r\n\r\n    private onOpenPagodaCase(): void {\r\n        this.node.getComponent(cc.Animation).play(\"item_open_statue\");\r\n        gm.audio.play_effect(gm.const.AUDIO_90_STATUE_BREAKING);\r\n        this.node.opacity = 255;\r\n    }\r\n\r\n    private onOpenHeroDescOp(): void {\r\n        gm.ui.set_module_args(gm.const.SUPERHEROOP.key, [this._heroCfg?.heroid, this._itemData?.cellID]);\r\n        gm.ui.async_show_module(gm.const.SUPERHEROOP);\r\n    }\r\n\r\n    private onTouchEnd(touchEvent: cc.Event.EventTouch): void {\r\n        if (!this.node.getComponent(cc.Animation).getAnimationState(\"item_TongClose\").isPlaying) {\r\n            if (this._itemData.itemType == ItemTypeEnum.ITEM_TYPE && this.itemCfg && this.itemCfg.type == PropTypeEnum.BARRIL_TYPE) {\r\n                this.onOpenBarrel();\r\n\r\n            } else if (this._itemData.itemType == ItemTypeEnum.ITEM_TYPE && this.itemCfg && this.itemCfg.id == gm.const.HEROGIFTID) {\r\n                this.onOpenSuperHeroCase();\r\n\r\n            } else if (this._itemData.itemType != ItemTypeEnum.ITEM_TYPE || this.itemCfg || this.itemCfg.id != gm.const.GIFTID && this.itemCfg.id != gm.const.PAGODAGIFTID) {\r\n                if (this._itemData.itemType == ItemTypeEnum.HERO_TYPE &&\r\n                    this._heroCfg &&\r\n                    this._heroCfg.hero_type == HeroTypeEnum.SUPER_HERO_TYPE &&\r\n                    Date.now() - this._startTime < 200 ||\r\n                    this._itemData.itemType == ItemTypeEnum.HERO_TYPE &&\r\n                    this._heroCfg &&\r\n                    (11 == this._heroCfg.occupation || 12 == this._heroCfg.occupation) &&\r\n                    Date.now() - this._startTime < 200) {\r\n                    this.onOpenHeroDescOp();\r\n\r\n                } else if (this._itemData.itemType == ItemTypeEnum.ITEM_TYPE && this.itemCfg && this.itemCfg.type == PropTypeEnum.STONE_HERO_TYPE) {\r\n                    this.onClickOpenHero();\r\n\r\n                } else {\r\n                    this.node.opacity = 255;\r\n                    gm.ui.mapMainUI.hideMoveItemNode();\r\n                    gm.ui.emit(\"item_move_hide_upgrade\");\r\n                    gm.ui.emit(\"hide_barrel_ui\");\r\n                    gm.ui.emit(\"item_not_move_end\", touchEvent.getLocation(), this._itemData.cellID);\r\n                }\r\n\r\n            } else {\r\n                this.onOpenGiftCase()\r\n            }\r\n        }\r\n    }\r\n\r\n    public onClickOpenHero(): void {\r\n        if (this._itemData.itemType == ItemTypeEnum.ITEM_TYPE && this.itemCfg && this.itemCfg.type == PropTypeEnum.STONE_HERO_TYPE) {\r\n            this.node.getComponent(cc.Animation).play(\"item_open_statue\");\r\n            gm.audio.play_effect(gm.const.AUDIO_90_STATUE_BREAKING);\r\n            this.node.opacity = 255;\r\n            gm.data.mapCell_data.openStoneHero(this._itemData.cellID, this._itemData.itemID);\r\n            this.initData(gm.data.mapCell_data.role_map_data[this._itemData.cellID]);\r\n            return;\r\n        }\r\n    }\r\n\r\n    private onTouchCancel(touchEvent: cc.Touch): void {\r\n        if (this.node.getComponent(cc.Animation).getAnimationState(\"item_TongClose\").isPlaying ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.type == PropTypeEnum.BARRIL_TYPE ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.type == PropTypeEnum.STONE_HERO_TYPE ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.id == gm.const.GIFTID ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.id == gm.const.PAGODAGIFTID ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.id == gm.const.HEROGIFTID ||\r\n            this._itemData.itemType == ItemTypeEnum.ITEM_TYPE &&\r\n            this.itemCfg &&\r\n            this.itemCfg.type == PropTypeEnum.DIAMONDS_TYPE) {\r\n            return;\r\n        }\r\n\r\n        this.node.opacity = 255;\r\n        gm.ui.emit(\"item_move_end\", touchEvent.getLocation(), this._itemData.cellID);\r\n        this._isFirstMove = false;\r\n    }\r\n\r\n    private openBarrelAnimEnd(): void { }\r\n\r\n    private item_move_anim(itemID: number): void {\r\n        const itemType = 3e4 < itemID ? ItemTypeEnum.HERO_TYPE : ItemTypeEnum.ITEM_TYPE;\r\n        const currentItemType = 3e4 < this._itemData.itemID ? ItemTypeEnum.HERO_TYPE : ItemTypeEnum.ITEM_TYPE;\r\n        if (itemType == ItemTypeEnum.HERO_TYPE) {\r\n            if (2 == this._itemData.cellState) {\r\n                this.lvl.string = \"\";\r\n                const heroConfig = gm.data.config_data.getHeroCfgByID(itemID);\r\n                if (heroConfig) {\r\n                    for (let index = 0; index < heroConfig.nextNeedItem.length; index++) {\r\n                        if (0 < heroConfig.nextNeedItem[index] && this._itemData.itemID == heroConfig.nextNeedItem[index]) {\r\n                            this.bgwhite.active = true;\r\n                            this.node.getComponent(cc.Animation).play(\"item_Tishi\");\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else if (itemType == ItemTypeEnum.ITEM_TYPE) {\r\n            this.lvl.string = \"\";\r\n            if (2 == this._itemData.cellState) {\r\n                const itemConfig = gm.data.config_data.getItemCfgByID(itemID);\r\n                if (itemConfig) {\r\n                    if (currentItemType == ItemTypeEnum.ITEM_TYPE) {\r\n                        if (itemConfig.type == PropTypeEnum.WOOD_TYPE ||\r\n                            itemConfig.type == PropTypeEnum.IRON_TYPE ||\r\n                            itemConfig.type == PropTypeEnum.SHELL_MONEY_TYPE ||\r\n                            itemConfig.type == PropTypeEnum.SOUL_TYPE) {\r\n                            this.bgwhite.active = 2 == this._itemData.cellState && itemID == this._itemData.itemID;\r\n\r\n                            if (this.bgwhite.active) {\r\n                                this.node.getComponent(cc.Animation).play(\"item_Tishi\");\r\n                            }\r\n\r\n                            if (!this.itemCfg) {\r\n                                this.itemCfg = gm.data.config_data.getItemCfgByID(this._itemData.itemID);\r\n                            }\r\n\r\n                            if (this.itemCfg && itemConfig.type == this.itemCfg.type) {\r\n                                this.lvl.string = this.itemCfg.number + \"\";\r\n                            }\r\n\r\n                        } else {\r\n                            this.bgwhite.active = 2 == this._itemData.cellState &&\r\n                                itemConfig.type != PropTypeEnum.WEAPON_TYPE &&\r\n                                itemID == this._itemData.itemID &&\r\n                                this.itemCfg && 0 < this.itemCfg.next;\r\n\r\n                            if (this.bgwhite.active) {\r\n                                this.node.getComponent(cc.Animation).play(\"item_Tishi\");\r\n                            }\r\n                        }\r\n\r\n                    } else if (currentItemType == ItemTypeEnum.HERO_TYPE && itemConfig.type == PropTypeEnum.WEAPON_TYPE) {\r\n                        if (!this._heroCfg) {\r\n                            this._heroCfg = gm.data.config_data.getHeroCfgByID(this._itemData.itemID);\r\n                        }\r\n                        for (let index = 0; index < this._heroCfg.nextNeedItem.length; index++)\r\n                            if (0 < this._heroCfg.nextNeedItem[index] && this._heroCfg.nextNeedItem[index] == itemConfig.id) {\r\n                                this.bgwhite.active = true;\r\n                                this.node.getComponent(cc.Animation).play(\"item_Tishi\");\r\n                                break;\r\n                            }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private moveItemEndAnim(): void {\r\n        this.node.getComponent(cc.Animation).stop();\r\n        this.roleNode.parent.x = 0;\r\n        this.roleNode.parent.y = 0;\r\n        this.itemImg.node.parent.scale = 1;\r\n        this.bgwhite.active = false;\r\n        this.lvl.string = \"\";\r\n    }\r\n\r\n    private showAnimByMoveID(moveID: number, cellID: number): void {\r\n        let itemConfig;\r\n        if (cellID == this._itemData?.cellID) {\r\n            this.node.children[0].active = false;\r\n            this.lvl.string = \"\";\r\n        } else {\r\n            this.lvl.string = \"\";\r\n            if (moveID > 15000 && moveID < 18000) {\r\n                itemConfig = gm.data.config_data.getItemCfgByID(moveID);\r\n                if (itemConfig) {\r\n                    this.lvl.string = itemConfig.lv + \"\";\r\n                    this.bgwhite.active = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private playAddItemAnim(cellID: number): void {\r\n        if (this._itemData?.cellID == cellID) {\r\n            this.node.getComponent(cc.Animation).play(\"item_TongOpen\");\r\n        }\r\n    }\r\n\r\n    private hideAnimByMoveID(cellID: number): void {\r\n        this.lvl.string = \"\";\r\n        this.bgwhite.active = false;\r\n        if (cellID == this._itemData?.cellID) {\r\n            this.node.children[0].active = true;\r\n        }\r\n    }\r\n\r\n    private hideNewAnim(cellID: number): void {\r\n        if (this._itemData && this._itemData.cellID == cellID) {\r\n            this.newItemNode.active = false;\r\n        }\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        gm.ui.off(\"compose_anim\", this.playAddItemAnim, this);\r\n        this.clickNode?.off(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.clickNode?.off(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        this.clickNode?.off(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n        this.clickNode?.off(cc.Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this);\r\n        gm.ui.off(\"item_move\", this.on_move_item_move, this);\r\n        gm.ui.off(\"item_move_end\", this.on_move_item_hide, this);\r\n        gm.ui.off(\"item_not_move_end\", this.on_not_move_item_hide, this);\r\n        gm.ui.off(\"updateWall\", this.updateWall, this);\r\n        gm.ui.off(\"updateDefenseHero\", this.updateDefenseHero, this);\r\n        gm.ui.off(\"set_item_battle_hero_operty\", this.setBatterHeroOpacity, this);\r\n        gm.ui.off(\"set_new_item_alpha\", this.showIsNewItem, this);\r\n        gm.ui.off(\"refresh_super_hero_color\", this.refreshSuperHeroColor, this);\r\n        gm.ui.off(\"close_new_anim\", this.hideNewAnim, this);\r\n        this.node.getComponent(cc.Animation).off(cc.Animation.EventType.FINISHED, this.openBarrelAnimEnd, this);\r\n    }\r\n}"]}