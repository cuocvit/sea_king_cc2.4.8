{"version":3,"sources":["assets\\start-scene\\scripts\\TaskEntry.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM;AACN,uCAAsC;AACtC,6CAAmC;AACnC,+CAA8C;AAC9C,iDAAgD;AAChD,yCAAyC;AAEnC,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA+B,6BAAY;IAMvC;QAAA,YACI,iBAAO,SACV;QANO,4BAAsB,GAAqB,IAAI,CAAC;QAEhD,2BAAqB,GAAoB,EAAE,CAAC;;IAIpD,CAAC;IAES,0BAAM,GAAhB;QACI,IAAM,cAAc,GAAW,gBAAE,CAAC,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC;QAClE,KAAK,IAAI,CAAC,GAAW,CAAC,EAAE,CAAC,GAAG,cAAc,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAM,IAAI,GAAG,gBAAE,CAAC,IAAI,CAAC,GAAG,CAAC,sBAAU,CAAC,IAAI,EAAE,yBAAyB,EAAE,6BAAa,CAAC,CAAC;YACpF,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9B,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SACxC;IACL,CAAC;IAES,4BAAQ,GAAlB;QACI,gBAAE,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,mBAAQ,CAAC,iBAAiB,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAC7E,IAAI,CAAC,WAAW,EAAE,CAAC;IACvB,CAAC;IAES,6BAAS,GAAnB;QACI,gBAAE,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,mBAAQ,CAAC,iBAAiB,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;IAClF,CAAC;IAEO,+BAAW,GAAnB;QACI,IAAM,QAAQ,GAAG,gBAAE,CAAC,IAAI,CAAC,SAAS,CAAC;QACnC,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YACpE,IAAM,IAAI,GAAG,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;YAC7C,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACrD,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;aACjD;iBAAM;gBACH,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;aACzD;SACJ;IACL,CAAC;IArCD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;6DACoC;IAF/C,SAAS;QADrB,OAAO;OACK,SAAS,CAwCrB;IAAD,gBAAC;CAxCD,AAwCC,CAxC8B,2BAAY,GAwC1C;AAxCY,8BAAS","file":"","sourceRoot":"/","sourcesContent":["// *-*\r\nimport { TaskData } from './TaskData';\r\nimport { gm } from './GameManager';\r\nimport { NodePoolItem } from './NodePoolItem';\r\nimport { TaskEntryItem } from './TaskEntryItem';\r\nimport { BundleName } from './Constants';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class TaskEntry extends NodePoolItem {\r\n    @property(cc.Prefab)\r\n    private task_entry_item_prefab: cc.Prefab | null = null;\r\n\r\n    private task_entry_item_array: TaskEntryItem[] = [];\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected onLoad(): void {\r\n        const dailyTaskCount: number = gm.data.task_data.daily_task_count;\r\n        for (let i: number = 0; i < dailyTaskCount; i++) {\r\n            const item = gm.pool.get(BundleName.TASK, \"prefabs/task_entry_item\", TaskEntryItem);\r\n            this.node.addChild(item.node);\r\n            this.task_entry_item_array[i] = item;\r\n        }\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        gm.data.event_emitter.on(TaskData.EVENT_DATA_CHANGE, this.update_view, this);\r\n        this.update_view();\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        gm.data.event_emitter.off(TaskData.EVENT_DATA_CHANGE, this.update_view, this);\r\n    }\r\n\r\n    private update_view(): void {\r\n        const taskData = gm.data.task_data;\r\n        for (let index = 0; index < this.task_entry_item_array.length; index++) {\r\n            const data = taskData.task_data_array[index];\r\n            if (data) {\r\n                this.task_entry_item_array[index].node.active = true;\r\n                this.task_entry_item_array[index].data = data;\r\n            } else {\r\n                this.task_entry_item_array[index].node.active = false;\r\n            }\r\n        }\r\n    }\r\n}"]}