{"version":3,"sources":["assets\\start-scene\\scripts\\PlayAndStop.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// +-+\r\nimport { GameObject } from './GameObject';\r\n\r\nconst { ccclass, property, menu } = cc._decorator;\r\n\r\n@ccclass\r\n@menu(\"添加自定义组件/PlayAndStop\")\r\nexport class PlayAndStop extends GameObject {\r\n    @property(cc.Boolean)\r\n    private auto_play_and_stop: boolean = true;\r\n\r\n    private _ps: cc.ParticleSystem | null = null;\r\n    private _anim: cc.Animation | null = null;\r\n    private _spine: sp.Skeleton | null = null;\r\n    private _anim_state: cc.AnimationState | null = null;\r\n    private _spine_track: sp.spine.TrackEntry | null = null;\r\n\r\n    protected onLoad(): void {\r\n        this._ps = this.node.getComponent(cc.ParticleSystem);\r\n        this._anim = this.node.getComponent(cc.Animation);\r\n        this._spine = this.node.getComponent(sp.Skeleton);\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        if (this.auto_play_and_stop) {\r\n            if (this._ps) {\r\n                this._ps.resetSystem();\r\n            }\r\n            if (this._anim) {\r\n                this._anim_state = this._anim.play();\r\n            } else if (this._spine) {\r\n                this._spine_track = this._spine.setAnimation(0, this._spine.defaultAnimation, false);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        if (this.auto_play_and_stop) {\r\n            if (this._ps) {\r\n                this._ps.stopSystem();\r\n            }\r\n            if (this._anim) {\r\n                this._anim.stop();\r\n            } else if (this._spine) {\r\n                this._spine.clearTrack(0);\r\n            }\r\n        }\r\n    }\r\n\r\n    private play(animationName: string, loop: boolean, time: number): void {\r\n        if (this._anim) {\r\n            this._anim_state = this._anim.play(animationName, time);\r\n            if (this._anim_state) {\r\n                this._anim_state.wrapMode = loop ? cc.WrapMode.Loop : cc.WrapMode.Default;\r\n            }\r\n        } else if (this._spine) {\r\n            this._spine_track = this._spine.setAnimation(0, animationName, loop);\r\n            if (this._spine_track) {\r\n                this._spine_track.trackTime = time;\r\n            }\r\n        }\r\n    }\r\n\r\n    private stop(): void {\r\n        if (this._anim) {\r\n            this._anim.stop();\r\n        } else if (this._spine) {\r\n            this._spine.clearTrack(0);\r\n        }\r\n    }\r\n}"]}