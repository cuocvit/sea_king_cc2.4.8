{"version":3,"sources":["assets\\start-scene\\scripts\\GetRewardOp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// +-+\r\nimport { gm } from './GameManager';\r\nimport { Utils } from './Utils';\r\nimport { BundleName } from './Constants';\r\nimport { DoubleOp } from './GetDoubleRewardOp';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass GetRewardOp extends cc.Component {\r\n    @property([cc.Node])\r\n    private photoList: cc.Node[] = [];\r\n\r\n    private idList: number[] = [];\r\n    private numList: number[] = [];\r\n\r\n    protected onEnable(): void {\r\n        const moduleArgs = gm.ui.get_module_args(gm.const.GETREWARDOP.key) as DoubleOp;\r\n        this.idList = moduleArgs.idList;\r\n        this.numList = moduleArgs.numList;\r\n        this.node.opacity = 255;\r\n\r\n        for (let i = 0; i < this.photoList.length; i++) {\r\n            this.photoList[i].active = false;\r\n            if (this.idList.length > i) {\r\n                this.photoList[i].active = true;\r\n                let config;\r\n                if (this.idList[i] > 30000) {\r\n                    config = gm.data.config_data.getHeroCfgByID(this.idList[i]);\r\n                    if (config) {\r\n                        Utils.async_set_sprite_frame(this.photoList[i].children[0].getComponent(cc.Sprite), BundleName.COMMON, \"res/color_\" + config.lv);\r\n                        Utils.async_set_sprite_frame(this.photoList[i].children[1].getComponent(cc.Sprite), BundleName.COMMON, \"res/handbook/\" + config.icon);\r\n                    }\r\n                } else {\r\n                    config = gm.data.config_data.getItemCfgByID(this.idList[i]);\r\n                    if (config) {\r\n                        Utils.async_set_sprite_frame(this.photoList[i].children[0].getComponent(cc.Sprite), BundleName.COMMON, \"res/color_\" + (config.lv === 0 ? 1 : config.lv));\r\n                        if ([11002, 11003, 11006].includes(config.id)) {\r\n                            Utils.async_set_sprite_frame(this.photoList[i].children[1].getComponent(cc.Sprite), BundleName.MAP, \"res/rewardIcon/\" + config.icon);\r\n                        } else {\r\n                            Utils.async_set_sprite_frame(this.photoList[i].children[1].getComponent(cc.Sprite), BundleName.COMMON, \"res/handbook/\" + config.icon);\r\n                        }\r\n                    }\r\n                }\r\n                this.photoList[i].children[2].getComponent(cc.Label).string = \"x\" + this.numList[i];\r\n            }\r\n        }\r\n\r\n        this.node.stopAllActions();\r\n        this.node.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(() => {\r\n            this.node.stopAllActions();\r\n            gm.ui.async_hide_module(gm.const.GETREWARDOP);\r\n        })));\r\n    }\r\n\r\n    private onClosePanel(): void {\r\n        this.node.stopAllActions();\r\n        gm.ui.async_hide_module(gm.const.GETREWARDOP);\r\n    }\r\n}\r\n\r\nexport default GetRewardOp;"]}