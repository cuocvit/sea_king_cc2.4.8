{"version":3,"sources":["assets\\fight\\scripts\\FightPropItem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uEAAsE;AACtE,yDAAwD;AACxD,qEAA2D;AAC3D,iEAAiE;AAI3D,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA4B,iCAAY;IAAxC;QAAA,qEAgDC;QA9CS,cAAQ,GAAqB,IAAI,CAAC;QAGlC,aAAO,GAAoB,IAAI,CAAC;;IA2C1C,CAAC;IAvCC,sBAAW,+BAAI;aAAf;YACE,OAAO,IAAI,CAAC,KAAK,CAAC;QACpB,CAAC;aAED,UAAgB,KAAwB;YACtC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC;;;OALA;IAOO,mCAAW,GAAnB;QAAA,iBAwBC;QAvBC,IAAM,QAAQ,GAAG,gBAAE,CAAC,MAAM,CAAC,YAAY,CAAC,gBAAgB,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAe,CAAC;QAClG,IAAI,QAAQ,EAAE;YACZ,IAAI,QAAQ,CAAC,SAAS,IAAI,EAAE,EAAE;gBAC5B,aAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,EAAE,sBAAU,CAAC,GAAG,EAAE,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBACpF,gBAAE,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;aAC1C;iBAAM;gBACL,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC;gBACjC,gBAAE,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACzC,gBAAE,CAAC,IAAI,CAAC,SAAS,CAAC,sBAAU,CAAC,GAAG,EAAE,eAAe,GAAG,QAAQ,CAAC,SAAS,EAAE,2BAAY,EAAE,UAAC,IAAI;oBACzF,IAAI,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,EAAE;wBACzC,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;wBACvC,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;wBAClD,IAAI,SAAS;4BAAE,SAAS,CAAC,IAAI,EAAE,CAAC;qBACjC;gBACH,CAAC,CAAC,CAAC;aACJ;YACD,IAAI,gBAAE,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE;gBACpC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBAChC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;aACjD;iBAAM;gBACL,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;aAClC;SACF;IACH,CAAC;IAEM,6BAAK,GAAZ;QACE,IAAI,IAAI,CAAC,QAAQ;YAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC;QACpD,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;IAC7C,CAAC;IA7CD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;mDACsB;IAG1C;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;kDACqB;IALpC,aAAa;QADlB,OAAO;OACF,aAAa,CAgDlB;IAAD,oBAAC;CAhDD,AAgDC,CAhD2B,2BAAY,GAgDvC;AAEQ,sCAAa","file":"","sourceRoot":"/","sourcesContent":["import { NodePoolItem } from '../../start-scene/scripts/NodePoolItem';\r\nimport { Utils } from '../../start-scene/scripts/Utils';\r\nimport { gm } from '../../start-scene/scripts/GameManager';\r\nimport { BundleName } from '../../start-scene/scripts/Constants';\r\nimport { ItemConfig } from '../../common/configs/item';\r\nimport { FightPropItemData } from '../../start-scene/scripts/FightTempData';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass FightPropItem extends NodePoolItem {\r\n  @property(cc.Sprite)\r\n  private prop_spr: cc.Sprite | null = null;\r\n\r\n  @property(cc.Label)\r\n  private num_lbl: cc.Label | null = null;\r\n\r\n  private _data: FightPropItemData;\r\n\r\n  public get data(): FightPropItemData {\r\n    return this._data;\r\n  }\r\n\r\n  public set data(value: FightPropItemData) {\r\n    this._data = value;\r\n    this.update_view();\r\n  }\r\n\r\n  private update_view(): void {\r\n    const itemData = gm.config.get_row_data(\"ItemConfigData\", this._data.id.toString()) as ItemConfig;\r\n    if (itemData) {\r\n      if (itemData.anim_name == \"\") {\r\n        Utils.async_set_sprite_frame(this.prop_spr, BundleName.MAP, \"res/\" + this._data.id);\r\n        gm.pool.put_children(this.prop_spr.node);\r\n      } else {\r\n        this.prop_spr.spriteFrame = null;\r\n        gm.pool.put_children(this.prop_spr.node);\r\n        gm.pool.async_get(BundleName.MAP, \"prefabs/item/\" + itemData.anim_name, NodePoolItem, (item) => {\r\n          if (this.prop_spr.node.childrenCount == 0) {\r\n            this.prop_spr.node.addChild(item.node);\r\n            const animation = item.getComponent(cc.Animation);\r\n            if (animation) animation.play();\r\n          }\r\n        });\r\n      }\r\n      if (gm.data.fight_temp_data.is_debug) {\r\n        this.num_lbl.node.active = true;\r\n        this.num_lbl.string = this._data.num.toString();\r\n      } else {\r\n        this.num_lbl.node.active = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public reset(): void {\r\n    if (this.prop_spr) this.prop_spr.spriteFrame = null;\r\n    if (this.num_lbl) this.num_lbl.string = \"\";\r\n  }\r\n}\r\n\r\nexport { FightPropItem };"]}