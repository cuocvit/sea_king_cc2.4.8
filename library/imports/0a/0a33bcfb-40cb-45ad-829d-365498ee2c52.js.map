{"version":3,"sources":["assets\\guideGift\\scripts\\GuideGift.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { gm } from '../../start-scene/scripts/GameManager';\r\nimport { GameModule } from '../../start-scene/scripts/GameModule';\r\nimport { BANNER_AD_TYPE } from '../../start-scene/scripts/ChannelManager';\r\nimport { ReportData } from '../../start-scene/scripts/NetUtils';\r\nimport { TempData } from '../../start-scene/scripts/TempData';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass GuideGift extends GameModule {\r\n    @property(cc.Button)\r\n    private close_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private video_close_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private get_btn: cc.Button = null;\r\n\r\n    @property(cc.Node)\r\n    private item_lbl_node: cc.Node = null;\r\n\r\n    private readonly _itemIDList: number[];\r\n    private readonly _itemNumList: number[];\r\n\r\n    private constructor() {\r\n        super();\r\n        this._itemIDList = [18003, 35003, 36001, 37003, 18005];\r\n        this._itemNumList = [1, 1, 1, 1, 1];\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        TempData.mainFunShowGuide = true;\r\n        this.initPanel();\r\n        gm.channel.show_banner_ad(BANNER_AD_TYPE.ALL);\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        gm.channel.hide_banner_ad(BANNER_AD_TYPE.ALL);\r\n        gm.ui.mapMainUI.show_guide_gift_entry();\r\n    }\r\n\r\n    private initPanel(): void {\r\n        for (let t = 0; t < this._itemNumList.length; t++) {\r\n            this.item_lbl_node.children[t].getComponent(cc.Label).string = \"x\" + this._itemNumList[t];\r\n        }\r\n    }\r\n\r\n    private editor_on_button_click_handler(event: cc.Event): void {\r\n        if (event.target == this.close_btn.node || event.target == this.video_close_btn.node) {\r\n            gm.ui.async_hide_module(gm.const.GUIDEGIFT);\r\n        } else if (event.target == this.get_btn.node) {\r\n            ReportData.instance.report_once_point(10531);\r\n            ReportData.instance.report_point(10532);\r\n            gm.channel.show_video_ad(this.watch_ad_cb, this);\r\n        }\r\n    }\r\n\r\n    private watch_ad_cb(): void {\r\n        ReportData.instance.report_once_point(10631);\r\n        ReportData.instance.report_point(10632);\r\n        gm.data.mapCell_data.guideGift.guideIsGet = true;\r\n        gm.data.mapCell_data.addWareHouseList(this._itemIDList);\r\n        gm.data.mapCell_data.async_write_data();\r\n        gm.ui.async_hide_module(gm.const.GUIDEGIFT);\r\n        gm.ui.emit(\"guideGiftChange\");\r\n        gm.ui.set_module_args(gm.const.GETREWARDOP.key, {\r\n            idList: this._itemIDList,\r\n            numList: this._itemNumList\r\n        });\r\n        gm.ui.async_show_module(gm.const.GETREWARDOP);\r\n    }\r\n}"]}