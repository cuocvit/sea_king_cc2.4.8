{"version":3,"sources":["assets\\start-scene\\scripts\\GuiderShowTips.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM;AACN,6CAAmC;AAE7B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAa5C;IAA6B,kCAAY;IAAzC;QAAA,qEA8HC;QA5HW,oBAAc,GAAmB,IAAI,CAAC;QAGtC,uBAAiB,GAAuB,IAAI,CAAC;QAG7C,oBAAc,GAAmB,IAAI,CAAC;QAGtC,mBAAa,GAAqB,EAAE,CAAC;QAErC,cAAQ,GAAW,CAAC,CAAC;QACrB,kBAAY,GAA8B;YAC9C,CAAC,EAAE;gBACC,YAAY,EAAE,MAAM;gBACpB,QAAQ,EAAE,CAAC;gBACX,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;gBACtB,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC;gBACvB,OAAO,EAAE,mFAAmF;gBAC5F,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,CAAC;aACd;YACD,CAAC,EAAE;gBACC,YAAY,EAAE,MAAM;gBACpB,QAAQ,EAAE,CAAC;gBACX,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC;gBACvB,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;gBACtB,OAAO,EAAE,8EAA8E;gBACvF,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,CAAC;aACd;YACD,CAAC,EAAE;gBACC,YAAY,EAAE,MAAM;gBACpB,QAAQ,EAAE,CAAC;gBACX,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;gBACtB,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC;gBACvB,OAAO,EAAE,4GAA4G;gBACrH,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,CAAC;aACd;YACD,CAAC,EAAE;gBACC,YAAY,EAAE,MAAM;gBACpB,QAAQ,EAAE,CAAC;gBACX,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC;gBACvB,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;gBACtB,OAAO,EAAE,kEAAkE;gBAC3E,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,CAAC;aACd;YACD,CAAC,EAAE;gBACC,YAAY,EAAE,MAAM;gBACpB,QAAQ,EAAE,CAAC;gBACX,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;gBACtB,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;gBACtB,OAAO,EAAE,gEAAgE;gBACzE,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,CAAC;aACd;SACJ,CAAC;;IAkEN,CAAC;IAhEa,iCAAQ,GAAlB;QACI,IAAI,CAAC,QAAQ,GAAG,gBAAE,CAAC,EAAE,CAAC,eAAe,CAAC,gBAAE,CAAC,KAAK,CAAC,kBAAkB,CAAC,GAAG,CAAW,CAAC;QACjF,IAAI,CAAC,uBAAuB,EAAE,CAAC;IACnC,CAAC;IAEO,gDAAuB,GAA/B;QACI,IAAM,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAC;QAC3C,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QACjD,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;QACrD,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1D,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAC;QAC3C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;QAC3C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;QAC3C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;QAC1C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC;QACvD,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QAC5F,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,GAAG,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAEzD,IAAM,aAAa,GAAG,GAAG,CAAC,QAAQ,CAAC;QACnC,IAAI,aAAa,IAAI,CAAC,EAAE;YACpB,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YAC5F,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;YAC1C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,GAAG,CAAC;YAC9C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;SAC3D;aAAM,IAAI,aAAa,IAAI,CAAC,EAAE;YAC3B,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;YAC1C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;SAC5D;aAAM,IAAI,aAAa,IAAI,CAAC,EAAE;YAC3B,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC;YACvD,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;YAC3C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;YAC3C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;SAC3D;aAAM,IAAI,aAAa,IAAI,CAAC,EAAE;YAC3B,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;YAC1C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;SAC3D;aAAM,IAAI,aAAa,IAAI,CAAC,EAAE;YAC3B,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;YAC3C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;YAC3C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;SAC7D;QAED,IAAM,QAAQ,GAAG,GAAG,CAAC,QAAQ,IAAI,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,oBAAoB,CAAC;QACjF,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,GAAG,CAAC,OAAO,GAAG,cAAc,CAAC;IAC/G,CAAC;IAES,kCAAS,GAAnB,cAA8B,CAAC;IAEvB,qCAAY,GAApB;QACI,gBAAE,CAAC,EAAE,CAAC,iBAAiB,CAAC,gBAAE,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;IACzD,CAAC;IA3HD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0DAC4B;IAG9C;QADC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC;6DAC+B;IAGrD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0DAC4B;IAG9C;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;yDACkB;IAX3C,cAAc;QADnB,OAAO;OACF,cAAc,CA8HnB;IAAD,qBAAC;CA9HD,AA8HC,CA9H4B,EAAE,CAAC,SAAS,GA8HxC;AAED,kBAAe,cAAc,CAAC","file":"","sourceRoot":"/","sourcesContent":["// +-+\r\nimport { gm } from './GameManager';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\ninterface GuideTips {\r\n    roleSkinName: string;\r\n    roleDire: number;\r\n    rolePos: cc.Vec3;\r\n    textPos: cc.Vec3;\r\n    content: string;\r\n    textDire: number;\r\n    txtColor: number\r\n}\r\n\r\n@ccclass\r\nclass GuiderShowTips extends cc.Component {\r\n    @property(cc.Node)\r\n    private guiderRoleNode: cc.Node | null = null;\r\n\r\n    @property(sp.Skeleton)\r\n    private guiderRoleNpcNode: sp.Skeleton | null = null;\r\n\r\n    @property(cc.Node)\r\n    private contentTxtNode: cc.Node | null = null;\r\n\r\n    @property([cc.SpriteFrame])\r\n    private txtBgSprFrame: cc.SpriteFrame[] = [];\r\n\r\n    private curIndex: number = 0;\r\n    private guideTipsArr: Record<number, GuideTips> = {\r\n        1: {\r\n            roleSkinName: \"man5\",\r\n            roleDire: 1,\r\n            rolePos: cc.v3(0, 250),\r\n            textPos: cc.v3(0, -223),\r\n            content: \"Ngọn hải đăng sẽ cho bạn <color=#aa29dc>một thùng gỗ</c> sau một khoảng thời gian\",\r\n            textDire: 0,\r\n            txtColor: 1\r\n        },\r\n        2: {\r\n            roleSkinName: \"man2\",\r\n            roleDire: 1,\r\n            rolePos: cc.v3(0, -100),\r\n            textPos: cc.v3(0, 350),\r\n            content: \"Kích hoạt <color=#aa29dc>cánh tay</c> mới，<color=#aa29dc>tổng hợp</c> chúng!\",\r\n            textDire: 0,\r\n            txtColor: 1\r\n        },\r\n        3: {\r\n            roleSkinName: \"man5\",\r\n            roleDire: 1,\r\n            rolePos: cc.v3(0, 250),\r\n            textPos: cc.v3(0, -223),\r\n            content: \"<color=#aa29dc>Bảo vệ</c> hòn đảo chúng ta，dể ngăn chặn cuộc <color=#aa29dc>tấn công</c> của SeaKing khác！\",\r\n            textDire: 0,\r\n            txtColor: 1\r\n        },\r\n        4: {\r\n            roleSkinName: \"man1\",\r\n            roleDire: 1,\r\n            rolePos: cc.v3(0, -100),\r\n            textPos: cc.v3(0, 350),\r\n            content: \"Chúng ta có thể thu <color=#aa29dc>tiền thuê nhà</c> từ nhà dân!\",\r\n            textDire: 0,\r\n            txtColor: 1\r\n        },\r\n        5: {\r\n            roleSkinName: \"man3\",\r\n            roleDire: 1,\r\n            rolePos: cc.v3(0, 250),\r\n            textPos: cc.v3(0, -60),\r\n            content: \"Nhấp vào ô <color=#aa29dc>màu vàng</c> và chọn vị trí hạ cánh!\",\r\n            textDire: 1,\r\n            txtColor: 1\r\n        }\r\n    };\r\n\r\n    protected onEnable(): void {\r\n        this.curIndex = gm.ui.get_module_args(gm.const.GUIDE_SHOW_TIPS_OP.key) as number;\r\n        this.showMaskPanelWithoutBtn();\r\n    }\r\n\r\n    private showMaskPanelWithoutBtn(): void {\r\n        const tip = this.guideTipsArr[this.curIndex];\r\n        this.guiderRoleNode.position = tip.rolePos;\r\n        this.guiderRoleNpcNode.setSkin(tip.roleSkinName);\r\n        this.guiderRoleNpcNode.addAnimation(0, \"stay\", true);\r\n        this.contentTxtNode.children[0].position = cc.v3(0, 0, 0);\r\n        this.contentTxtNode.position = tip.textPos;\r\n        this.contentTxtNode.children[0].scaleX = 1;\r\n        this.contentTxtNode.children[0].scaleY = 1;\r\n        this.contentTxtNode.children[0].angle = 0;\r\n        this.contentTxtNode.children[0].color = cc.Color.WHITE;\r\n        this.contentTxtNode.children[0].getComponent(cc.Sprite).spriteFrame = this.txtBgSprFrame[0];\r\n        this.guiderRoleNode.scaleX = tip.roleDire === 1 ? -1 : 1;\r\n\r\n        const textDirection = tip.textDire;\r\n        if (textDirection == 0) {\r\n            this.contentTxtNode.children[0].getComponent(cc.Sprite).spriteFrame = this.txtBgSprFrame[1];\r\n            this.contentTxtNode.children[1].angle = 5;\r\n            this.contentTxtNode.children[1].anchorX = 0.5;\r\n            this.contentTxtNode.children[1].anchorY = 0;\r\n            this.contentTxtNode.children[1].position = cc.v3(8, 18);\r\n        } else if (textDirection == 1) {\r\n            this.contentTxtNode.children[1].angle = 5;\r\n            this.contentTxtNode.children[1].anchorX = 0;\r\n            this.contentTxtNode.children[1].anchorY = 1;\r\n            this.contentTxtNode.children[1].position = cc.v3(-19, 0);\r\n        } else if (textDirection == 2) {\r\n            this.contentTxtNode.children[0].scaleX = -1;\r\n            this.contentTxtNode.children[0].color = cc.Color.WHITE;\r\n            this.contentTxtNode.children[0].angle = 10;\r\n            this.contentTxtNode.children[1].angle = 11;\r\n            this.contentTxtNode.children[1].anchorX = 1;\r\n            this.contentTxtNode.children[1].anchorY = 1;\r\n            this.contentTxtNode.children[1].position = cc.v3(15, 3);\r\n        } else if (textDirection == 3) {\r\n            this.contentTxtNode.children[0].scaleX = -1;\r\n            this.contentTxtNode.children[0].scaleY = -1;\r\n            this.contentTxtNode.children[1].anchorX = 1;\r\n            this.contentTxtNode.children[1].anchorY = 0;\r\n            this.contentTxtNode.children[1].angle = 5;\r\n            this.contentTxtNode.children[1].position = cc.v3(21, 0);\r\n        } else if (textDirection == 4) {\r\n            this.contentTxtNode.children[0].scaleY = -1;\r\n            this.contentTxtNode.children[0].angle = 10;\r\n            this.contentTxtNode.children[1].anchorX = 0;\r\n            this.contentTxtNode.children[1].anchorY = 0;\r\n            this.contentTxtNode.children[1].angle = 11;\r\n            this.contentTxtNode.children[1].position = cc.v3(-14, -1);\r\n        }\r\n\r\n        const colorTag = tip.txtColor == 1 ? \"<b><color=#1d3e4c>\" : \"<b><color=#ffffff>\";\r\n        this.contentTxtNode.children[1].getComponent(cc.RichText).string = colorTag + tip.content + \"</color></b>\";\r\n    }\r\n\r\n    protected onDisable(): void { }\r\n\r\n    private onClosePanel(): void {\r\n        gm.ui.async_hide_module(gm.const.GUIDE_SHOW_TIPS_OP);\r\n    }\r\n}\r\n\r\nexport default GuiderShowTips;"]}