{"version":3,"sources":["assets\\start-scene\\scripts\\SuperHero.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// +-+\r\nimport { gm } from './GameManager';\r\nimport { BundleName, HeroTypeEnum } from './Constants';\r\nimport { Utils } from './Utils';\r\nimport { NodePoolItem } from './NodePoolItem';\r\nimport { SkillConfig } from '../../common/configs/skill';\r\nimport { SuperHeroVO } from './MapCellCfgData';\r\nimport { HeroConfig } from '../../common/configs/hero';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass SuperHeroPanel extends cc.Component {\r\n    @property(cc.Label)\r\n    private lblLvl: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private lblName: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private lblDesc: cc.Label | null = null;\r\n\r\n    @property(cc.Node)\r\n    private attrNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private skillNode: cc.Node | null = null;\r\n\r\n    @property(cc.Label)\r\n    private reliveTime: cc.Label | null = null;\r\n\r\n    @property(cc.Node)\r\n    private btnSkillNode: cc.Node | null = null;\r\n\r\n    @property(cc.Label)\r\n    private bottomTips: cc.Label | null = null;\r\n\r\n    @property(cc.Node)\r\n    private heroNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private superHeroHp: cc.Node | null = null;\r\n\r\n    @property(cc.Button)\r\n    private receive_btn: cc.Button | null = null;\r\n\r\n    private _heroCfg: HeroConfig | null = null;\r\n    private _superHeroData: SuperHeroVO | null = null;\r\n    private _heroId: number = 0;\r\n    private _cellId: number = 0;\r\n    private _is_show_receive: boolean = false;\r\n    private _reciveTime: number = 0;\r\n    private _timerContainer: number = 0;\r\n\r\n   protected onEnable(): void {\r\n        const args = gm.ui.get_module_args(gm.const.SUPERHEROOP.key);\r\n        this._heroId = args[0];\r\n        this._cellId = args[1];\r\n        this._is_show_receive = !!args[2];\r\n        this.superHeroHp.active = false;\r\n        this.refreshPanel();\r\n    }\r\n\r\n   protected onDisable(): void {\r\n        gm.pool.put_children(this.heroNode);\r\n    }\r\n\r\n    private  refreshPanel(): void {\r\n        gm.pool.put_children(this.heroNode);\r\n        this._heroCfg = gm.data.config_data.getHeroCfgByID(this._heroId);\r\n        if (!this._heroCfg) return;\r\n        this._reciveTime = 0;\r\n        gm.pool.async_get(BundleName.COMMON, \"prefabs/model/\" + this._heroId, NodePoolItem, (nodePoolItem) => {\r\n            if (this.heroNode?.childrenCount === 0 && nodePoolItem) {\r\n                this.heroNode.addChild(nodePoolItem.node);\r\n                nodePoolItem.node.setPosition(0, 0);\r\n                nodePoolItem.node.scale = 1.5;\r\n                const skeleton = nodePoolItem.getComponent(sp.Skeleton);\r\n                if (skeleton) {\r\n                    skeleton.setSkin(\"front\");\r\n                    skeleton.setAnimation(0, \"stay\", true);\r\n                }\r\n            } else {\r\n                if (nodePoolItem) gm.pool.put(nodePoolItem.node);\r\n            }\r\n        });\r\n\r\n        if (this._heroCfg.hero_type === HeroTypeEnum.SUPER_HERO_TYPE) {\r\n            this.bottomTips.string = \"Có thể sở hữu nhiều anh hùng cùng lúc. Các anh hùng giống nhau có thể hợp nhất , đột phá lên cấp cao hơn!\";\r\n            this._superHeroData = gm.data.mapCell_data.getSuperHeroData(this._heroId, this._cellId);\r\n            if (this._superHeroData) {\r\n                this._reciveTime = this._superHeroData.nextReliveTime - this._superHeroData.curReliveTime;\r\n            }\r\n            this.superHeroHp.active = true;\r\n            this.btnSkillNode.active = true;\r\n        } else {\r\n            this.bottomTips.string = this._heroCfg.occupation === 12 ? \"Hợp nhất để tạo ra nhiều tháp phòng thủ mạnh hơn, nâng cao khả năng bảo vệ!\" : \"Hợp nhất để triệu hồi nhiều Thủy Tinh Linh cấp cao hơn, gia cố lá chắn bảo vệ thành trì!\";\r\n            this._superHeroData = gm.data.mapCell_data.getSuperHeroDataByID(this._heroId, this._cellId);\r\n            this.btnSkillNode.active = false;\r\n        }\r\n\r\n        if (this._is_show_receive) {\r\n            this.receive_btn.node.active = true;\r\n            this.btnSkillNode.active = false;\r\n        } else {\r\n            this.receive_btn.node.active = false;\r\n        }\r\n\r\n        this.lblLvl.string = \"Lv.\" + this._heroCfg.lv;\r\n        this.lblName.string = this._heroCfg.name;\r\n        this.lblDesc.string = \"\" + this._heroCfg.dec;\r\n\r\n        const attributes: number[] = [this._heroCfg.hp, this._heroCfg.attack, this._heroCfg.defense, this._heroCfg.speed];\r\n        for (let i = 0; i < this.attrNode.childrenCount; i++) {\r\n            this.attrNode.children[i].active = attributes[i] > 0;\r\n            if (this.attrNode?.children[i].active) {\r\n                this.attrNode.children[i].children[1].getComponent(cc.Label).string = \"\" + attributes[i];\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < this.skillNode.childrenCount; i++) {\r\n            this.skillNode.children[i].active = false;\r\n            const skillData = gm.config.get_row_data(\"SkillConfigData\", this._heroCfg.skill_id + \"\", (i + 1) + \"\") as SkillConfig;\r\n            if (skillData) {\r\n                this.skillNode.children[i].active = true;\r\n                this.skillNode.children[i].children[0].active = true;\r\n                this.skillNode.children[i].children[0].children[0].getComponent(cc.Label).string =\"Mở khóa cấp \"+ (i + 1);\r\n                this.skillNode.children[i].children[1].getComponent(cc.Label).string = \"\";\r\n                Utils.async_set_sprite_frame(this.skillNode?.children[i].children[2].getComponent(cc.Sprite), BundleName.COMMON, \"res/heroSkill/\" + this._heroCfg.skill_id + \"_\" + (i + 1));\r\n                this.skillNode.children[i].children[2].color = cc.Color.GRAY;\r\n\r\n                if (this._heroCfg.lv > i) {\r\n                    this.skillNode.children[i].children[0].active = false;\r\n                    this.skillNode.children[i].children[1].getComponent(cc.Label).string = \"\" + skillData.desc;\r\n                    this.skillNode.children[i].children[2].color = cc.Color.WHITE;\r\n                }\r\n            }\r\n        }\r\n        this.updateBtnDesc();\r\n    }\r\n\r\n    private updateBtnDesc(): void {\r\n        if (this.btnSkillNode?.active && this._superHeroData) {\r\n            this.btnSkillNode.children[3].getComponent(cc.Label).string = \"(Hồi phục \" + gm.const.SUPERHERORECIVEHP + \" máu mỗi phút)\";\r\n            this.superHeroHp.children[0].children[0].scaleX = Math.min(this._superHeroData.hp / this._superHeroData.maxHp, 1);\r\n            this.superHeroHp.children[1].getComponent(cc.Label).string = this._superHeroData.hp + \"/ \" + this._superHeroData.maxHp;\r\n\r\n            if (this._superHeroData.heroState === 1) {\r\n                this.superHeroHp.active = true;\r\n                this.superHeroHp.children[0].children[0].scaleX = 0;\r\n                this.btnSkillNode.active = true;\r\n                this.btnSkillNode.children[1].getComponent(cc.Label).string = \"Hồi sinh ngay\";\r\n                this.btnSkillNode.children[2].getComponent(cc.Label).string = Utils.format_time_miunte(this._reciveTime);\r\n            } else if (this._superHeroData.hp < this._superHeroData.maxHp) {\r\n                this.superHeroHp.active = true;\r\n                this.btnSkillNode.active = true;\r\n                this.btnSkillNode.children[1].getComponent(cc.Label).string = \"Khôi phục máu\";\r\n                this.btnSkillNode.children[2].getComponent(cc.Label).string = Utils.format_time_miunte(this._reciveTime);\r\n            } else {\r\n                this.btnSkillNode.active = false;\r\n                this.superHeroHp.children[0].children[0].scaleX = 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    public update(deltaTime: number): void {\r\n        if (this._reciveTime > 0) {\r\n            this._timerContainer += deltaTime;\r\n            if (this._timerContainer >= 1) {\r\n                this._timerContainer--;\r\n                this._reciveTime--;\r\n                this.showreLiveTime();\r\n            }\r\n        }\r\n    }\r\n\r\n    private showreLiveTime(): void {\r\n        this.btnSkillNode.children[2].getComponent(cc.Label).string = Utils.format_time_miunte(this._reciveTime);\r\n        if (this._superHeroData?.heroState === 1) {\r\n            if (this._reciveTime <= 0) {\r\n                this._superHeroData = gm.data.mapCell_data.getSuperHeroData(this._heroId, this._cellId);\r\n                this._reciveTime = this._superHeroData.nextReliveTime - this._superHeroData.curReliveTime;\r\n                this.btnSkillNode.active = true;\r\n                this.btnSkillNode.children[1].getComponent(cc.Label).string = \"立即满血\";\r\n            }\r\n            this.btnSkillNode.children[2].getComponent(cc.Label).string = Utils.format_time_miunte(this._reciveTime);\r\n        } else if (this._superHeroData?.heroState == 0 && this._reciveTime <= 0) {\r\n            if (this._superHeroData.hp < this._superHeroData.maxHp) {\r\n                this._superHeroData = gm.data.mapCell_data.getSuperHeroData(this._heroId, this._cellId);\r\n                this._reciveTime = this._superHeroData.nextReliveTime - this._superHeroData.curReliveTime;\r\n                this.btnSkillNode.children[2].getComponent(cc.Label).string = Utils.format_time_miunte(this._reciveTime);\r\n                this.superHeroHp.children[0].children[0].scale = Math.min(this._superHeroData.hp / this._superHeroData.maxHp, 1);\r\n            } else {\r\n                this._reciveTime = 0;\r\n                this.btnSkillNode.active = false;\r\n                this.superHeroHp.children[0].children[0].scale = 1;\r\n            }\r\n            this.superHeroHp.children[1].getComponent(cc.Label).string = this._superHeroData.hp + \"/ \" + this._superHeroData.maxHp;\r\n        }\r\n    }\r\n\r\n    private onWatchAd(): void {\r\n        gm.channel.show_video_ad(this.watchAdCD, this);\r\n    }\r\n\r\n    private watchAdCD(): void {\r\n        if (this._superHeroData && this._superHeroData.heroState == 0) {\r\n            gm.data.mapCell_data.setSuperHeroFullHpByID(this._heroId, this._cellId);\r\n        } else {\r\n            gm.data.mapCell_data.setSuperHeroReliveByID(this._heroId, this._cellId);\r\n        }\r\n        this.refreshPanel();\r\n    }\r\n\r\n    private onClosePanel(): void {\r\n        gm.ui.async_hide_module(gm.const.SUPERHEROOP);\r\n    }\r\n}\r\n\r\nexport default SuperHeroPanel;"]}