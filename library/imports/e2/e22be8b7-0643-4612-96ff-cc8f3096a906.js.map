{"version":3,"sources":["assets\\fight\\scripts\\FightDecorationItem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uEAAsE;AACtE,qEAA2D;AAC3D,iEAAiE;AACjE,yDAAwD;AAIlD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAkC,uCAAY;IAA9C;QAAA,qEAgDC;QA9CS,qBAAe,GAAmB,IAAI,CAAC;QAGvC,oBAAc,GAAqB,IAAI,CAAC;;IA2ClD,CAAC;IAvCC,sBAAW,qCAAI;aAAf;YACE,OAAO,IAAI,CAAC,KAAK,CAAC;QACpB,CAAC;aAED,UAAgB,KAA8B;YAC5C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC;;;OALA;IAOM,yCAAW,GAAlB;QAAA,iBAmBC;QAlBC,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC;YACnD,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,EAAE,CAAC;YACxD,IAAM,gBAAgB,GAAG,gBAAE,CAAC,MAAM,CAAC,YAAY,CAAC,oBAAoB,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,EAAE,CAAmB,CAAC;YACvH,IAAI,gBAAgB,EAAE;gBACpB,IAAI,gBAAgB,CAAC,MAAM,KAAK,EAAE,EAAE;oBAClC,IAAI,IAAI,CAAC,eAAe,CAAC,aAAa,IAAI,CAAC,EAAE;wBAC3C,gBAAE,CAAC,IAAI,CAAC,SAAS,CAAC,sBAAU,CAAC,GAAG,EAAE,gBAAgB,CAAC,MAAM,EAAE,2BAAY,EAAE,UAAC,QAAQ;4BAChF,IAAI,KAAI,CAAC,eAAe,CAAC,aAAa,IAAI,CAAC,EAAE;gCAC3C,KAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;6BAC9C;wBACH,CAAC,CAAC,CAAC;qBACJ;iBACF;qBAAM;oBACL,aAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC,cAAc,EAAE,sBAAU,CAAC,IAAI,EAAE,MAAM,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC;iBACrG;aACF;SACF;IACH,CAAC;IAEM,mCAAK,GAAZ;QACE,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,IAAI,CAAC;QACvC,gBAAE,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IAC7C,CAAC;IAEM,mCAAK,GAAZ;QACE,iBAAM,KAAK,WAAE,CAAC;QACd,IAAI,CAAC,KAAK,EAAE,CAAC;IACf,CAAC;IA7CD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gEAC6B;IAG/C;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;+DAC4B;IAL5C,mBAAmB;QADxB,OAAO;OACF,mBAAmB,CAgDxB;IAAD,0BAAC;CAhDD,AAgDC,CAhDiC,2BAAY,GAgD7C;AAEQ,kDAAmB","file":"","sourceRoot":"/","sourcesContent":["import { NodePoolItem } from '../../start-scene/scripts/NodePoolItem';\r\nimport { gm } from '../../start-scene/scripts/GameManager';\r\nimport { BundleName } from '../../start-scene/scripts/Constants';\r\nimport { Utils } from '../../start-scene/scripts/Utils';\r\nimport { DecorateConfig } from '../../common/configs/decorate';\r\nimport { FightDecorationItemData } from '../../start-scene/scripts/FightTempData';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass FightDecorationItem extends NodePoolItem {\r\n  @property(cc.Node)\r\n  private decoration_node: cc.Node | null = null;\r\n\r\n  @property(cc.Sprite)\r\n  private decoration_spr: cc.Sprite | null = null;\r\n\r\n  private _data: FightDecorationItemData;\r\n\r\n  public get data(): FightDecorationItemData {\r\n    return this._data;\r\n  }\r\n\r\n  public set data(value: FightDecorationItemData) {\r\n    this._data = value;\r\n    this.update_view();\r\n  }\r\n\r\n  public update_view(): void {\r\n    if (this._data) {\r\n      this.decoration_node.x = this._data.plant_x_offset;\r\n      this.decoration_node.y = this._data.plant_y_offset - 48;\r\n      const decorationConfig = gm.config.get_row_data(\"DecorateConfigData\", this._data.decoration_id + \"\") as DecorateConfig;\r\n      if (decorationConfig) {\r\n        if (decorationConfig.animID !== \"\") {\r\n          if (this.decoration_node.childrenCount == 0) {\r\n            gm.pool.async_get(BundleName.MAP, decorationConfig.animID, NodePoolItem, (nodeItem) => {\r\n              if (this.decoration_node.childrenCount == 0) {\r\n                this.decoration_node.addChild(nodeItem.node);\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          Utils.async_set_sprite_frame(this.decoration_spr, BundleName.TEST, \"res/\" + decorationConfig.imgID);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public reset(): void {\r\n    this.decoration_spr.spriteFrame = null;\r\n    gm.pool.put_children(this.decoration_node);\r\n  }\r\n\r\n  public unuse(): void {\r\n    super.unuse();\r\n    this.reset();\r\n  }\r\n}\r\n\r\nexport { FightDecorationItem };"]}