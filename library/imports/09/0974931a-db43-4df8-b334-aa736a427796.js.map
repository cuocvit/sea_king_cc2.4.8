{"version":3,"sources":["assets\\start-scene\\scripts\\FightData.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,6CAA4C;AAC5C,6CAAmC;AAEnC,IAAI;AACJ,IAAY,UAOX;AAPD,WAAY,UAAU;IAClB,2CAAQ,CAAA;IACR,yCAAO,CAAA;IACP,6CAAS,CAAA;IACT,iDAAW,CAAA;IACX,2CAAQ,CAAA;IACR,+CAAU,CAAA;AACd,CAAC,EAPW,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAOrB;AAED,GAAG;AACH;IAA+B,6BAAW;IAQtC,IAAI;IACJ;QAAA,YACI,iBAAO,SAKV;QAJG,KAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,KAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACrB,KAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACrB,KAAI,CAAC,WAAW,GAAG,CAAC,CAAC;;IACzB,CAAC;IAED,KAAK;IACE,mCAAe,GAAtB,UAAuB,QAA8B;QAArD,iBAUC;QATG,iBAAM,eAAe,YAAC,UAAC,IAAS;YAC5B,IAAI,KAAI,CAAC,OAAO,EAAE;gBACd,IAAI,KAAI,CAAC,WAAW,IAAI,IAAI;oBAAE,KAAI,CAAC,WAAW,GAAG,CAAC,CAAC;aACtD;iBAAM;gBACH,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,KAAI,CAAC,gBAAgB,EAAE,CAAC;aAC3B;YACD,IAAI,QAAQ;gBAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,IAAI;IACG,oCAAgB,GAAvB,UAAwB,QAAqB;QACzC,gBAAE,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC;QACxD,iBAAM,gBAAgB,YAAC,QAAQ,CAAC,CAAC;IACrC,CAAC;IAjCa,2BAAiB,GAAW,mBAAmB,CAAC;IAkClE,gBAAC;CAnCD,AAmCC,CAnC8B,yBAAW,GAmCzC;AAnCY,8BAAS;AAqCtB,MAAM","file":"","sourceRoot":"/","sourcesContent":["import { StorageBase } from './StorageBase';\r\nimport { gm } from './GameManager';\r\n\r\n// @\r\nexport enum FightState {\r\n    NONE = 0,\r\n    RUN = 1,\r\n    PAUSE = 2,\r\n    SUCCESS = 3,\r\n    FAIL = 4,\r\n    REVIVE = 5\r\n}\r\n\r\n// \r\nexport class FightData extends StorageBase {\r\n    public static EVENT_DATA_CHANGE: string = \"fight_data_change\";\r\n    //\r\n    public STORAGE_KEY: string;\r\n    public caves_layer: number;\r\n    public speed_scale: number;\r\n    public fight_count: number;\r\n\r\n    // @\r\n    constructor() {\r\n        super();\r\n        this.STORAGE_KEY = \"FightData\";\r\n        this.caves_layer = 1;\r\n        this.speed_scale = 2;\r\n        this.fight_count = 0;\r\n    }\r\n\r\n    // ??\r\n    public async_read_data(callback?: (data: any) => void): void {\r\n        super.async_read_data((data: any) => {\r\n            if (this.is_init) {\r\n                if (this.fight_count == null) this.fight_count = 0;\r\n            } else {\r\n                this.is_init = true;\r\n                this.async_write_data();\r\n            }\r\n            if (callback) callback(data);\r\n        });\r\n    }\r\n\r\n    // @\r\n    public async_write_data(callback?: () => void): void {\r\n        gm.data.event_emitter.emit(FightData.EVENT_DATA_CHANGE);\r\n        super.async_write_data(callback);\r\n    }\r\n}\r\n\r\n///---\r\n"]}