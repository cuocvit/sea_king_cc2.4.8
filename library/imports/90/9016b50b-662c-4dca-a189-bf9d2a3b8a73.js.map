{"version":3,"sources":["assets\\mail\\scripts\\MailLogItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// file này không import ở đâu\r\nimport { gm } from '../../start-scene/scripts/GameManager';\r\nimport { ListView } from '../../start-scene/scripts/ListView';\r\nimport { ListViewItem } from '../../start-scene/scripts/ListViewItem';\r\nimport { MailLogItemData } from '../../start-scene/scripts/MailTempData';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass MailLogItem extends ListViewItem {\r\n    @property(cc.Label)\r\n    private enemy_name_lbl: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private enemy_star_lbl: cc.Label = null;\r\n\r\n    @property(cc.Button)\r\n    private replay_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private revenge_btn: cc.Button = null;\r\n\r\n    @property(ListView)\r\n    private mail_hero_list: ListView = null;\r\n\r\n    @property(ListView)\r\n    private mail_log_reward_list: ListView = null;\r\n\r\n    @property(cc.Label)\r\n    private star_lbl: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private star_change_lbl: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    private result_bg_node: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    private result_lbl: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private reward_lbl: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    private reward_bg_node: cc.Node = null;\r\n\r\n    public _data: MailLogItemData;\r\n\r\n    public get data(): MailLogItemData {\r\n        return this._data;\r\n    }\r\n\r\n    public set data(value: MailLogItemData) {\r\n        this._data = value;\r\n        this.update_view();\r\n    }\r\n\r\n    public update_view(): void {\r\n        this.enemy_name_lbl.string = this._data.target_nickname;\r\n        this.enemy_star_lbl.string = Math.max(0, this._data.target_change_star + this._data.target_star) + \"\";\r\n        this.star_lbl.string = Math.max(0, this._data.star + this._data.change_star) + \"\";\r\n        this.star_change_lbl.string = (0 < this._data.change_star ? \"+\" : \"\") + this._data.change_star;\r\n\r\n        if (\"1\" == this._data.op_type) {\r\n            if (1 == this._data.op_result) {\r\n                this.result_lbl.string = \"Bảo vệ thành công!\";\r\n                this.result_bg_node.color = cc.color().fromHEX(\"#9DD3EA\");\r\n                this.reward_bg_node.color = cc.color().fromHEX(\"#FEE693\");\r\n                this.reward_lbl.string = \"Thưởng\";\r\n                this.mail_log_reward_list.node.active = false;\r\n                this.star_change_lbl.node.color = cc.color().fromHEX(\"#FF0000\");\r\n                this.replay_btn.node.active = false;\r\n                this.revenge_btn.node.active = false;\r\n\r\n            } else {\r\n                this.result_lbl.string = \"Phòng thủ thất bại!\";\r\n                this.result_bg_node.color = cc.color().fromHEX(\"#FF9999\");\r\n                this.reward_bg_node.color = cc.color().fromHEX(\"#cfdce5\");\r\n                this.reward_lbl.string = \"Mất\";\r\n                this.mail_log_reward_list.node.active = false;\r\n                this.mail_log_reward_list.setData(this._data.op_loss_reward);\r\n                this.star_change_lbl.node.color = cc.color().fromHEX(\"#277E27\");\r\n                this.replay_btn.node.active = false;\r\n                this.revenge_btn.node.active = true;\r\n            }\r\n\r\n        } else if (\"2\" == this._data.op_type) {\r\n            if (1 == this._data.op_result) {\r\n                this.result_lbl.string = \"Bạn đã thắng!\";\r\n                this.result_bg_node.color = cc.color().fromHEX(\"#9DD3EA\");\r\n                this.reward_bg_node.color = cc.color().fromHEX(\"#FEE693\");\r\n                this.reward_lbl.string = \"Thưởng \";\r\n                this.mail_log_reward_list.node.active = true;\r\n                this.mail_log_reward_list.setData(this._data.op_reward);\r\n                this.star_change_lbl.node.color = cc.color().fromHEX(\"#FF0000\");\r\n                this.replay_btn.node.active = false;\r\n                this.revenge_btn.node.active = false;\r\n            } else {\r\n                this.result_lbl.string = \"Bạn thất bại!\";\r\n                this.result_bg_node.color = cc.color().fromHEX(\"#FF9999\");\r\n                this.reward_bg_node.color = cc.color().fromHEX(\"#cfdce5\");\r\n                this.reward_lbl.string = \"Mất\";\r\n                this.mail_log_reward_list.node.active = false;\r\n                this.star_change_lbl.node.color = cc.color().fromHEX(\"#277E27\");\r\n                this.replay_btn.node.active = false;\r\n                this.revenge_btn.node.active = true;\r\n            }\r\n        }\r\n        this.mail_hero_list.setData(this._data.target_op_battle);\r\n    }\r\n\r\n    public reset(): void {\r\n        // Reset logic here\r\n    }\r\n\r\n    private editor_on_button_click_handler(event: cc.Event): void {\r\n        if (event.target == this.replay_btn.node) {\r\n            gm.ui.show_notice(\"Hãy chờ cập nhật sau!\");\r\n\r\n        } else if (event.target == this.revenge_btn.node && this._data && \"\" != this._data.target_uid) {\r\n            gm.data.get_rob_record(this._data.target_uid, () => {\r\n                gm.ui.mapMainUI.revenge(this._data.target_uid);\r\n                gm.ui.async_hide_module(gm.const.Mail);\r\n            })\r\n        }\r\n    }\r\n}\r\n"]}