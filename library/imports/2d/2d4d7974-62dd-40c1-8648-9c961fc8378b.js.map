{"version":3,"sources":["assets\\start-scene\\scripts\\Poseidon.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["//\r\nimport { Utils } from './Utils';\r\nimport { BundleName } from './Constants';\r\nimport { gm } from './GameManager';\r\nimport { NodePoolItem } from './NodePoolItem';\r\nimport { BANNER_AD_TYPE } from './ChannelManager';\r\nimport { ReportData } from './NetUtils';\r\nimport { SkillConfig } from '../../common/configs/skill';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass Poseidon extends cc.Component {\r\n    @property(cc.Node)\r\n    private roleNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private skillNode: cc.Node | null = null;\r\n\r\n    @property(cc.Label)\r\n    private lblHeroName: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private lblSkillName: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private lblDesc: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private lblNeedNum: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private lblOwnNum: cc.Label | null = null;\r\n\r\n    @property(cc.ProgressBar)\r\n    private bar: cc.ProgressBar | null = null;\r\n\r\n    @property(cc.Node)\r\n    private btnUpgradeLvl: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private btnUpgrade: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private lockIcon: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private maxNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private handAnim: cc.Node | null = null;\r\n\r\n    @property(cc.Animation)\r\n    private upLvHandAnim: cc.Animation | null = null;\r\n\r\n    private _SkillListCfg: Record<string, SkillConfig[]>;\r\n    private _skillCfg: SkillConfig | null = null;\r\n    private skillIDList: number[] = [];\r\n    private heroIDList: number[] = [];\r\n    private _curIndex: number = 0;\r\n    private lastHeroID: number = 0;\r\n    private needNum: number = 0;\r\n    private POSEIDONNUM: number = 15;\r\n    private POSEIDONID: number = 22001;\r\n    private YELLOWCOLOR: cc.Color = cc.Color.BLACK.fromHEX(\"#FED025\");\r\n\r\n    protected onEnable(): void {\r\n        this.handAnim.active = gm.data.mapCell_data.is_upgrade_skill == 0;\r\n        this.upLvHandAnim.node.active = false;\r\n        gm.data.mapCell_data.is_upgrade_skill = 1;\r\n        gm.data.mapCell_data.async_write_data();\r\n        this.skillIDList = [];\r\n        this._curIndex = 0;\r\n        gm.ui.on(\"update_soul_num\", this.updateSoulNum, this);\r\n        this._SkillListCfg = gm.data.config_data.getSkillList();\r\n        for (let t in this._SkillListCfg) {\r\n            if (gm.data.mapCell_data.getReelUnlcokHeroID(this._SkillListCfg[t][0].heroid)) {\r\n                this.skillIDList.push(parseInt(t));\r\n                this.heroIDList.push(this._SkillListCfg[t][0].heroid);\r\n            }\r\n        }\r\n        this.refreshPanel();\r\n        gm.channel.show_banner_ad(BANNER_AD_TYPE.ALL);\r\n    }\r\n\r\n    private updateSoulNum(): void {\r\n        const getMySoulNum: number = gm.data.mapCell_data.getMySoulNum();\r\n        this.lblOwnNum.string = \"Linh hồn hiện có: \" + getMySoulNum;\r\n    }\r\n\r\n    private refreshPanel(): void {\r\n        const skillID: number = this.skillIDList[this._curIndex];\r\n        const skillData = gm.data.mapCell_data.getRoleSkillData(skillID);\r\n        this._skillCfg = this._SkillListCfg[skillID][skillData.lvl];\r\n\r\n        if (this._skillCfg) {\r\n            if (this.lastHeroID != this._skillCfg.heroid) {\r\n                this.lastHeroID = this._skillCfg.heroid;\r\n\r\n                if (this.roleNode.childrenCount >= 0) {\r\n                    gm.pool.put_children(this.roleNode);\r\n                    gm.pool.async_get(BundleName.COMMON, \"prefabs/model/\" + this._skillCfg.heroid, NodePoolItem, (component) => {\r\n                        if (component) {\r\n                            if (this.roleNode?.childrenCount == 0) {\r\n                                this.roleNode?.addChild(component.node);\r\n                                component.node.setPosition(0, -69, 0);\r\n                                component.node.scale = 1.5;\r\n                                const skeleton = component.getComponent(sp.Skeleton);\r\n                                if (skeleton) {\r\n                                    skeleton.setSkin(\"front\");\r\n                                    skeleton.setAnimation(0, \"stay\", true);\r\n                                }\r\n                            } else {\r\n                                gm.pool.put(component.node);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            this.lblHeroName.string = this._skillCfg.name;\r\n            this.lblSkillName.string = \"lv.\" + skillData.lvl;\r\n            this.lblDesc.string = this._skillCfg.desc;\r\n            this.lockIcon.active = skillData.lvl <= 0;\r\n\r\n            this.lblDesc.node.color = skillData.lvl <= 0 ? cc.Color.GRAY : this.YELLOWCOLOR;\r\n            this.lblSkillName.node.color = skillData.lvl <= 0 ? cc.Color.GRAY : this.YELLOWCOLOR;\r\n\r\n            if (skillData.lvl <= 0) {\r\n                Utils.set_sprite_state(this.skillNode, cc.Sprite.State.GRAY);\r\n            } else {\r\n                Utils.set_sprite_state(this.skillNode, cc.Sprite.State.NORMAL);\r\n            }\r\n\r\n            Utils.async_set_sprite_frame(this.skillNode?.getComponent(cc.Sprite), BundleName.COMMON, \"res/heroSkill/\" + this._skillCfg.icon);\r\n\r\n            this.maxNode.active = this._skillCfg.sea_soul > 0;\r\n            this.needNum = 0;\r\n\r\n            if (this.maxNode?.active) {\r\n                const mySoulNum: number = gm.data.mapCell_data.getMySoulNum();\r\n                this.lblNeedNum.string = \"Linh hồn: \" + skillData.num + \"/\" + this._skillCfg.sea_soul;\r\n                this.bar.progress = skillData.num / this._skillCfg.sea_soul;\r\n                this.lblOwnNum.string = \"Linh hồn hiện có: \" + mySoulNum;\r\n                this.needNum = this._skillCfg.sea_soul - skillData.num;\r\n                this.btnUpgrade.active = false;\r\n                this.btnUpgradeLvl.active = false;\r\n\r\n                if (skillData.num >= this._skillCfg.sea_soul) {\r\n                    this.btnUpgradeLvl.active = true;\r\n                } else {\r\n                    this.btnUpgrade.active = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private onClickUpgradeLvl(): void {\r\n        const skillID: number = this.skillIDList[this._curIndex];\r\n        gm.data.mapCell_data.upgradeRoleSkillData(skillID);\r\n\r\n        const heroID: number = this.heroIDList[this._curIndex];\r\n        const skillData = gm.data.mapCell_data.getRoleSkillData(skillID);\r\n\r\n        if ([31001, 32001, 33001, 34001, 35001, 37001, 38001].includes(heroID)) {\r\n            ReportData.instance.report_once_point(heroID + skillData.lvl - 1);\r\n        }\r\n\r\n        this.upLvHandAnim.node.active = true;\r\n        this.upLvHandAnim?.play();\r\n        this.refreshPanel();\r\n    }\r\n\r\n    private onClickAddSoul(): void {\r\n        if (this.maxNode?.active && gm.data.mapCell_data.getMySoulNum() <= 0) {\r\n            gm.ui.async_show_module(gm.const.GETPOSEIDONOP);\r\n        } else {\r\n            this.upLvHandAnim.node.active = true;\r\n            this.upLvHandAnim?.play();\r\n            gm.data.mapCell_data.addRoleSkillItemData(this.skillIDList[this._curIndex], this.needNum);\r\n            this.handAnim.active = false;\r\n            this.refreshPanel();\r\n        }\r\n    }\r\n\r\n    private onClickLeft(): void {\r\n        this._curIndex = this._curIndex == 0 ? this.skillIDList.length - 1 : this._curIndex - 1;\r\n        this.refreshPanel();\r\n    }\r\n\r\n    private onClickRight(): void {\r\n        this._curIndex = this._curIndex == this.skillIDList.length - 1 ? 0 : this._curIndex + 1;\r\n        this.refreshPanel();\r\n    }\r\n\r\n    private onClickClose(): void {\r\n        gm.ui.async_hide_module(gm.const.POSEIDON);\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        gm.ui.off(\"update_soul_num\", this.updateSoulNum, this);\r\n        gm.channel.hide_banner_ad(BANNER_AD_TYPE.ALL);\r\n    }\r\n}\r\n\r\nexport default Poseidon;"]}