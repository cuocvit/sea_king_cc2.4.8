{"version":3,"sources":["assets\\start-scene\\scripts\\GetCoinOp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// +-+\r\nimport { gm } from \"./GameManager\";\r\nimport { SetItemNumEnum, RewardIdEnum } from \"./Constants\";\r\nimport { BANNER_AD_TYPE } from \"./ChannelManager\";\r\nimport { ReportData } from \"./NetUtils\";\r\nimport { SignEntry } from \"./SignEntry\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass GetCoinOp extends cc.Component {\r\n    @property(cc.Node)\r\n    private coinNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private diamondNode: cc.Node | null = null;\r\n\r\n    @property(cc.Label)\r\n    private titleLbl: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private coinLbl: cc.Label | null = null;\r\n\r\n    private _isGem: boolean = false;\r\n    private _gemNum: number = 399;\r\n    private _coinNum: number = 10000;\r\n    private _curNum: number = 0;\r\n\r\n    protected onEnable(): void {\r\n        this._isGem = !!gm.ui.get_module_args(gm.const.GETCOINOP.key);\r\n        this._curNum = this._isGem ? this._gemNum : this._coinNum;\r\n        this.titleLbl.string = this._isGem\r\n            ? \"Ưu đãi Kim Cương khi mua\"\r\n            : \"Ưu đãi Vàng khi mua\";\r\n        this.coinNode.active = !this._isGem;\r\n        this.diamondNode.active = this._isGem;\r\n        this.coinLbl.string = this._curNum.toString();\r\n        gm.channel.report_event(\"ohayoo_game_button_show\", {\r\n            ad_type: \"激励视频\",\r\n            rit_id: \"946114114\",\r\n            ad_position: \"道具_\" + (this._isGem ? \"钻石不足！\" : \"金币不足！\"),\r\n            ad_position_type: \"道具\",\r\n        });\r\n        gm.channel.show_banner_ad(BANNER_AD_TYPE.ALL);\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        gm.channel.hide_banner_ad(BANNER_AD_TYPE.ALL);\r\n    }\r\n\r\n    private onClickWatchAD(): void {\r\n        // if (this._isGem) {\r\n        //     ReportData.instance.report_once_point(10521);\r\n        //     ReportData.instance.report_point(10522);\r\n        // } else {\r\n        //     ReportData.instance.report_once_point(10523);\r\n        //     ReportData.instance.report_point(10524);\r\n        // }\r\n        // gm.channel.report_event(\"ohayoo_game_button_click\", {\r\n        //     ad_type: \"激励视频\",\r\n        //     rit_id: \"946114114\",\r\n        //     ad_position: \"道具_\" + (this._isGem ? \"钻石不足！\" : \"金币不足！\"),\r\n        //     ad_position_type: \"道具\"\r\n        // });\r\n        // gm.channel.show_video_ad(this.watchAdSucc, this, {\r\n        //     ad_position: \"道具_\" + (this._isGem ? \"钻石不足！\" : \"金币不足！\"),\r\n        //     ad_position_type: \"道具\"\r\n        // });\r\n    }\r\n\r\n    private buyGem() {\r\n        gm.ui.show_panel(gm.const.Buy);\r\n        this.onClosePanel();\r\n    }\r\n\r\n    private watchAdSucc(): void {\r\n        if (this._isGem) {\r\n            ReportData.instance.report_once_point(10621);\r\n            ReportData.instance.report_point(10622);\r\n            gm.data.mapCell_data.setAddGameDiamond(\r\n                SetItemNumEnum.ADD_ITEM_TYPE,\r\n                this._curNum\r\n            );\r\n            gm.ui.show_coin_fly(\r\n                RewardIdEnum.DIAMOND,\r\n                this.node.convertToWorldSpaceAR(cc.Vec3.ZERO)\r\n            );\r\n        } else {\r\n            ReportData.instance.report_once_point(10623);\r\n            ReportData.instance.report_point(10624);\r\n            gm.data.mapCell_data.setAddGameCoin(\r\n                SetItemNumEnum.ADD_ITEM_TYPE,\r\n                this._curNum\r\n            );\r\n            gm.ui.show_coin_fly(\r\n                RewardIdEnum.GOLD,\r\n                this.node.convertToWorldSpaceAR(cc.Vec3.ZERO)\r\n            );\r\n        }\r\n        this.onClosePanel();\r\n    }\r\n\r\n    private onClosePanel(): void {\r\n        gm.ui.async_hide_module(gm.const.GETCOINOP);\r\n    }\r\n}\r\n\r\nexport default GetCoinOp;\r\n"]}