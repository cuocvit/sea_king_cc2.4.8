{"version":3,"sources":["assets\\special_build\\scripts\\StoreDaily.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ListViewItem } from '../../start-scene/scripts/ListViewItem';\r\nimport { Utils } from '../../start-scene/scripts/Utils';\r\nimport { ReportData } from '../../start-scene/scripts/NetUtils';\r\nimport { gm } from '../../start-scene/scripts/GameManager';\r\nimport { BundleName, RewardIdEnum } from '../../start-scene/scripts/Constants';\r\nimport { ShopConfig } from '../../common/configs/shop';\r\nimport { HeroConfig } from '../../common/configs/hero';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass StoreDaily extends ListViewItem {\r\n    @property(cc.Button)\r\n    private btn_add: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private btn_free: cc.Button = null;\r\n\r\n    @property(cc.Node)\r\n    private btn_sold: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    private price_lbl: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private count_lbl: cc.Label = null;\r\n\r\n    @property(cc.Sprite)\r\n    private icon_sprite: cc.Sprite = null;\r\n\r\n    @property(cc.Sprite)\r\n    private cost_sprite: cc.Sprite = null;\r\n\r\n    @property(cc.Sprite)\r\n    private lvl_sprite: cc.Sprite = null;\r\n\r\n    @property(cc.Label)\r\n    private item_count_lbl: cc.Label = null;\r\n\r\n    public _data: { id: number; index: number };\r\n    public get data(): { id: number; index: number } {\r\n        return this._data;\r\n    }\r\n\r\n    public set data(value: { id: number; index: number }) {\r\n        this._data = value;\r\n        this.update_view();\r\n    }\r\n\r\n    public update_view(): void {\r\n        this.node.active = false;\r\n        this.scheduleOnce(() => {\r\n            this.node.active = true;\r\n        }, 0.1 * this._data.index);\r\n\r\n        const rowData = gm.config.get_row_data(\"ShopConfigData\", this._data.id.toString()) as ShopConfig;\r\n        this.item_count_lbl.string = \"\";\r\n        if (rowData.item_num > 1) {\r\n            this.item_count_lbl.string = \"x\" + rowData.item_num;\r\n        }\r\n\r\n        let itemData: HeroConfig;\r\n        if (rowData.item_id > 30000) {\r\n            itemData = gm.config.get_row_data(\"HeroConfigData\", rowData.item_id.toString()) as HeroConfig;\r\n            this.lvl_sprite.node.active = true;\r\n            Utils.async_set_sprite_frame(this.lvl_sprite, BundleName.SPECIAL_BUILD, \"res/\" + itemData.lv);\r\n            Utils.async_set_sprite_frame(this.icon_sprite, BundleName.COMMON, \"res/handbook/\" + itemData.icon);\r\n        } else {\r\n            itemData = gm.config.get_row_data(\"ItemConfigData\", rowData.item_id.toString()) as HeroConfig;\r\n            Utils.async_set_sprite_frame(this.icon_sprite, BundleName.COMMON, \"res/handbook/\" + itemData.icon);\r\n            this.lvl_sprite.node.active = false;\r\n        }\r\n\r\n        let count: number = 0;\r\n        if (rowData.shop_type < 100) {\r\n            count = gm.data.store_data.getStoreCount(rowData.shop_id);\r\n        } else if (rowData.shop_type < 200) {\r\n            count = gm.data.store_data.getDailyStoreCount(rowData.shop_id);\r\n        } else if (rowData.shop_type < 300) {\r\n            count = gm.data.store_data.getVideoStoreCount(rowData.shop_id);\r\n        } else if (rowData.shop_type < 400) {\r\n            count = gm.data.store_data.getDimondStoreCount(rowData.shop_id);\r\n        }\r\n\r\n        this.count_lbl.string = rowData.limit_num - count + \"/\" + rowData.limit_num;\r\n        if (count >= rowData.limit_num) {\r\n            this.btn_sold.active = true;\r\n            this.btn_free.node.active = false;\r\n            this.btn_add.node.active = false;\r\n            if (rowData.money_type > 0 && rowData.money_type === 1) {\r\n                gm.channel.report_event(\"ohayoo_game_button_show\", {\r\n                    ad_type: \"激励视频\",\r\n                    rit_id: \"946114114\",\r\n                    ad_position: \"商店_获得道具\",\r\n                    ad_position_type: \"商店\"\r\n                });\r\n            }\r\n        } else {\r\n            this.btn_sold.active = false;\r\n            if (rowData.money_type > 0) {\r\n                this.btn_free.node.active = false;\r\n                this.btn_add.node.active = true;\r\n                this.price_lbl.string = rowData.price.toString();\r\n                this.cost_sprite.node.color = cc.Color.WHITE;\r\n                this.cost_sprite.node.height = 50;\r\n                this.cost_sprite.node.width = 50;\r\n                this.price_lbl.node.getComponent(cc.LabelOutline).enabled = true;\r\n                this.price_lbl.node.color = cc.Color.BLACK.fromHEX(\"#FFDA58\");\r\n                this.price_lbl.node.getComponent(cc.LabelOutline).color = cc.Color.BLACK.fromHEX(\"#7D2713\");\r\n\r\n                if (rowData.money_type === 1) {\r\n                    this.price_lbl.string = \"Miễn phí\";\r\n                    this.cost_sprite.node.color = cc.Color.BLACK.fromHEX(\"#253D45\");\r\n                    this.cost_sprite.node.width = 40;\r\n                    this.cost_sprite.node.height = 30;\r\n                    this.price_lbl.node.color = cc.Color.BLACK.fromHEX(\"#1C3F00\");\r\n                    this.price_lbl.node.getComponent(cc.LabelOutline).enabled = false;\r\n                    this.price_lbl.node.position =new  cc.Vec3(5,8,0);\r\n                    this.price_lbl.fontSize = 27;\r\n                    Utils.async_set_sprite_frame(this.cost_sprite, BundleName.COMMON, \"res/handbook/video_\" + rowData.money_type);\r\n                } else {\r\n                    Utils.async_set_sprite_frame(this.cost_sprite, BundleName.COMMON, \"res/handbook/\" + rowData.money_type);\r\n                }\r\n            } else {\r\n                this.btn_free.node.active = true;\r\n                this.btn_add.node.active = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        this.unscheduleAllCallbacks();\r\n    }\r\n\r\n    private watchAdSucc(): void {\r\n        if (this._data) {\r\n            ReportData.instance.report_once_point(10625);\r\n            ReportData.instance.report_point(10626);\r\n            gm.audio.play_effect(gm.const.AUDIO_12_BUY_SUCCESS);\r\n\r\n            const rowData = gm.config.get_row_data(\"ShopConfigData\", this._data.id.toString()) as ShopConfig;\r\n            for (let i = 0; i < gm.data.store_data.video_store_array.length; i++) {\r\n                if (rowData.shop_id === gm.data.store_data.video_store_array[i].id) {\r\n                    gm.data.mapCell_data.addItem(rowData.item_id, rowData.item_num);\r\n                    gm.data.store_data.updateVideoStore(rowData.shop_id, 1, 0);\r\n                    gm.data.store_data.async_write_data();\r\n                    gm.ui.set_module_args(gm.const.GETREWARDOP.key, {\r\n                        idList: [rowData.item_id],\r\n                        numList: [rowData.item_num]\r\n                    });\r\n                    gm.ui.async_show_module(gm.const.GETREWARDOP);\r\n                    break;\r\n                }\r\n            }\r\n            this.update_view();\r\n        }\r\n    }\r\n\r\n    private onClick(): void {\r\n        if (gm.data.mapCell_data.getIsHaveSpeceCellID()) {\r\n            const rowData = gm.config.get_row_data(\"ShopConfigData\", this._data.id.toString()) as ShopConfig;\r\n            let count: number = 0;\r\n\r\n            if (rowData.shop_type < 100) {\r\n                count = gm.data.store_data.getStoreCount(rowData.shop_id);\r\n            } else if (rowData.shop_type < 200) {\r\n                count = gm.data.store_data.getDailyStoreCount(rowData.shop_id);\r\n            } else if (rowData.shop_type < 300) {\r\n                count = gm.data.store_data.getVideoStoreCount(rowData.shop_id);\r\n            } else if (rowData.shop_type < 400) {\r\n                count = gm.data.store_data.getDimondStoreCount(rowData.shop_id);\r\n            }\r\n\r\n            if (count >= rowData.limit_num) {\r\n                gm.ui.show_notice(\"Sản phẩm đã bán hết. Bạn có thể mua lại sau khi làm mới.\");\r\n            } else {\r\n                if (rowData.money_type > 0) {\r\n                    if (rowData.money_type === 1) {\r\n                        ReportData.instance.report_once_point(10525);\r\n                        ReportData.instance.report_point(10526);\r\n                        gm.channel.report_event(\"ohayoo_game_button_click\", {\r\n                            ad_type: \"激励视频\",\r\n                            rit_id: \"946114114\",\r\n                            ad_position: \"商店_获得道具\",\r\n                            ad_position_type: \"商店\"\r\n                        });\r\n                        gm.channel.show_video_ad(this.watchAdSucc, this, {\r\n                            ad_position: \"商店_获得道具\",\r\n                            ad_position_type: \"商店\"\r\n                        });\r\n                        return;\r\n                    }\r\n                    if (gm.data.mapCell_data.getMertrailIDCount(rowData.money_type) < rowData.price) {\r\n                        gm.ui.show_notice(\"Vật liệu không đủ\");\r\n                        return;\r\n                    }\r\n                    gm.data.mapCell_data.delCellItem(rowData.money_type, rowData.price);\r\n                    if (rowData.money_type === RewardIdEnum.WOOD) {\r\n                        gm.audio.play_effect(gm.const.AUDIO_13_WOOD_BUY_ITEM);\r\n                    } else if (rowData.money_type === RewardIdEnum.DIAMOND) {\r\n                        gm.audio.play_effect(gm.const.AUDIO_14_DIAMOND_BUY_ITEM);\r\n                    } else {\r\n                        gm.audio.play_effect(gm.const.AUDIO_16_BUY_ITEM);\r\n                    }\r\n                } else {\r\n                    gm.data.store_data.isFree = false;\r\n                    gm.ui.emit(\"refresh_red_tips_stall\");\r\n                }\r\n                gm.data.mapCell_data.addItem(rowData.item_id, rowData.item_num);\r\n                gm.ui.set_module_args(gm.const.GETREWARDOP.key, {\r\n                    idList: [rowData.item_id],\r\n                    numList: [rowData.item_num]\r\n                });\r\n                gm.ui.async_show_module(gm.const.GETREWARDOP);\r\n                if (rowData.shop_type < 100) {\r\n                    gm.data.store_data.updateStore(rowData.shop_id, 1);\r\n                } else if (rowData.shop_type < 200) {\r\n                    gm.data.store_data.updateDailyStore(rowData.shop_id, 1);\r\n                } else if (rowData.shop_type < 300 || rowData.shop_type < 400) {\r\n                    gm.data.store_data.updateDiamondStore(rowData.shop_id, 1);\r\n                }\r\n                this.update_view();\r\n            }\r\n        } else {\r\n            gm.ui.show_auto_merge_message();\r\n        }\r\n    }\r\n}"]}