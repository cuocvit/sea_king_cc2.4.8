{"version":3,"sources":["assets\\test\\scripts\\LandRes.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Utils } from \"../../start-scene/scripts/Utils\";\r\nimport MapEditor from \"./MapEditor\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass LandRes extends cc.Component {\r\n    @property(cc.Label)\r\n    private lblTxt: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    private landNode: cc.Node = null;\r\n\r\n    @property(cc.Sprite)\r\n    private landSpr: cc.Sprite = null;\r\n\r\n    @property(cc.Node)\r\n    private treeparentNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private treeNode: cc.Node = null;\r\n\r\n    @property([cc.Prefab])\r\n    private animNodeList: cc.Prefab[] = [];\r\n\r\n    private _curIndex: number = 0;\r\n    private _cb: ((index: number) => void) | null = null;\r\n    private _cbtarget: MapEditor = null;\r\n    private _treeAnim: number[] = [0.5, 0.5, 0.5, 0.5, 0.5, 0.4, 0.5, 0.3, 0.3, 0.3, 0.3];\r\n\r\n    public initData(index: number, currentIndex: number, callback: (index: number) => void, callbackTarget?: MapEditor): void {\r\n        this._curIndex = currentIndex;\r\n        this._cb = callback;\r\n        this._cbtarget = callbackTarget;\r\n        this.landNode.active = false;\r\n        this.treeparentNode.active = false;\r\n        if (0 == index) {\r\n            (this.landNode.active = !0,\r\n                Utils.async_set_sprite_frame(this.landSpr, c.BundleName.TEST, \"res/\" + this._curIndex))\r\n        } else {\r\n            this.treeparentNode.active = true;\r\n            this.treeNode.removeAllChildren();\r\n            this.treeNode.getComponent(cc.Sprite).spriteFrame = null;\r\n            if (100 < this._curIndex) {\r\n                if (142 <= this._curIndex) {\r\n                    if (0 == this.treeNode.childrenCount) {\r\n                        this.treeNode.addChild(cc.instantiate(this.animNodeList[this._curIndex - 142]));\r\n                        this.treeNode.children[0].scale = this._treeAnim[this._curIndex - 142];\r\n                        this.treeNode.children[0].y = 143 == this._curIndex || 144 == this._curIndex || 147 == this._curIndex ? -10 : 0;\r\n\r\n                        if (149 <= this._curIndex) {\r\n                            this.treeNode.children[0].y = -13;\r\n                        }\r\n                    }\r\n                } else {\r\n                    Utils.async_set_sprite_frame(this.treeNode.getComponent(cc.Sprite), c.BundleName.TEST, \"res/item\" + this._curIndex % 100)\r\n                }\r\n            }\r\n        }\r\n        this.lblTxt.string = \"\" + this._curIndex;\r\n        this.setSelectColor();\r\n    }\r\n\r\n    public setSelectColor(isSelect: boolean = false): void {\r\n        this.node.color = isSelect ? cc.Color.RED : cc.Color.GRAY;\r\n        this.lblTxt.node.color = isSelect ? cc.Color.RED : cc.Color.BLACK;\r\n    }\r\n\r\n    private onClick(): void {\r\n        if (this._cb) {\r\n            this._cb(this._curIndex >= 100 ? this._curIndex % 100 : this._curIndex);\r\n            this.setSelectColor(true);\r\n        }\r\n    }\r\n}\r\n\r\nexport default LandRes;"]}