{"version":3,"sources":["assets\\book\\scripts\\SceneHeroDetailView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GameModule } from '../../start-scene/scripts/GameModule';\r\nimport { Constants, BundleName } from '../../start-scene/scripts/Constants';\r\nimport { gm } from '../../start-scene/scripts/GameManager';\r\nimport { NodePoolItem } from '../../start-scene/scripts/NodePoolItem';\r\nimport { Utils } from '../../start-scene/scripts/Utils';\r\nimport SceneBookLogic from './SceneBookLogic';\r\nimport { BookConfig } from '../../common/configs/books';\r\nimport { HeroConfig } from '../../common/configs/hero';\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass SceneHeroDetailView extends GameModule {\r\n    @property(cc.Node)\r\n    private btn_left: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private btn_right: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private node_root: cc.Node = null;\r\n\r\n    @property({ type: [cc.Node] })\r\n    private pos_heros: cc.Node[] = [];\r\n\r\n    @property(cc.Sprite)\r\n    private icon: cc.Sprite = null;\r\n\r\n    @property({ type: [cc.Node] })\r\n    private dots: cc.Node[] = [];\r\n\r\n    @property({ type: [cc.Node] })\r\n    private lvs: cc.Node[] = [];\r\n\r\n    @property(cc.Label)\r\n    private lab_name: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private lab_defense: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private lab_attack: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private lab_hp: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private lab_range: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private lab_speed: cc.Label = null;\r\n\r\n    @property(cc.RichText)\r\n    private lab_defense_star: cc.RichText = null;\r\n\r\n    @property(cc.RichText)\r\n    private lab_attack_star: cc.RichText = null;\r\n\r\n    @property(cc.RichText)\r\n    private lab_hp_star: cc.RichText = null;\r\n\r\n    @property({ type: [cc.Sprite] })\r\n    private icon_occupations: cc.Sprite[] = [];\r\n\r\n    private BG_COLOR: cc.Color[];\r\n    private tItemId: number[];\r\n    private tHeros: NodePoolItem[];\r\n    private bIsSwitching: boolean;\r\n    private iCurIndex: number;\r\n    private colorDotBlack: cc.Color;\r\n    private tOccupationIds: { [key: number]: number[] } | null;\r\n    private bIsIcon: boolean;\r\n    private sSkin: string | null;\r\n    private sAni: string | null;\r\n\r\n    private constructor() {\r\n        super();\r\n        this.BG_COLOR = [new cc.Color(91, 209, 97, 255), new cc.Color(23, 203, 254, 255), new cc.Color(251, 192, 0, 255), new cc.Color(195, 90, 252, 252)]\r\n        this.tItemId = null;\r\n        this.tHeros = [];\r\n        this.bIsSwitching = false;\r\n        this.iCurIndex = 0;\r\n        this.colorDotBlack = new cc.Color(9, 66, 85, 255);\r\n        this.tOccupationIds = null;\r\n        this.bIsIcon = false;\r\n        this.sSkin = null;\r\n        this.sAni = null;\r\n    }\r\n\r\n    protected onLoad(): void { }\r\n\r\n    protected onEnable(): void {\r\n        this.recyleHeros();\r\n        if (this.tOccupationIds == null) {\r\n            this.tOccupationIds = {};\r\n            this.tOccupationIds[1] = [1];\r\n            this.tOccupationIds[2] = [2];\r\n            this.tOccupationIds[3] = [3];\r\n            this.tOccupationIds[4] = [1, 3];\r\n            this.tOccupationIds[5] = [2, 3];\r\n        }\r\n        this.iCurIndex = 0;\r\n        this.icon.node.x = 0;\r\n        this.icon.spriteFrame = null;\r\n        this.tItemId = gm.ui.get_module_args(Constants._instance.BOOK_HERO_DETAIL.key) as number[];\r\n        this.loadHero();\r\n        this.refreshBtnArrow();\r\n        this.refreshAttr();\r\n    }\r\n\r\n    private loadHero(): void {\r\n        const self = this;\r\n        const bookConfig = gm.config.get_row_data(\"BookConfigData\", this.tItemId[0].toString()) as BookConfig;\r\n\r\n        this.sAni = bookConfig.animation;\r\n        this.sSkin = bookConfig.skin == \"default\" ? null : bookConfig.skin;\r\n\r\n        this.node_root.color = this.BG_COLOR[bookConfig.color - 1];\r\n        this.bIsIcon = bookConfig.is_model !== 1;\r\n\r\n        if (this.bIsIcon) {\r\n            Utils.async_set_sprite_frame(this.icon, BundleName.COMMON, \"res/handbook/\" + bookConfig.icon);\r\n            const isUnlocked = this.checkIsUnlock(bookConfig.id);\r\n            this.icon.node.color = isUnlocked ? cc.Color.WHITE : cc.Color.BLACK;\r\n            this.icon.node.opacity = isUnlocked ? 255 : 171;\r\n        } else {\r\n            for (let index = 0; index < this.tItemId.length; index++) {\r\n                (function (i: number) {\r\n                    const currentItemId = self.tItemId[i];\r\n                    const heroConfig = gm.config.get_row_data(\"HeroConfigData\", currentItemId.toString()) as HeroConfig;\r\n\r\n                    gm.pool.async_get(BundleName.COMMON, \"prefabs/model/\" + heroConfig.heroid, NodePoolItem, (nodeItem) => {\r\n                        self.tHeros.push(nodeItem);\r\n                        nodeItem.node.scale = bookConfig.model_scale;\r\n                        nodeItem.node.y = bookConfig.offset_y;\r\n\r\n                        const isUnlocked = self.checkIsUnlock(currentItemId);\r\n                        const spine = self.getSpine(nodeItem);\r\n                        if (spine != null) {\r\n                            spine.node.color = isUnlocked ? cc.Color.WHITE : cc.Color.BLACK;\r\n                        }\r\n\r\n                        self.pos_heros[i].addChild(nodeItem.node);\r\n                        self.refreshHeroAni();\r\n                    });\r\n                })(index);\r\n            }\r\n            this.pos_heros[0].parent.x = -339.121;\r\n        }\r\n    }\r\n\r\n    private checkIsUnlock(num: number): boolean {\r\n        return gm.data.mapCell_data.checkBookItemIsUnlock(num);\r\n    }\r\n\r\n    private refreshAttr(): void {\r\n        const currentItemId = this.tItemId[this.iCurIndex];\r\n        const heroConfig = gm.config.get_row_data(\"HeroConfigData\", currentItemId.toString()) as HeroConfig;\r\n        const bookConfig = gm.config.get_row_data(\"BookConfigData\", currentItemId.toString()) as BookConfig;\r\n        const isUnlocked = this.checkIsUnlock(currentItemId);\r\n\r\n        this.lab_speed.node.parent.active = bookConfig.sub_type == SceneBookLogic.SUB_TYPE_HERO || bookConfig.sub_type == SceneBookLogic.SUB_TYPE_SUPER_HERO;\r\n\r\n        this.lab_attack.string = heroConfig.attack.toString();\r\n        this.lab_defense.string = heroConfig.defense.toString();\r\n        this.lab_hp.string = heroConfig.hp.toString();\r\n        this.lab_range.string = heroConfig.range.toString();\r\n        this.lab_speed.string = heroConfig.speed.toString();\r\n        this.lab_name.string = isUnlocked ? heroConfig.name : \"\";\r\n        this.lab_defense_star.string = \"\";\r\n        this.lab_attack_star.string = \"\";\r\n        this.lab_hp_star.string = \"\";\r\n\r\n        const starData = gm.data.hero_star_data.getHeroStarData(heroConfig.arms);\r\n        if (starData) {\r\n            this.lab_defense_star.string = `<b><color=#000000>（Phòng thủ +</color><color=#128400>${Math.floor(heroConfig.defense * starData.defense)}）</color>`;\r\n            this.lab_attack_star.string = `<b><color=#000000>(Tấn công +</color><color=#128400>${Math.floor(heroConfig.attack * starData.attack)}）</color>`;\r\n            this.lab_hp_star.string = `<b><color=#000000>（Sinh mạng +</color><color=#128400>${starData.hp}）</color>`;\r\n        }\r\n\r\n        this.lvs[0].parent.active = this.tItemId.length > 1;\r\n        this.dots[0].parent.active = this.tItemId.length > 1;\r\n\r\n        if (this.tItemId.length > 1) {\r\n            for (let i = 0; i < this.lvs.length; i++) {\r\n                this.lvs[i].active = i == this.iCurIndex;\r\n            }\r\n            for (let i = 0; i < this.dots.length; i++) {\r\n                this.dots[i].active = i < this.tItemId.length;\r\n                this.dots[i].color = i == this.iCurIndex ? cc.Color.WHITE : this.colorDotBlack;\r\n            }\r\n        }\r\n\r\n        const occupationIds = this.tOccupationIds[heroConfig.occupation];\r\n        if (this.icon_occupations[0].node.parent.parent.active = occupationIds != null) {\r\n            if (occupationIds != null) {\r\n                for (let i = 0; i < 2; i++) {\r\n                    const occupationIcon = this.icon_occupations[i];\r\n                    occupationIcon.node.active = occupationIds[i] != null;\r\n                    if (occupationIds[i] != null) {\r\n                        Utils.async_set_sprite_frame(occupationIcon, BundleName.COMMON, \"res/occupation/\" + occupationIds[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private getSpine(nodePoolItem: NodePoolItem): sp.Skeleton | null {\r\n        const skeletonComponent = nodePoolItem.getComponent(sp.Skeleton);\r\n        return skeletonComponent == null ? nodePoolItem.getComponentInChildren(sp.Skeleton) : skeletonComponent;\r\n    }\r\n\r\n    private recyleHeros(): void {\r\n        for (let heroIndex = 0; heroIndex < this.tHeros.length; heroIndex++) {\r\n            const heroID = this.tHeros[heroIndex];\r\n            const spineInstance = this.getSpine(heroID);\r\n\r\n            if (spineInstance != null) {\r\n                spineInstance.node.color = cc.Color.WHITE;\r\n            }\r\n\r\n            gm.pool.put(heroID.node);\r\n        }\r\n\r\n        this.tHeros = [];\r\n    }\r\n\r\n    private refreshHeroAni(): void {\r\n        for (let heroIndex = 0; heroIndex < this.tHeros.length; heroIndex++) {\r\n            const heroID = this.tHeros[heroIndex];\r\n            const spineInstance = this.getSpine(heroID);\r\n\r\n            if (spineInstance != null) {\r\n                spineInstance.setToSetupPose();\r\n\r\n                let animationName = \"stay\";\r\n                let skinName = \"front\";\r\n\r\n                if (this.sAni !== \"\") {\r\n                    animationName = this.sAni;\r\n                    skinName = this.sSkin;\r\n                }\r\n\r\n                if (skinName != null) {\r\n                    spineInstance.setSkin(skinName);\r\n                }\r\n                spineInstance.setAnimation(0, animationName, true);\r\n                spineInstance.animation = animationName;\r\n            }\r\n        }\r\n    }\r\n\r\n    private scrollTo(isNext: boolean): void {\r\n        let targetX: number, resetX: number;\r\n        const self = this;\r\n\r\n        if (this.bIsIcon) {\r\n            if (this.tItemId[this.iCurIndex] != null) {\r\n                this.bIsSwitching = true;\r\n                targetX = isNext ? this.node_root.width : -1 * this.node_root.width;\r\n                resetX = isNext ? -1 * this.node_root.width : this.node_root.width;\r\n\r\n                cc.tween(this.icon.node).to(0.08, { x: targetX }).call(function () {\r\n                    self.icon.node.x = resetX;\r\n                    const bookData = gm.config.get_row_data(\"BookConfigData\", self.tItemId[self.iCurIndex].toString()) as BookConfig;\r\n                    Utils.async_set_sprite_frame(self.icon, BundleName.COMMON, \"res/handbook/\" + bookData.icon);\r\n\r\n                    const isUnlocked = self.checkIsUnlock(bookData.id);\r\n                    self.icon.node.color = isUnlocked ? cc.Color.WHITE : cc.Color.BLACK;\r\n                    self.icon.node.opacity = isUnlocked ? 255 : 171;\r\n\r\n                    cc.tween(self.icon.node).to(0.08, { x: 0 }).call(function () {\r\n                        self.bIsSwitching = false;\r\n                    }).start();\r\n                }).start();\r\n            }\r\n        } else {\r\n            const heroParentNode = this.pos_heros[0].parent;\r\n            targetX = isNext ? this.node_root.width : -1 * this.node_root.width;\r\n            targetX += heroParentNode.x;\r\n            this.bIsSwitching = true;\r\n\r\n            this.refreshHeroAni();\r\n\r\n            cc.tween(heroParentNode).to(0.1, { x: targetX }).call(function () {\r\n                self.bIsSwitching = false;\r\n            }).start();\r\n        }\r\n    }\r\n\r\n    private refreshBtnArrow(): void {\r\n        this.btn_left.active = this.tItemId[this.iCurIndex - 1] != null;\r\n        this.btn_right.active = this.tItemId[this.iCurIndex + 1] != null;\r\n    }\r\n\r\n    private editor_on_button_click_handler(buttonNode: cc.Event, additionalData: string | null = null): void {\r\n        switch (buttonNode.target.name) {\r\n            case \"btn_close\":\r\n                gm.ui.async_hide_module(Constants._instance.BOOK_HERO_DETAIL);\r\n                break;\r\n            case \"btn_arrow_L\":\r\n                if (this.bIsSwitching) return;\r\n                this.iCurIndex--;\r\n                this.scrollTo(true);\r\n                this.refreshBtnArrow();\r\n                this.refreshAttr();\r\n                break;\r\n            case \"btn_arrow_R\":\r\n                if (this.bIsSwitching) return;\r\n                this.iCurIndex++;\r\n                this.scrollTo(false);\r\n                this.refreshBtnArrow();\r\n                this.refreshAttr();\r\n                break;\r\n        }\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        this.tItemId = null;\r\n        this.recyleHeros();\r\n    }\r\n}\r\n"]}