{"version":3,"sources":["assets\\start-scene\\scripts\\GetPoseidonOp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// +-+\r\nimport { gm } from './GameManager';\r\nimport { Utils } from './Utils';\r\nimport { BundleName } from './Constants';\r\nimport { NodePoolItem } from './NodePoolItem';\r\nimport { BANNER_AD_TYPE } from './ChannelManager';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass ItemComponent extends cc.Component {\r\n    @property(cc.Label)\r\n    private lblNum: cc.Label | null = null;\r\n\r\n    @property(cc.Sprite)\r\n    private itemImg: cc.Sprite | null = null;\r\n\r\n    private itemID: number = 22001;\r\n    private itemNum: number = 15;\r\n\r\n    protected onEnable(): void {\r\n        const itemConfig = gm.data.config_data.getItemCfgByID(this.itemID);\r\n        if (itemConfig) {\r\n            this.itemImg.node.active = true;\r\n            if (itemConfig.anim_name == \"\") {\r\n                Utils.async_set_sprite_frame(this.itemImg, BundleName.MAP, \"res/\" + itemConfig.icon);\r\n                gm.pool.put_children(this.itemImg.node);\r\n            } else {\r\n                this.itemImg.spriteFrame = null;\r\n                gm.pool.put_children(this.itemImg.node);\r\n                (BundleName.MAP, \"prefabs/item/\" + itemConfig.anim_name, NodePoolItem, (nodePoolItem: cc.Component | null) => {\r\n                    if (!nodePoolItem) return;\r\n                    if (this.itemImg?.node.childrenCount == 0) {\r\n                        nodePoolItem.node.scale = 3;\r\n                        this.itemImg.node.addChild(nodePoolItem.node);\r\n                        const animation = nodePoolItem.getComponent(cc.Animation);\r\n                        if (animation) {\r\n                            animation.play();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            this.lblNum.string = \"x\" + this.itemNum;\r\n            gm.channel.show_banner_ad(BANNER_AD_TYPE.ALL);\r\n        }\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        gm.channel.hide_banner_ad(BANNER_AD_TYPE.ALL);\r\n    }\r\n\r\n    private onClickClose(): void {\r\n        gm.ui.async_hide_module(gm.const.GETPOSEIDONOP);\r\n    }\r\n\r\n    private onClickDoubleItem(): void {\r\n        gm.channel.show_video_ad(this.getDoubleCb, this);\r\n    }\r\n\r\n    private getDoubleCb(): void {\r\n        gm.data.mapCell_data.splitItemNum(this.itemNum, 22008, 1);\r\n        gm.data.mapCell_data.async_write_data();\r\n        gm.ui.async_hide_module(gm.const.GETPOSEIDONOP);\r\n        gm.ui.emit(\"update_soul_num\");\r\n    }\r\n}\r\n\r\nexport default ItemComponent;"]}