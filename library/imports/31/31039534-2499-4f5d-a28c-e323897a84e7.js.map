{"version":3,"sources":["assets\\test\\scripts\\MapEditor.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Utils } from '../../start-scene/scripts/Utils';\r\nimport MapItem from './MapItem';\r\nimport LandRes from './LandRes';\r\nimport { MapItemVo } from './MapItemVo';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass MapEditor extends cc.Component {\r\n    @property(cc.Node)\r\n    private delBtn: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private resNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private mapNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private mapContent: cc.Node = null;\r\n\r\n    @property(cc.Prefab)\r\n    private mapItem: cc.Prefab = null;\r\n\r\n    @property(cc.Prefab)\r\n    private treeItem: cc.Prefab = null;\r\n\r\n    @property(cc.Label)\r\n    private mapIDLbl: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private mapIndexLbl: cc.Label = null;\r\n\r\n    @property(cc.EditBox)\r\n    private mapImgIDEdit: cc.EditBox = null;\r\n\r\n    @property(cc.EditBox)\r\n    private mapY: cc.EditBox = null;\r\n\r\n    @property(cc.EditBox)\r\n    private treeID: cc.EditBox = null;\r\n\r\n    @property(cc.EditBox)\r\n    private treex: cc.EditBox = null;\r\n\r\n    @property(cc.EditBox)\r\n    private treey: cc.EditBox = null;\r\n\r\n    @property(cc.Node)\r\n    private isObtrustNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private selCombNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private selContent: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private attrNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private areaNode: cc.Node = null;\r\n\r\n    @property(cc.Prefab)\r\n    private landNode: cc.Prefab = null;\r\n\r\n    private _tempIndex: number = 1;\r\n    private _row: number = 0;\r\n    private _col: number = 0;\r\n    private _mapList: MapItemVo[] = [];\r\n    private maxNum: number = 55;\r\n    private _plantNum: number = 53;\r\n    private _landNum: number = 42;\r\n    private _curtxt: number = 0;\r\n    private _curType: number = 0;\r\n    private _curShowID: number = 0;\r\n    private _mapItem: MapItem | null = null;\r\n\r\n    public initData(row: number, col: number, mapList: MapItemVo[]): void {\r\n        this._row = row;\r\n        this._col = col;\r\n        this._mapList = mapList;\r\n    }\r\n\r\n    private initMap(): void {\r\n        this.mapNode.removeAllChildren();\r\n        for (let index = 0; index < this._mapList.length; index++) {\r\n            if (null != this._mapList[index]) {\r\n                const column = index % this._row;\r\n                const row = Math.floor(index / this._row);\r\n                const mapItemNode = cc.instantiate(this.mapItem);\r\n\r\n                mapItemNode.getComponent(MapItem).initData(this._mapList[index], this);\r\n                this.mapNode.addChild(mapItemNode);\r\n                mapItemNode.y = -95 - 51 * row - 20 * column;\r\n                mapItemNode.x = 60 - 31 * row + 75 * column;\r\n            }\r\n        }\r\n\r\n        for (let index = 0; index < this.areaNode.childrenCount; index++) {\r\n            this.areaNode.children[index].children[0].children[1].getComponent(cc.Label).string = index + 1 + \"\";\r\n\r\n        }\r\n        for (let index = 0; index < this.maxNum; index++) {\r\n            var n = cc.instantiate(this.landNode);\r\n            this.selContent.addChild(n)\r\n        }\r\n    }\r\n\r\n    private onClickAreaID(event: cc.Event, areaID: string): void {\r\n        const parsedAreaID = parseInt(areaID);\r\n        event.target.children[0].active = !event.target.children[0].active;\r\n        for (let i = 0; i < this.mapNode.childrenCount; i++) {\r\n            if (this.mapNode.children[i].getComponent(MapItem)._mapItemData.areaID == parsedAreaID) {\r\n                this.mapNode.children[i].active = event.target.children[0].active;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        this.initMap();\r\n        this.attrNode.active = false;\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, (event: cc.Event.EventTouch) => {\r\n            this.mapNode.setPosition(this.mapNode.position.x + event.getDelta().x, this.mapNode.position.y + event.getDelta().y);\r\n        }, this);\r\n    }\r\n\r\n    private onClickShowSprItem(event: cc.Node, type: string): void {\r\n        if (this.selCombNode.active) {\r\n            this.selCombNode.active = false;\r\n        }\r\n        else {\r\n            this.selCombNode.active = true;\r\n            const num = \"1\" == type ? this._plantNum : this._landNum;\r\n\r\n            this.selCombNode.y = \"1\" == type ? 110 : 175;\r\n            this._curType = \"1\" == type ? 1 : 0;\r\n            this._curtxt = \"1\" == type ? parseInt(this.treeID.string) + 1 : parseInt(this.mapImgIDEdit.string);\r\n\r\n            for (let index = 0; index < this.selContent.childrenCount; index++) {\r\n                this.selContent.children[index].active = index < num;\r\n                if (this.selContent.children[index].active) {\r\n                    this.selContent.children[index].getComponent(LandRes).initData(\r\n                        parseInt(type),\r\n                        0 == parseInt(type) ? index + 1 : 100 + index,\r\n                        this.clickSelSprItem.bind(this), this);\r\n                }\r\n            }\r\n            this.selContent.children[this._curtxt - 1].getComponent(LandRes).setSelectColor(true);\r\n        }\r\n    }\r\n\r\n    private clickSelSprItem(index: number): void {\r\n        if (0 == this._curType) {\r\n            (this._mapItem.setLandImg(index),\r\n                this.mapImgIDEdit.string = index + \"\",\r\n                this.selContent.children[this._curtxt - 1].getComponent(LandRes).setSelectColor(false),\r\n                this._curtxt = index)\r\n        } else {\r\n            if (0 == index) {\r\n                this.treex.string = \"0\";\r\n                this.treey.string = \"0\";\r\n            }\r\n            this.treeID.string = index.toString();\r\n            this._mapItem.setTreeShowOrHide(index);\r\n            this.selContent.children[this._curtxt - 1].getComponent(LandRes).setSelectColor(false);\r\n            this._curtxt = index + 1;\r\n        }\r\n    }\r\n\r\n    private onClickHideSprItem(): void {\r\n        this.selCombNode.active = false;\r\n    }\r\n\r\n    private onClickChangeBg(event: cc.Node, bgID: string): void {\r\n        if (this._curShowID != parseInt(bgID))\r\n            for (let index = 0; index < this.mapNode.childrenCount; index++) {\r\n                if (this.mapNode.children[index] && this.mapNode.children[index].getComponent(MapItem)) {\r\n                    this.mapNode.children[index].getComponent(MapItem).setImgListBg(parseInt(bgID));\r\n                }\r\n            }\r\n    }\r\n\r\n    private onClickPlayAnim(): void {\r\n        let plantID = \"let plantID = [\";\r\n        let landImgID = \"let landImgID = [\";\r\n        let landYOffset = \"let landYOffset = [\";\r\n        let plantXOffset = \"let plantXOffset = [\";\r\n        let plantYOffset = \"let plantYOffset = [\";\r\n        for (let r = 0; r < this._mapList.length; r++) {\r\n            if (this._mapList[r]) {\r\n                plantID += this._mapList[r].itemTreeId + \",\";\r\n                landImgID += this._mapList[r].itemImgIndex + \",\";\r\n                landYOffset += this._mapList[r].itemYOffset + \",\";\r\n                plantXOffset += this._mapList[r].itemTreeX + \",\";\r\n                plantYOffset += this._mapList[r].itemTreeY + \",\";\r\n            }\r\n        }\r\n        plantID += \"];\";\r\n        landImgID += \"];\";\r\n        landYOffset += \"];\";\r\n        plantXOffset += \"];\";\r\n        plantYOffset += \"];\";\r\n        console.log(plantID);\r\n        console.log(landImgID);\r\n        console.log(landYOffset);\r\n        console.log(plantXOffset);\r\n        console.log(plantYOffset);\r\n    }\r\n\r\n    public onClickMapItem(item: MapItem, data: MapItemVo): void {\r\n        this._mapItem = item;\r\n        this.attrNode.active = true;\r\n        this.onShowInfo(data);\r\n\r\n        if (this.selCombNode.active) {\r\n            const num = 1 == this._curType ? this._plantNum : this._landNum;\r\n            for (var i = 0; i < this.selContent.childrenCount; i++) {\r\n                this.selContent.children[i].active = i < num;\r\n                if (this.selContent.children[i].active) {\r\n                    this.selContent.children[i].getComponent(LandRes).initData(\r\n                        this._curType,\r\n                        0 == this._curType ? i + 1 : 100 + i,\r\n                        this.clickSelSprItem.bind(this), this);\r\n                }\r\n            }\r\n\r\n            this._curtxt = 0 == this._curType ? parseInt(this.mapImgIDEdit.string) : parseInt(this.treeID.string) + 1;\r\n            this.selContent.children[this._curtxt - 1].getComponent(LandRes).setSelectColor(true);\r\n        }\r\n    }\r\n\r\n    public onShowInfo(data: MapItemVo): void {\r\n        if (this._mapList[data.itemID]) this._mapList[data.itemID] = data;\r\n        this.mapIDLbl.string = \"地块ID\" + data.itemIndex;\r\n        this.mapIndexLbl.string = \"地图表ID：\" + data.itemID;\r\n        this.mapImgIDEdit.string = data.itemImgIndex.toString();\r\n        this.mapY.string = data.itemYOffset.toString();\r\n        this.treeID.string = data.itemTreeId.toString();\r\n        this.treex.string = data.itemTreeX.toString();\r\n        this.treey.string = data.itemTreeY.toString();\r\n        this.isObtrustNode.children[1].active = data.isObstruct == 1;\r\n    }\r\n\r\n    private editItemLandImg(): void {\r\n        const imgID = parseInt(this.mapImgIDEdit.string);\r\n        if (imgID >= 0 && imgID <= 24) {\r\n            this._mapItem.setLandImg(imgID);\r\n        } else {\r\n            console.log(\"没有对应的图片ID\");\r\n        }\r\n    }\r\n\r\n    private editItemLandY(): void {\r\n        const yOffset = parseInt(this.mapY.string);\r\n        this._mapItem.showMapImgY(yOffset);\r\n    }\r\n\r\n    private editItemTreeID(): void {\r\n        const treeID = parseInt(this.treeID.string);\r\n        if (treeID === 0) {\r\n            this.treex.string = \"0\";\r\n            this.treey.string = \"0\";\r\n        }\r\n        this._mapItem.setTreeShowOrHide(treeID);\r\n    }\r\n\r\n    private editItemTreeX(): void {\r\n        const treeX = parseInt(this.treex.string);\r\n        const treeY = parseInt(this.treey.string);\r\n        if (parseInt(this.treeID.string) == 0) {\r\n            this.treex.string = \"0\";\r\n            this.treey.string = \"0\";\r\n            return;\r\n        }\r\n        this._mapItem.setTreePos(treeX, treeY);\r\n    }\r\n\r\n    private showIsObtrust(): void {\r\n        this.isObtrustNode.children[1].active = !this.isObtrustNode.children[1].active;\r\n        this._mapItem.setIsObtrust(this.isObtrustNode.children[1].active);\r\n    }\r\n\r\n    private onClickSave(): void {\r\n        const data = {\r\n            row: this._row,\r\n            col: this._col,\r\n            mapData: this._mapList\r\n        };\r\n        cc.sys.localStorage.setItem(\"mapData_sailing\", JSON.stringify(data));\r\n    }\r\n\r\n    private onClickExport(): void {\r\n        const data = {\r\n            row: this._row,\r\n            col: this._col,\r\n            mapData: this._mapList\r\n        };\r\n        const jsonData = JSON.stringify(data);\r\n        cc.sys.localStorage.setItem(\"mapData_sailing\", jsonData);\r\n        Utils.save_json_file(\"mapData_sailing.json\", jsonData);\r\n    }\r\n}\r\n\r\nexport default MapEditor;"]}