{"version":3,"sources":["assets\\test\\scripts\\ParabolaDemo2.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Arrow } from './Arrow';\r\nimport { ParabolaPath } from '../../start-scene/scripts/ParabolaPath';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nenum PathType {\r\n    LEFT_PARABOL = 0,\r\n    LINE = 1\r\n}\r\n\r\n@ccclass\r\nclass ParabolaDemo2 extends cc.Component {\r\n    @property(Arrow)\r\n    private arrow: Arrow | null = null;\r\n\r\n    @property(cc.Node)\r\n    private start_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private end_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private target_node: cc.Node | null = null;\r\n\r\n    @property(cc.Graphics)\r\n    private graph: cc.Graphics | null = null;\r\n\r\n    private path: ParabolaPath | null = null;\r\n    private path_array: { time: number; position: cc.Vec3; angle: number }[] = [];\r\n\r\n    public start(): void { }\r\n\r\n    protected onEnable(): void { }\r\n\r\n    private draw(): void {\r\n        this.graph.clear();\r\n        for (let i = 0; i < this.path_array.length; i++) {\r\n            const curPos = this.path_array[i];\r\n            this.graph.circle(curPos.position.x, curPos.position.y, 10);\r\n        }\r\n        this.graph.fill();\r\n        this.graph.stroke();\r\n    }\r\n\r\n    private generate_path(): void {\r\n        this.path = new ParabolaPath(this.start_node?.position, this.end_node?.position, 16, -9.8);\r\n        this.path.isClampStartEnd = true;\r\n        this.path_array = [];\r\n        this.target_node.position = this.start_node.position;\r\n\r\n        const position = this.path.getPosition(this.path.time + 1).sub(this.target_node.position);\r\n        this.target_node.angle = (180 * Math.atan2(position.y, position.x)) / Math.PI;\r\n\r\n        this.path_array.push({\r\n            time: this.path.time,\r\n            position: this.target_node.position,\r\n            angle: this.target_node.angle\r\n        });\r\n\r\n        while (this.path.time < this.path.totalTime) {\r\n            this.generate_pos(1);\r\n            this.path_array.push({\r\n                time: this.path.time,\r\n                position: this.target_node.position,\r\n                angle: this.target_node.angle\r\n            });\r\n        }\r\n\r\n        console.log(this.path_array);\r\n        this.draw();\r\n    }\r\n\r\n    private generate_pos(num: number): void {\r\n        this.path.time += num;\r\n        this.target_node.position = new cc.Vec3(this.path.position.x, this.path.position.y);\r\n        const delta = this.path.getPosition(this.path.time + num).sub(this.target_node.position);\r\n        this.target_node.angle = (180 * Math.atan2(delta.y, delta.x)) / Math.PI;\r\n    }\r\n}\r\n\r\n"]}