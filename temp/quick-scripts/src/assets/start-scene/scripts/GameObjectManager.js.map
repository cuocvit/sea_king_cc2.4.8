{"version":3,"sources":["assets\\start-scene\\scripts\\GameObjectManager.ts"],"names":[],"mappings":";;;;;;;AAQA;IAKI;QAFQ,iBAAY,GAAoC,EAAE,CAAC;IAEpC,CAAC;IAExB,sBAAkB,6BAAQ;aAA1B;YACI,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,iBAAiB,EAAE,CAAC,CAAC;YAC7D,OAAO,IAAI,CAAC,SAAS,CAAC;QAC1B,CAAC;;;OAAA;IAED,sBAAkB,8BAAS;aAA3B;YACI,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC;QAC7B,CAAC;;;OAAA;IAEM,+BAAG,GAAV,UAAW,IAAuB;QAC9B,IAAI,IAAI,IAAI,IAAI,EAAE;YACd,IAAM,SAAS,GAAW,EAAE,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YACnD,IAAI,KAAK,GAAgC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;YACtE,IAAI,CAAC,KAAK,EAAE;gBACR,KAAK,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;gBAC9B,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC;aACxC;YACD,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC;YACnC,KAAK,CAAC,KAAK,EAAE,CAAC;SACjB;IACL,CAAC;IAEM,kCAAM,GAAb,UAAc,IAAuB;QACjC,IAAI,IAAI,IAAI,IAAI,EAAE;YACd,IAAM,SAAS,GAAW,EAAE,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YACnD,IAAM,KAAK,GAAgC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;YACxE,IAAI,KAAK,EAAE;gBACP,IAAM,MAAM,GAA2B,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBACnE,IAAI,MAAM,EAAE;oBACR,MAAM,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;oBACnC,OAAO,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;oBACnC,KAAK,CAAC,KAAK,EAAE,CAAC;iBACjB;aACJ;SACJ;IACL,CAAC;IAEM,iCAAK,GAAZ,UAAa,IAAuB;QAChC,IAAI,IAAI,IAAI,IAAI,EAAE;YACd,OAAO,CAAC,CAAC;SACZ;QACD,IAAM,SAAS,GAAW,EAAE,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QACnD,IAAM,KAAK,GAAgC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QACxE,OAAO,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IACnC,CAAC;IAEM,gCAAI,GAAX;QACI,IAAI,UAAU,GAAW,CAAC,CAAC;QAC3B,IAAI,GAAG,GAAW,wDAAwD,CAAC;QAC3E,KAAK,IAAM,SAAS,IAAI,IAAI,CAAC,YAAY,EAAE;YACvC,IAAM,KAAK,GAAoB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;YAC5D,UAAU,IAAI,KAAK,CAAC,KAAK,CAAC;YAC1B,GAAG,IAAI,OAAK,SAAS,kBAAa,KAAK,CAAC,KAAO,CAAC;SACnD;QACD,GAAG,IAAI,wBAAsB,UAAY,CAAC;QAC1C,GAAG,IAAI,0DAA0D,CAAC;QAClE,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,mBAAmB,CAAC,CAAC;IAC1C,CAAC;IA/Dc,2BAAS,GAA6B,IAAI,CAAC;IAC3C,4BAAU,GAAW,CAAC,CAAC;IA+D1C,wBAAC;CAjED,AAiEC,IAAA;AAjEY,8CAAiB","file":"","sourceRoot":"/","sourcesContent":["//\r\nimport { GameObject } from './GameObject';\r\n\r\ninterface ObjectListEntry {\r\n    map: Record<number, GameObject>;\r\n    count: number;\r\n}\r\n\r\nexport class GameObjectManager {\r\n    private static _instance: GameObjectManager | null = null;\r\n    private static _unique_id: number = 0;\r\n    private _object_list: Record<string, ObjectListEntry> = {};\r\n\r\n    private constructor() {}\r\n\r\n    public static get instance(): GameObjectManager {\r\n        this._instance || (this._instance = new GameObjectManager());\r\n        return this._instance;\r\n    }\r\n\r\n    public static get unique_id(): number {\r\n        return this._unique_id++;\r\n    }\r\n\r\n    public add(gObj: GameObject | null): void {\r\n        if (gObj != null) {\r\n            const className: string = cc.js.getClassName(gObj);\r\n            let entry: ObjectListEntry | undefined = this._object_list[className];\r\n            if (!entry) {\r\n                entry = { map: {}, count: 0 };\r\n                this._object_list[className] = entry;\r\n            }\r\n            entry.map[gObj.__unique_id] = gObj;\r\n            entry.count++;\r\n        }\r\n    }\r\n\r\n    public remove(gObj: GameObject | null): void {\r\n        if (gObj != null) {\r\n            const className: string = cc.js.getClassName(gObj);\r\n            const entry: ObjectListEntry | undefined = this._object_list[className];\r\n            if (entry) {\r\n                const object: GameObject | undefined = entry.map[gObj.__unique_id];\r\n                if (object) {\r\n                    object.__destroy_time = Date.now();\r\n                    delete entry.map[gObj.__unique_id];\r\n                    entry.count--;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public count(gObj: GameObject | null): number {\r\n        if (gObj == null) {\r\n            return 0;\r\n        }\r\n        const className: string = cc.js.getClassName(gObj);\r\n        const entry: ObjectListEntry | undefined = this._object_list[className];\r\n        return entry ? entry.count : 0;\r\n    }\r\n\r\n    public info(): void {\r\n        let totalCount: number = 0;\r\n        let log: string = \"%c\\n============== Game Object Info ==================\";\r\n        for (const className in this._object_list) {\r\n            const entry: ObjectListEntry = this._object_list[className];\r\n            totalCount += entry.count;\r\n            log += `\\n${className} count is ${entry.count}`;\r\n        }\r\n        log += `\\n\\nTotal count is ${totalCount}`;\r\n        log += \"\\n\\n============== Game Object Info ==================\\n\";\r\n        console.log(log, \"font-weight:bold;\");\r\n    }\r\n}\r\n"]}