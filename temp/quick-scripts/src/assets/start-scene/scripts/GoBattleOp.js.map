{"version":3,"sources":["assets\\start-scene\\scripts\\GoBattleOp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// _hitTest???\r\nimport { ListView } from './ListView';\r\nimport { GameModule } from './GameModule';\r\nimport { gm } from \"./GameManager\";\r\nimport { BuildTypeEnum, BundleName } from './Constants';\r\nimport { roleGoBattleItemVO } from './MapCellCfgData';\r\nimport { Utils } from './Utils';\r\nimport { TempData } from './TempData';\r\nimport { GoBattleBuyItem } from \"./GoBattleBuyItem\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass GoBattleOp extends GameModule {\r\n    @property([cc.Node])\r\n    private heroPosNode: cc.Node[] = [];\r\n\r\n    @property(cc.Node)\r\n    private heroParendNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private clickMoveNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private bgUINormal: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private bgUIDongku: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private bgUIMiHuan: cc.Node | null = null;\r\n\r\n    @property([cc.SpriteFrame])\r\n    private kuangSprFrameList: cc.SpriteFrame[] = [];\r\n\r\n    @property(cc.Node)\r\n    private handAnim: cc.Node | null = null;\r\n\r\n    @property(ListView)\r\n    private hero_list: ListView | null = null;\r\n\r\n    @property(cc.Button)\r\n    private battleBtn: cc.Button | null = null;\r\n\r\n    @property(cc.Node)\r\n    private noHeroTips: cc.Node | null = null;\r\n\r\n    @property(cc.Label)\r\n    private lblLvl: cc.Label | null = null;\r\n\r\n    @property(cc.Node)\r\n    private adheroNode: cc.Node | null = null;\r\n\r\n    private _curUnlockNum: number = 0;\r\n    private _tempLockList: number[] = [1, 1, 2, 3, 4, 5, 6, 7, 8, 9];\r\n    private _tempHeroList: { [key: number]: number } = {\r\n        34003: 0,\r\n        35003: 0,\r\n        37003: 33,\r\n        38003: 35,\r\n        39003: 220\r\n    };\r\n    private _curType: number = 1;\r\n    private _clickHeroData = null;\r\n    private _startPos = null;\r\n\r\n    protected onLoad(): void {\r\n        let num: number = 0;\r\n        for (let t in this._tempHeroList) {\r\n            this.adheroNode?.children[num].getComponent(GoBattleBuyItem).initdata(parseInt(t), this._tempHeroList[t]);\r\n            num++;\r\n        }\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        this.adheroNode.active = false;\r\n        const dataByType = gm.data.mapCell_data.getBuildDataByType(BuildTypeEnum.TOWER_TYPE);\r\n        if (dataByType && dataByType.buildLvl >= 2) {\r\n            this.adheroNode.active = true;\r\n        }\r\n        if (this.adheroNode?.active) {\r\n            this.hero_list.node.height = 344;\r\n            this.hero_list.node.y = -715;\r\n            this.hero_list.scrollView.node.height = 220;\r\n            this.hero_list.scrollView.node.children[0].height = 220;\r\n        } else {\r\n            this.hero_list.node.height = 380;\r\n            this.hero_list.scrollView.node.children[0].height = 380;\r\n            this.hero_list.scrollView.node.height = 380;\r\n            this.hero_list.node.y = -637;\r\n        }\r\n        this.hero_list.scrollView.node.children[0].y = 0.5 * this.hero_list.scrollView.node.height;\r\n        TempData.setDefenseType(1);\r\n        this._curType = gm.ui.get_module_args(gm.const.GOBATTLE.key) as number;\r\n        if (gm.data.mapCell_data.isGuide) gm.data.mapCell_data.isGuide;\r\n        this.initPanelUI();\r\n        this._clickHeroData = new roleGoBattleItemVO;\r\n        gm.ui.on(\"item_move_end\", this.on_move_item_hide, this);\r\n        gm.ui.on(\"refreshHeroBattle\", this.refreshPanel, this);\r\n        gm.ui.on(\"refreshBattleHero\", this.update_view, this);\r\n        gm.data.fight_temp_data.open_battle_panel_state = 1;\r\n        gm.data.fight_temp_data.battle_hero_array = [];\r\n        const buildData = gm.data.mapCell_data.buildData[BuildTypeEnum.SEAGOINGBOAT_TYPE];\r\n        let cfById = gm.data.config_data.getBuildCfgByID(buildData.buildID);\r\n        if (cfById) {\r\n            this.lblLvl.string = this._curType !== 1 ? \"\" : \"Lv.\" + buildData.buildLvl;\r\n            this._curUnlockNum = cfById.capacity;\r\n            console.log(\"this._curType: \", this._curType);\r\n            for (let i = 0; i < this.heroPosNode.length; i++) {\r\n                let color = cc.Color.BLACK.fromHEX(\"#FFF8E8\");\r\n                if (this._curType === 2) {\r\n                    color = cc.Color.BLACK.fromHEX(\"#916d87\");\r\n                } else if (this._curType === 3) {\r\n                    color = cc.Color.BLACK.fromHEX(\"#E6D6FD\");\r\n                }\r\n                this.heroPosNode[i].color = color;\r\n                this.heroPosNode[i].children[0].children[0].getComponent(cc.Sprite).spriteFrame = this.kuangSprFrameList[this._curType - 1];\r\n                if (this._curUnlockNum < i + 1) {\r\n                    this.heroPosNode[i].children[0].active = false;\r\n                    this.heroPosNode[i].children[1].active = true;\r\n                    color = this._curType === 2 ? cc.Color.BLACK.fromHEX(\"#613a55\") : this._curType === 3 ? cc.Color.BLACK.fromHEX(\"#8d5cd1\") : cc.Color.BLACK.fromHEX(\"#BAAF93\");\r\n                    this.heroPosNode[i].children[1].children[0].color = color;\r\n                    this.heroPosNode[i].children[1].children[1].color = color;\r\n                    this.heroPosNode[i].children[1].children[1].getComponent(cc.Label).string = \"level \" + this._tempLockList[i];\r\n                } else {\r\n                    this.heroPosNode[i].children[0].active = true;\r\n                    this.heroPosNode[i].children[1].active = false;\r\n                }\r\n                this.heroPosNode[i].on(cc.Node.EventType.TOUCH_END, this.touchEnd.bind(this, i), this);\r\n            }\r\n            this.clickMoveNode.active = false;\r\n            TempData.getInitAllHeroList();\r\n            this.noHeroTips.active = TempData.localHeroList.length <= 0;\r\n            this.battleBtn.interactable = TempData.localHeroList.length > 0;\r\n            this.refreshPanel();\r\n            this.update_view();\r\n        }\r\n    }\r\n\r\n    private update_view(): void {\r\n        this.hero_list?.setData(TempData.localHeroList);\r\n    }\r\n\r\n    private initPanelUI(): void {\r\n        this.bgUINormal.active = true;\r\n        this.bgUIMiHuan.active = false;\r\n        this.bgUIDongku.active = false;\r\n        if (this._curType === 1) {\r\n            // Do nothing\r\n        } else if (this._curType === 2) {\r\n            this.bgUINormal.active = false;\r\n            this.bgUIDongku.active = true;\r\n        } else if (this._curType === 3) {\r\n            this.bgUINormal.active = false;\r\n            this.bgUIMiHuan.active = true;\r\n        }\r\n    }\r\n\r\n    private on_move_item_hide(newT: cc.Vec2, eventNum: number): void {\r\n        if (this.heroParendNode._hitTest(newT) && gm.data.fight_temp_data.get_battle_hero_is_space()) { // ???\r\n            const item = new roleGoBattleItemVO;\r\n            item.cellID = eventNum;\r\n            const heroConfig = gm.data.config_data.getHeroCfgByID(gm.data.mapCell_data.role_map_data[item.cellID].itemID);\r\n            if (heroConfig) {\r\n                item.itemID = heroConfig.heroid;\r\n                item.itemType = heroConfig.occupation;\r\n                gm.data.fight_temp_data.battle_hero_array.push(item);\r\n            }\r\n            this.refreshPanel();\r\n        }\r\n    }\r\n\r\n    private touchStart(number: number, event: any): void {\r\n        this.clickMoveNode.active = true;\r\n        this.clickMoveNode.position = this.clickMoveNode.parent.convertToNodeSpaceAR(event.getLocation());\r\n        this._clickHeroData.itemID = gm.data.fight_temp_data.battle_hero_array[number].itemID;\r\n        this._clickHeroData.cellID = gm.data.fight_temp_data.battle_hero_array[number].cellID;\r\n        this._clickHeroData.itemType = gm.data.fight_temp_data.battle_hero_array[number].itemType;\r\n        this._clickHeroData.hp = gm.data.fight_temp_data.battle_hero_array[number].hp;\r\n        this._clickHeroData.maxHp = gm.data.fight_temp_data.battle_hero_array[number].maxHp;\r\n        gm.data.fight_temp_data.battle_hero_array.splice(number, 1);\r\n        this.refreshPanel();\r\n    }\r\n\r\n    private touchMove(event: any): void {\r\n        this.clickMoveNode.position = this.clickMoveNode?.parent.convertToNodeSpaceAR(event.getLocation());\r\n    }\r\n\r\n    private touchEnd(number: number): void {\r\n        if (gm.data.fight_temp_data.battle_hero_array.length > number && gm.data.fight_temp_data.battle_hero_array[number]) {\r\n            const cellID = gm.data.fight_temp_data.battle_hero_array[number].cellID;\r\n            const itemID = gm.data.fight_temp_data.battle_hero_array[number].itemID;\r\n            TempData.addHeroByID(itemID, cellID);\r\n            gm.data.fight_temp_data.battle_hero_array.splice(number, 1);\r\n            this.refreshPanel();\r\n            this.update_view();\r\n        }\r\n    }\r\n\r\n    private touchCanel(num: number, event: cc.Touch): void {\r\n        if (this.heroParendNode._hitTest(event.getLocation())) { // ???\r\n            for (let a = 0; a < this._curUnlockNum; a++) {\r\n                if (this.heroPosNode[a]._hitTest(event.getLocation())) {\r\n                    gm.data.fight_temp_data.battle_hero_array.splice(a, 0, this._clickHeroData);\r\n                    this._clickHeroData = null;\r\n                    this.refreshPanel();\r\n                    break;\r\n                }\r\n            }\r\n            if (this._clickHeroData) {\r\n                gm.data.fight_temp_data.battle_hero_array.push(this._clickHeroData);\r\n                this._clickHeroData = null;\r\n                this.refreshPanel();\r\n            }\r\n        }\r\n        if (this._clickHeroData) {\r\n            gm.data.fight_temp_data.battle_hero_array.splice(num, 1);\r\n            this.refreshPanel();\r\n        }\r\n    }\r\n\r\n    private refreshPanel(): void {\r\n        const buildData = gm.data.mapCell_data.buildData[BuildTypeEnum.SEAGOINGBOAT_TYPE];\r\n        let buildConfig = gm.data.config_data.getBuildCfgByID(buildData.buildID);\r\n        if (buildConfig) {\r\n            this._curUnlockNum = buildConfig.capacity;\r\n            const heroArr = gm.data.fight_temp_data.battle_hero_array;\r\n            if (gm.data.mapCell_data.isGuide && gm.data.mapCell_data.roleGuideVO.guideID == 13) {\r\n                this.handAnim.active = true;\r\n                this.handAnim.position = heroArr.length == 2 ? this.battleBtn?.node.position : cc.v3(-238, -556);\r\n            } else {\r\n                this.handAnim.active = false;\r\n            }\r\n            for (let i = 0; i < this._curUnlockNum; i++) {\r\n                this.heroPosNode[i].children[0].children[1].active = true;\r\n                if (heroArr.length > i && heroArr[i]) {\r\n                    const heroConfig = gm.data.config_data.getHeroCfgByID(heroArr[i].itemID);\r\n                    if (heroConfig) {\r\n                        this.heroPosNode[i].children[0].children[1].active = true;\r\n                        Utils.async_set_sprite_frame(this.heroPosNode[i].children[0].children[1].children[0].getComponent(cc.Sprite), BundleName.COMMON, \"res/color_\" + heroConfig.lv);\r\n                        Utils.async_set_sprite_frame(this.heroPosNode[i].children[0].children[1].children[1].getComponent(cc.Sprite), BundleName.COMMON, \"res/handbook/\" + heroConfig.heroid);\r\n                        Utils.async_set_sprite_frame(this.heroPosNode[i].children[0].children[1].children[2].getComponent(cc.Sprite), BundleName.MAP, \"res/hero/heroPhoto\" + heroConfig.lv);\r\n                    }\r\n                } else {\r\n                    this.heroPosNode[i].children[0].children[1].active = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private onClickHeroPhoto(t: any, key: string): void {\r\n        if (this.node.getNumberOfRunningActions() > 0) return;\r\n        const index = parseInt(key);\r\n        if (this._curUnlockNum > index) {\r\n            gm.data.fight_temp_data.battle_hero_array.splice(index, 1);\r\n            this.refreshPanel();\r\n        }\r\n    }\r\n\r\n    private onClickClose(): void {\r\n        gm.data.fight_temp_data.battle_hero_array = [];\r\n        gm.data.fight_temp_data.open_battle_panel_state = 0;\r\n        gm.data.mail_temp_data.target_uid = \"\";\r\n        gm.ui.async_hide_module(gm.const.GOBATTLE);\r\n    }\r\n\r\n    private onClickFight(): void {\r\n        if (gm.data.fight_temp_data.battle_hero_array.length != 0) {\r\n            if (gm.data.mapCell_data.isGuide && gm.data.fight_temp_data.battle_hero_array.length < 2) {\r\n                gm.ui.show_notice(\"Hãy đưa 2 anh hùng vào đội hình!!!\");\r\n            } else {\r\n                if (gm.data.mapCell_data.isGuide) {\r\n                    gm.data.mapCell_data.buildData[BuildTypeEnum.TOWER_TYPE].buildState = 2;\r\n                    gm.data.mapCell_data.async_write_data();\r\n                    gm.data.mapCell_data.role_build_lock_num = 1;\r\n                    gm.ui.emit(\"build_show_stateIcon\", true);\r\n                    gm.channel.report_event(\"ohayoo_game_guide\", {\r\n                        guideid: 13,\r\n                        guidedesc: cc.js.formatStr(\"13.Nhấn vào nút tấn công trên giao diện!!!\")\r\n                    })\r\n                }\r\n                for (let t = 0; t < gm.data.fight_temp_data.battle_hero_array.length; t++) {\r\n                    gm.ui.emit(\"set_item_battle_hero_operty\", gm.data.fight_temp_data.battle_hero_array[t].cellID, false);\r\n                }\r\n                gm.data.fight_temp_data.open_battle_panel_state = 0;\r\n                gm.ui.async_hide_module(gm.const.GOBATTLE);\r\n                TempData.map_type = this._curType;\r\n                gm.ui.emit(\"ship_play_anim\", 1);\r\n            }\r\n        } else {\r\n            gm.ui.show_notice(\"Hãy đưa anh hùng vào đội hình!!!\");\r\n        }\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        for (let t = 0; t < this.heroPosNode.length; t++) {\r\n            this.heroPosNode[t].targetOff(this);\r\n        }\r\n        gm.ui.off(\"item_move_end\", this.on_move_item_hide, this);\r\n        gm.ui.off(\"refreshHeroBattle\", this.refreshPanel, this);\r\n        gm.ui.off(\"refreshBattleHero\", this.update_view, this);\r\n    }\r\n}\r\n\r\nexport default GoBattleOp;"]}