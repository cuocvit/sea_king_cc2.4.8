{"version":3,"sources":["assets\\start-scene\\scripts\\StoreData.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { StorageBase } from './StorageBase';\r\nimport { gm } from './GameManager';\r\nimport { BuildTypeEnum } from './Constants';\r\nimport { Config } from './ConfigManager';\r\nimport { ShopConfig } from '../../common/configs/shop';\r\n\r\n// @\r\nexport class StoreItemData {\r\n    id: number = 0;\r\n    count: number = 0;\r\n    video_count: number = 0;\r\n    index: number = 0;\r\n}\r\n\r\n// @\r\nexport class StoreData extends StorageBase {\r\n    public static EVENT_DATA_CHANGE: string = \"store_data_change\";\r\n    public static STORE_STATE_CHANGE: string = \"store_state_change\";\r\n    //\r\n    public STORAGE_KEY: string = \"StoreData\";\r\n    public refresh_time: number = 0;\r\n    public store_array: StoreItemData[] = [];\r\n    public daily_store_array: StoreItemData[] = [];\r\n    public video_store_array: StoreItemData[] = [];\r\n    public diamond_store_array: StoreItemData[] = [];\r\n    public isFree: boolean = true;\r\n\r\n    // @\r\n    public async_read_data(callback?: (data: any) => void): void {\r\n        super.async_read_data((data) => {\r\n            if (this.is_init) {\r\n                for (let i = 0; i < this.store_array.length; i++) {\r\n                    Object.setPrototypeOf(this.store_array[i], StoreItemData.prototype);\r\n                }\r\n                for (let i = 0; i < this.daily_store_array.length; i++) {\r\n                    Object.setPrototypeOf(this.daily_store_array[i], StoreItemData.prototype);\r\n                }\r\n                for (let i = 0; i < this.video_store_array.length; i++) {\r\n                    Object.setPrototypeOf(this.video_store_array[i], StoreItemData.prototype);\r\n                }\r\n                for (let i = 0; i < this.diamond_store_array.length; i++) {\r\n                    Object.setPrototypeOf(this.diamond_store_array[i], StoreItemData.prototype);\r\n                }\r\n                if (gm.data.mapCell_data.buildData[BuildTypeEnum.STALL_TYPE] &&\r\n                    gm.data.mapCell_data.buildData[BuildTypeEnum.STALL_TYPE].buildLvl > 0 &&\r\n                    this.refresh_time <= Math.floor(Date.now() / 1000)) {\r\n                    this.refresh_store();\r\n                }\r\n            } else {\r\n                this.is_init = true;\r\n            }\r\n            callback && callback(data);\r\n        });\r\n    }\r\n\r\n    // @\r\n    public updateStore(id: number, count: number): void {\r\n        for (let i = 0; i < this.store_array.length; i++) {\r\n            if (id === this.store_array[i].id) {\r\n                this.store_array[i].count++;\r\n                return;\r\n            }\r\n        }\r\n        const item = new StoreItemData();\r\n        item.id = id;\r\n        item.count = count;\r\n        this.store_array.push(item);\r\n        this.async_write_data();\r\n    }\r\n\r\n    // @\r\n    public updateDailyStore(id: number, count: number): void {\r\n        for (let i = 0; i < this.daily_store_array.length; i++) {\r\n            if (id === this.daily_store_array[i].id) {\r\n                this.daily_store_array[i].count++;\r\n                return;\r\n            }\r\n        }\r\n        const item = new StoreItemData();\r\n        item.id = id;\r\n        item.count = count;\r\n        this.daily_store_array.push(item);\r\n        this.async_write_data();\r\n    }\r\n\r\n    // @\r\n    public updateVideoStore(id: number, count: number, videoCount: number): void {\r\n        for (let i = 0; i < this.video_store_array.length; i++) {\r\n            if (id === this.video_store_array[i].id) {\r\n                this.video_store_array[i].count += count;\r\n                this.video_store_array[i].video_count = videoCount === 0 ? 0 : this.video_store_array[i].video_count + videoCount;\r\n                return;\r\n            }\r\n        }\r\n        const item = new StoreItemData();\r\n        item.id = id;\r\n        item.count = count;\r\n        item.video_count = videoCount;\r\n        this.video_store_array.push(item);\r\n        this.async_write_data();\r\n    }\r\n\r\n    // @\r\n    public updateDiamondStore(id: number, count: number): void {\r\n        for (let i = 0; i < this.diamond_store_array.length; i++) {\r\n            if (id === this.diamond_store_array[i].id) {\r\n                this.diamond_store_array[i].count++;\r\n                return;\r\n            }\r\n        }\r\n        const item = new StoreItemData();\r\n        item.id = id;\r\n        item.count = count;\r\n        this.diamond_store_array.push(item);\r\n        this.async_write_data();\r\n    }\r\n\r\n    // @\r\n    public getStoreCount(id: number): number {\r\n        for (let i = 0; i < this.store_array.length; i++) {\r\n            if (id === this.store_array[i].id) {\r\n                return this.store_array[i].count;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    // @\r\n    public getDailyStoreCount(id: number): number {\r\n        for (let i = 0; i < this.daily_store_array.length; i++) {\r\n            if (id === this.daily_store_array[i].id) {\r\n                return this.daily_store_array[i].count;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    // @\r\n    public getVideoStoreCount(id: number): number {\r\n        for (let i = 0; i < this.video_store_array.length; i++) {\r\n            if (id === this.video_store_array[i].id) {\r\n                return this.video_store_array[i].count;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    // @\r\n    private getVideoCount(id: number): number {\r\n        for (let i = 0; i < this.video_store_array.length; i++) {\r\n            if (id === this.video_store_array[i].id) {\r\n                return this.video_store_array[i].video_count;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    // @\r\n    public getDimondStoreCount(id: number): number {\r\n        for (let i = 0; i < this.diamond_store_array.length; i++) {\r\n            if (id === this.diamond_store_array[i].id) {\r\n                return this.diamond_store_array[i].count;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    // @ !!! any\r\n    private refreshStoreId(data: ShopConfig[], shopType: number): number[] {\r\n        const ids: number[] = [];\r\n        for (let i = 0; i < data.length; ++i) {\r\n            if (data[i].shop_type === shopType) {\r\n                if (!ids.includes(data[i].shop_id)) ids.push(data[i].shop_id);\r\n            }\r\n        }\r\n        return ids;\r\n    }\r\n\r\n    // @\r\n    public refresh_store(): void {\r\n        this.isFree = true;\r\n        gm.ui.emit(\"refresh_red_tips_stall\");\r\n        this.refresh_time = Math.floor(Date.now() / 1000) + gm.const.STORE_REFRESH_TIME;\r\n        this.store_array.splice(0, this.store_array.length);\r\n        this.daily_store_array.splice(0, this.daily_store_array.length);\r\n        this.video_store_array.splice(0, this.video_store_array.length);\r\n        this.diamond_store_array.splice(0, this.diamond_store_array.length);\r\n        //\r\n        const towerData = gm.data.mapCell_data.buildData[BuildTypeEnum.TOWER_TYPE];\r\n        const availableItems: ShopConfig[] = [];\r\n        const shopConfig: Config = gm.config.get_config_data(\"ShopConfigData\");\r\n\r\n        for (const key in shopConfig.data) {\r\n            const item = shopConfig.data[key] as ShopConfig;\r\n            if (item.lv === towerData.buildLvl) {\r\n                availableItems.push(item);\r\n            }\r\n        }\r\n        //\r\n        const randHalf = Math.random() < 0.5;\r\n        const randIdsType1 = this.refreshStoreId(availableItems, randHalf ? 1 : 2);\r\n        const randIdsType2 = this.refreshStoreId(availableItems, randHalf ? 2 : 1);\r\n        //\r\n        const item01 = new StoreItemData();\r\n        item01.id = randIdsType1[Math.floor(Math.random() * randIdsType1.length)],\r\n            item01.count = 0;\r\n        item01.index = 0;\r\n        this.store_array.push(item01);\r\n        //\r\n        const item02 = new StoreItemData();\r\n        item02.id = randIdsType2[Math.floor(Math.random() * randIdsType2.length)];\r\n        item02.count = 0;\r\n        item02.index = 1;\r\n        this.store_array.push(item02);\r\n        //\r\n        for (let i = 3; i <= 6; ++i) {\r\n            const ids = this.refreshStoreId(availableItems, i);\r\n            if (ids.length > 0) {\r\n                const newItem = new StoreItemData();\r\n                newItem.id = ids[Math.floor(Math.random() * ids.length)];\r\n                newItem.count = 0;\r\n                newItem.index = i - 1;\r\n                this.store_array.push(newItem);\r\n            }\r\n        }\r\n        //\r\n        const specialIds = this.refreshStoreId(availableItems, 101);\r\n        const dailyItem = new StoreItemData();\r\n        dailyItem.id = specialIds[Math.floor(Math.random() * specialIds.length)];\r\n        dailyItem.count = 0;\r\n        dailyItem.index = 0;\r\n        this.daily_store_array.push(dailyItem);\r\n        //\r\n        const uniqueTypes: number[] = [];\r\n        for (let i = 0; i < availableItems.length; ++i) {\r\n            if (availableItems[i].shop_type > 150 && availableItems[i].shop_type < 200) {\r\n                if (!uniqueTypes.includes(availableItems[i].shop_type)) {\r\n                    uniqueTypes.push(availableItems[i].shop_type);\r\n                }\r\n            }\r\n        }\r\n        const selectedTypes: number[] = [];\r\n        for (let i = 0; i < 3; ++i) {\r\n            const randomIndex = Math.floor(Math.random() * uniqueTypes.length);\r\n            selectedTypes.push(uniqueTypes[randomIndex]);\r\n            uniqueTypes.splice(randomIndex, 1);\r\n        }\r\n        //\r\n        for (let i = 0; i < 3; ++i) {\r\n            const ids = this.refreshStoreId(availableItems, selectedTypes[i]);\r\n            const newItem = new StoreItemData();\r\n            newItem.id = ids[Math.floor(Math.random() * ids.length)];\r\n            newItem.count = 0;\r\n            newItem.index = i + 1;\r\n            this.daily_store_array.push(newItem);\r\n        }\r\n        //\r\n        for (let i = 200; i <= 203; ++i) {\r\n            const ids = this.refreshStoreId(availableItems, i);\r\n            const newItem = new StoreItemData();\r\n            newItem.id = ids[Math.floor(Math.random() * ids.length)];\r\n            newItem.count = 0;\r\n            newItem.index = i - 200;\r\n            this.video_store_array.push(newItem);\r\n        }\r\n        //\r\n        for (let i = 300; i <= 303; ++i) {\r\n            const ids = this.refreshStoreId(availableItems, i);\r\n            const newItem = new StoreItemData();\r\n            newItem.id = ids[Math.floor(Math.random() * ids.length)];\r\n            newItem.count = 0;\r\n            newItem.index = i - 300;\r\n            this.diamond_store_array.push(newItem);\r\n        }\r\n        //\r\n        this.async_write_data();\r\n    } // end: refresh_store\r\n\r\n    // @\r\n    public async_write_data(callback?: () => void): void {\r\n        gm.data.event_emitter.emit(StoreData.EVENT_DATA_CHANGE);\r\n        super.async_write_data(callback);\r\n    }\r\n}\r\n"]}