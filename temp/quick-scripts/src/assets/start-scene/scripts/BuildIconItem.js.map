{"version":3,"sources":["assets\\start-scene\\scripts\\BuildIconItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Utils } from './Utils';\r\nimport { gm } from './GameManager';\r\nimport { NodePoolItem } from './NodePoolItem';\r\nimport { MapItemDataVO, BuildData } from \"./MapCellCfgData\"\r\nimport { BundleName, BuildTypeEnum, ItemTypeEnum, RewardIdEnum } from './Constants';\r\nimport { Build } from \"../../common/configs/build\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BuildIconItem extends cc.Component {\r\n    @property(cc.Sprite)\r\n    public itemImg: cc.Sprite | null;\r\n\r\n    @property([cc.SpriteFrame])\r\n    private lockSpr: cc.SpriteFrame[] | null;\r\n\r\n    @property(cc.Label)\r\n    private lblLvl: cc.Label | null;\r\n\r\n    @property(cc.Sprite)\r\n    public buildStateIcon: cc.Sprite | null;\r\n\r\n    @property(cc.Node)\r\n    public productNode: cc.Node | null;\r\n\r\n    @property([cc.SpriteFrame])\r\n    private fullImg: cc.SpriteFrame[] | null;\r\n\r\n    @property(cc.Node)\r\n    private tanhao: cc.Node | null;\r\n\r\n    @property(cc.Node)\r\n    private clickNode: cc.Node | null;\r\n\r\n    @property(cc.Node)\r\n    private upgradeNode: cc.Node | null;\r\n\r\n    @property(cc.Sprite)\r\n    private upgradeNodeSpr: cc.Sprite | null;\r\n\r\n    @property(cc.Node)\r\n    private upgradeNodeBar: cc.Node | null;\r\n\r\n    @property(cc.Label)\r\n    private upgradeBarLbl: cc.Label | null;\r\n\r\n    @property(cc.Node)\r\n    private fullNode: cc.Node | null;\r\n\r\n    private _isMove: boolean;\r\n    private _parent: object;\r\n    private _itemData: MapItemDataVO;\r\n    private _buildData: BuildData;\r\n    private _buildCfg: Build;\r\n    private _beginTime: number;\r\n    private _endTime: number;\r\n    private _timeContiner: number;\r\n    private _curTimer: number;\r\n\r\n    private moveItemType: number;\r\n    private lastNum: number;\r\n    private fullTime: number;\r\n\r\n    constructor() {\r\n        super();\r\n        this.itemImg = null;\r\n        this.lockSpr = [];\r\n        this.lblLvl = null;\r\n        this.buildStateIcon = null;\r\n        this.productNode = null;\r\n        this.fullImg = [];\r\n        this.tanhao = null;\r\n        this.clickNode = null;\r\n        this.upgradeNode = null;\r\n        this.upgradeNodeSpr = null;\r\n        this.upgradeNodeBar = null;\r\n        this.upgradeBarLbl = null;\r\n        this.fullNode = null;\r\n        this._isMove = false;\r\n        this._parent = null;\r\n        this._itemData = null;\r\n        this._buildData = null;\r\n        this._buildCfg = null;\r\n        this._beginTime = 0;\r\n        this._endTime = 0;\r\n        this._timeContiner = 0;\r\n        this._curTimer = 0;\r\n        this.moveItemType = 0;\r\n        this.lastNum = 0;\r\n        this.fullTime = 0;\r\n    }\r\n\r\n    // *\r\n    public initData(itemData: MapItemDataVO): void {\r\n        this._itemData = itemData;\r\n        this._buildCfg = gm.data.config_data.getBuildCfgByID(this._itemData.itemID);\r\n        if (this._buildCfg) {\r\n            this.itemImg.node.x = this._buildCfg.xoffset;\r\n            this.itemImg.node.y = this._buildCfg.offset;\r\n            this._buildData = gm.data.mapCell_data.getBuildDataByType(this._buildCfg.buildType);\r\n            this.lblLvl.string = \"\";\r\n            this.buildStateIcon.node.active = false;\r\n            this.productNode.active = false;\r\n\r\n            if (this._buildData) {\r\n                this.lblLvl.string = \"\" + this._buildData.buildLvl;\r\n                if (\"\" == this._buildCfg.anim_name) {\r\n                    const path = \"res/build/\" + this._buildCfg.model;\r\n                    Utils.async_set_sprite_frame(this.itemImg, BundleName.MAP, path);\r\n                    gm.pool.put_children(this.itemImg.node);\r\n                } else {\r\n                    this.itemImg.spriteFrame = null;\r\n                    gm.pool.put_children(this.itemImg.node);\r\n                    gm.pool.async_get(BundleName.MAP, \"prefabs/\" + this._buildCfg.anim_name, NodePoolItem, (t) => {\r\n                        if (0 == this.itemImg.node.childrenCount) {\r\n                            this.itemImg.node.addChild(t.node);\r\n                            t.getComponent(sp.Skeleton).setAnimation(0, \"stay\", true);\r\n                        }\r\n                    });\r\n                }\r\n                this._beginTime = 0;\r\n                this._endTime = 0;\r\n                if (this._buildData.productData) {\r\n                    this.showProductNode();\r\n                }\r\n            }\r\n\r\n            if (this.tanhao) {\r\n                this.tanhao.active = false;\r\n            }\r\n            if (this._buildCfg.buildType == BuildTypeEnum.STALL_TYPE) {\r\n                this.setStallRed();\r\n            }\r\n            this.refreshUpgradeIcon();\r\n        }\r\n    }\r\n\r\n    // *\r\n    protected onEnable(): void {\r\n        gm.ui.on(\"item_move\", this.on_move_item_move, this);\r\n        gm.ui.on(\"item_move_end\", this.on_move_item_hide, this);\r\n        gm.ui.on(\"item_move_hide_upgrade\", this.hideUpgrade, this);\r\n        gm.ui.on(\"build_metarail_change\", this.refreshUpgrade, this);\r\n        gm.ui.on(\"build_show_stateIcon\", this.refreshUpgradeIcon, this);\r\n\r\n        if (this._buildCfg.buildType == BuildTypeEnum.STALL_TYPE) {\r\n            gm.ui.on(\"refresh_red_tips_stall\", this.setStallRed, this);\r\n            this.setStallRed();\r\n\r\n        } else if (this._buildCfg?.buildType == BuildTypeEnum.TOWER_TYPE) {\r\n            gm.ui.on(\"build_show_towerBuff\", this.showDefenseIcon, this);\r\n            this.showDefenseIcon();\r\n        }\r\n\r\n        this.clickNode.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.clickNode.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        this.clickNode.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n        this.clickNode.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this);\r\n        this.upgradeNode.active = false;\r\n        this.fullNode.active = false;\r\n    }\r\n\r\n    // *\r\n    private showDefenseIcon(): void {\r\n        if (this._buildCfg?.buildType != BuildTypeEnum.TOWER_TYPE) return;\r\n        if (gm.data.mapCell_data.getIsHeroTowerBuff()) {\r\n            if (this.itemImg.node.childrenCount > 0 && this.itemImg?.node.getChildByName(\"passive_skill_3\")) {\r\n                return;\r\n            }\r\n            gm.pool.async_get(BundleName.COMMON, \"prefabs/model/passive_skill_3\", NodePoolItem, (data) => {\r\n                if (!data) return;\r\n                if (this.itemImg?.node.childrenCount == 0) {\r\n                    data.node.scale = 0.6;\r\n                    this.itemImg.node.addChild(data.node);\r\n                }\r\n            });\r\n        } else if (this.itemImg.node.childrenCount > 0 && this.itemImg?.node.getChildByName(\"passive_skill_3\")) {\r\n            for (let i = 0; i < this.itemImg.node.childrenCount; i++) {\r\n                if (this.itemImg.node.children[i].name == \"passive_skill_3\") {\r\n                    gm.pool.put(this.itemImg.node.children[i]);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // *\r\n    private showProductNode(): void {\r\n        if (this._buildData?.productData?.productID == 11006) return;\r\n        const productData = this._buildData.productData;\r\n        const currentTime = Math.floor(Date.now() / 1000);\r\n        const productConfig = {\r\n            11002: { animation: \"supplies_gold\", spriteFrame: this.fullImg[0] },\r\n            16001: { animation: \"supplies_wood\", spriteFrame: this.fullImg[1] },\r\n            17001: { animation: \"supplies_mineral\", spriteFrame: this.fullImg[2] },\r\n            22001: { animation: \"supplies_hun\", spriteFrame: this.fullImg[3] },\r\n        };\r\n        this.productNode.active = false;\r\n\r\n        if (currentTime >= productData.fullTime) {\r\n            this._beginTime = 0;\r\n            this._endTime = 0;\r\n            this.productNode.active = true;\r\n            this.productNode.children[0].active = false;\r\n            this.productNode.children[1].active = true;\r\n\r\n            const config = productConfig[productData.productID];\r\n            this.productNode.children[1].children[1].getComponent(cc.Sprite).spriteFrame = config.spriteFrame;\r\n            this.productNode.children[1].getComponent(cc.Animation).play();\r\n        } else {\r\n            if (currentTime >= this._buildData.productData.beginTime + this._buildData.productData.productCd || productData.curNum > 0) {\r\n                this.productNode.active = true;\r\n                this.productNode.children[0].active = true;\r\n                this.productNode.children[1].active = false;\r\n                const config = productConfig[productData.productID];\r\n                this.productNode.children[0].getComponent(cc.Animation).play(config.animation);\r\n            }\r\n            this._beginTime = productData.beginTime;\r\n            this._endTime = productData.fullTime;\r\n            this._curTimer = currentTime;\r\n        }\r\n    }\r\n\r\n    protected update(deltaTime: number): void {\r\n        if (this._beginTime == 0 && this._endTime == 0) return;\r\n        this._timeContiner += deltaTime;\r\n        if (this._timeContiner < 1) return;\r\n        this._timeContiner--;\r\n        this._curTimer++;\r\n        if (this._curTimer >= this._buildData.productData.fullTime) {\r\n            this._curTimer = 0;\r\n            this.showProductNode();\r\n        }\r\n        if (this._curTimer === this._beginTime + this._buildData.productData.productCd) {\r\n            this.showProductNode();\r\n        }\r\n    }\r\n\r\n    private on_move_item_move(event: cc.Vec2, itemType: ItemTypeEnum, itemID: number): void {\r\n        if (!gm.data.mapCell_data.isGuide && itemType == ItemTypeEnum.ITEM_TYPE && !this.upgradeNode.active) {\r\n            this.fullNode.active = false;\r\n            this.upgradeNode.active = false;\r\n            this.upgradeNodeBar.stopAllActions();\r\n            if (2 == this._buildData.buildState) {\r\n                const itemConfig = gm.data.config_data.getItemCfgByID(itemID);\r\n                if (itemConfig) {\r\n                    for (var o in this._buildData.metrailData) {\r\n                        if (itemConfig.type == parseInt(o)) {\r\n                            if (1 <= this._buildData.metrailData[o].cur / this._buildData.metrailData[o].max) {\r\n                                this.fullNode.active = true;\r\n                            } else {\r\n                                this.upgradeNode.active = true;\r\n                            }\r\n\r\n                            this.buildStateIcon.node.active = false;\r\n                            this.moveItemType = itemConfig.type;\r\n\r\n                            const metrailConfig = gm.data.config_data.getItemCfgByID(this._buildData.metrailData[o].id);\r\n                            if (metrailConfig) {\r\n                                Utils.async_set_sprite_frame(this.upgradeNodeSpr, BundleName.MAP, \"res/\" + metrailConfig.icon);\r\n                            }\r\n                            this.upgradeBarLbl.string = this._buildData.metrailData[o].cur + \"/\" + this._buildData.metrailData[o].max;\r\n                            this.upgradeNodeBar.scaleX = this._buildData.metrailData[o].cur / this._buildData.metrailData[o].max;\r\n                            this.lastNum = this._buildData.metrailData[o].cur;\r\n                            return;\r\n                        }\r\n                    }\r\n                    this.moveItemType = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private on_move_item_hide(event: cc.Vec2, itemType: number): void {\r\n        if (this._buildData || 2 == this._buildData.buildState) {\r\n            if (this._buildCfg.buildType == BuildTypeEnum.SEAGOINGBOAT_TYPE) {\r\n                if (0 == itemType) {\r\n                    return;\r\n                }\r\n\r\n                if (this.node._hitTest(event)) {\r\n                    gm.data.mapCell_data.changeCellData(itemType, this._buildData.cellID);\r\n                    if (gm.data.mapCell_data.isGuide) {\r\n                        return;\r\n                    }\r\n                    gm.ui.emit(\"item_children_refresh\", itemType);\r\n                }\r\n            }\r\n\r\n            if (this.fullNode.active) {\r\n                this.fullNode.active = false;\r\n                this.refreshUpgradeIcon();\r\n                return;\r\n            }\r\n\r\n            if (this.upgradeNode.active) {\r\n                if (0 == itemType) {\r\n                    this.upgradeNode.active = false;\r\n                    void this.refreshUpgradeIcon();\r\n                    return;\r\n                }\r\n                if (!this.node._hitTest(event)) {\r\n                    this.upgradeNode.active = false;\r\n                    void this.refreshUpgradeIcon();\r\n                    return;\r\n                }\r\n                for (var a in this._buildData.metrailData) {\r\n                    if (this.moveItemType == parseInt(a)) {\r\n                        return;\r\n                    }\r\n                }\r\n                this.upgradeNode.active = false;\r\n                this.refreshUpgradeIcon();\r\n            }\r\n        }\r\n    }\r\n\r\n    private refreshUpgrade(buildID: number): void {\r\n        if (!this.upgradeNode.active || buildID != this._buildCfg?.buildID) return;\r\n        for (const key in this._buildData?.metrailData) {\r\n            if (this.moveItemType == parseInt(key)) {\r\n                const currentAmount = gm.data.mapCell_data.buildData[this._buildCfg.buildType].metrailData[key].cur;\r\n                if (this.lastNum == currentAmount) {\r\n                    this.upgradeNode.active = false;\r\n                    this.buildStateIcon.node.active = true;\r\n                } else {\r\n                    gm.audio.play_effect(gm.const.AUDIO_165_PUT_PROP_INTO_BUILDING);\r\n                    this.upgradeBarLbl.string = `${currentAmount}/${this._buildData.metrailData[key].max}`;\r\n                    const scale = currentAmount / this._buildData.metrailData[key].max;\r\n                    this.upgradeNodeBar?.runAction(cc.sequence(cc.scaleTo(0.3, scale, 1), cc.delayTime(0.55), cc.callFunc(() => {\r\n                        this.upgradeNode.active = false;\r\n                        this.refreshUpgradeIcon();\r\n                    })));\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        this.upgradeNode.active = false;\r\n        this.refreshUpgradeIcon();\r\n    }\r\n\r\n    private refreshUpgradeIcon(show: boolean = true): void {\r\n        this.buildStateIcon.node.active = false;\r\n        this.fullNode.active = false;\r\n        if (!this._buildCfg) return;\r\n        if (this._buildData.buildLvl > 0) {\r\n            if (this._buildCfg.buildType == BuildTypeEnum.TOWER_TYPE) {\r\n                if (gm.data.config_data.getBuildCfgByID(this._buildCfg.buildID + 1)) {\r\n                    this.buildStateIcon.node.active = true;\r\n                }\r\n            } else {\r\n                if (this._buildCfg.lock == gm.data.mapCell_data.role_build_lock_num) {\r\n                    let canUpgrade = true;\r\n                    for (let i = 0; i < this._buildCfg.consume.length; i++) {\r\n                        if (this._buildData.metrailData[this._buildCfg.consume[i]] < this._buildCfg.num[i]) {\r\n                            canUpgrade = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    this.buildStateIcon.node.active = true;\r\n                    this.buildStateIcon.spriteFrame = canUpgrade ? this.lockSpr[1] : this.lockSpr[0];\r\n                    return;\r\n                }\r\n                const towerData = gm.data.mapCell_data.getBuildDataByType(BuildTypeEnum.TOWER_TYPE);\r\n                if (this._buildData.buildLvl < towerData.buildLvl && gm.data.config_data.getBuildCfgByID(this._buildCfg.buildID + 1)) {\r\n                    this.buildStateIcon.node.active = true;\r\n                }\r\n            }\r\n        } else if (this._buildData?.buildLvl === 0 && gm.data.mapCell_data.role_map_data[this._buildCfg.activeCellID]) {\r\n            const towerData = gm.data.mapCell_data.getBuildDataByType(this._buildCfg.buildType);\r\n            if (this._buildData?.buildType === BuildTypeEnum.TOWER_TYPE && towerData.buildState === 2) {\r\n                this.buildStateIcon.node.active = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    private hideUpgrade(): void {\r\n        if (this.fullNode.active) {\r\n            this.fullNode.active = false;\r\n            this.buildStateIcon.node.active = true;\r\n            return;\r\n        }\r\n        if (this.upgradeNode.active) {\r\n            this.upgradeNode.active = false;\r\n            this.buildStateIcon.node.active = true;\r\n        }\r\n    }\r\n\r\n    private setStallRed(): void {\r\n        this.tanhao.active = this._buildData && this._buildData.buildLvl && gm.data.store_data.isFree;\r\n    }\r\n\r\n    private onTouchStart(): void {\r\n        this._isMove = false;\r\n        if (this._buildCfg.buildType != BuildTypeEnum.SEAGOINGBOAT_TYPE &&\r\n            this._buildCfg.buildType != BuildTypeEnum.WHARFTAX_TYPE &&\r\n            1 != gm.data.fight_temp_data.open_battle_panel_state) {\r\n            if (!gm.data.mapCell_data.isGuide) {\r\n                this._buildData.buildLvl;\r\n            }\r\n        }\r\n    }\r\n\r\n    private onTouchMove(event: cc.Touch): void {\r\n        if (this._buildCfg.buildType != BuildTypeEnum.SEAGOINGBOAT_TYPE &&\r\n            this._buildCfg.buildType != BuildTypeEnum.WHARFTAX_TYPE &&\r\n            1 != gm.data.fight_temp_data.open_battle_panel_state) {\r\n\r\n            if (!(gm.data.mapCell_data.isGuide || this._buildData.buildLvl < 1)) {\r\n                this._isMove = true;\r\n                if (0 < this.node.opacity) {\r\n                    this.node.opacity = 0;\r\n                }\r\n                gm.ui.emit(\"item_move\", event.getLocation(), this._itemData.itemType, this._itemData.itemID);\r\n            }\r\n        }\r\n    }\r\n\r\n    public playScaleAnim(): void {\r\n        this.node.stopAllActions();\r\n        this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(0.4, 0.75), cc.scaleTo(0.4, 0.95))));\r\n    }\r\n\r\n    public stopScaleAnim(): void {\r\n        this.node.stopAllActions();\r\n        this.node.scale = 1;\r\n    }\r\n\r\n    private onTouchEnd(): void {\r\n        if (this._buildData.buildLvl < 1 || this._buildCfg.buildType != BuildTypeEnum.SEAGOINGBOAT_TYPE) {\r\n            this.node.opacity = 255;\r\n            gm.ui.mapMainUI.hideMoveBuildItemNode();\r\n            this.onClickBuild();\r\n        }\r\n    }\r\n\r\n    private onTouchCancel(event: cc.Touch): void {\r\n        if (this._buildCfg.buildType != BuildTypeEnum.SEAGOINGBOAT_TYPE &&\r\n            this._buildCfg.buildType != BuildTypeEnum.WHARFTAX_TYPE &&\r\n            1 != gm.data.fight_temp_data.open_battle_panel_state) {\r\n\r\n            if (!(gm.data.mapCell_data.isGuide || this._buildData.buildLvl < 1)) {\r\n                this.node.opacity = 255;\r\n                gm.ui.mapMainUI.hideMoveBuildItemNode();\r\n                gm.ui.emit(\"item_move_end\", event.getLocation(), this._itemData.cellID);\r\n            }\r\n        }\r\n    }\r\n\r\n    private onClickBuild(): void {\r\n        if (this._buildCfg.buildLv <= 0 || gm.data.mapCell_data.isGuide) return;\r\n        const buildActions = {\r\n            [BuildTypeEnum.BARRACKS_TYPE]: () => gm.ui.async_show_module(gm.const.BARRACKS_LIST),\r\n            [BuildTypeEnum.STALL_TYPE]: () => gm.ui.async_show_module(gm.const.Store),\r\n            [BuildTypeEnum.GARRISION_TYPE]: () => gm.ui.async_show_module(gm.const.DEFENSE),\r\n        };\r\n        const action = buildActions[this._buildCfg.buildType];\r\n        if (action) {\r\n            action();\r\n        } else {\r\n            gm.ui.set_module_args(gm.const.BUILDINFO.key, this._buildCfg.buildID);\r\n            gm.ui.async_show_module(gm.const.BUILDINFO);\r\n        }\r\n    }\r\n\r\n    protected onClickShip(event: cc.Touch, shipID: string): void {\r\n        const id = parseInt(shipID);\r\n        gm.ui.set_module_args(gm.const.GOBATTLE.key, id);\r\n        gm.ui.async_show_module(gm.const.GOBATTLE);\r\n    }\r\n\r\n    protected onClickItem(): void {\r\n        this._buildCfg.buildType == BuildTypeEnum.SEAGOINGBOAT_TYPE && gm.data.mapCell_data.role_compose_total_times < 9 ||\r\n            gm.ui.mapMainUI.showBuildUpgrade(this._buildData.buildID, this._buildData.cellID);\r\n    }\r\n\r\n    protected onClickCoin(): void {\r\n        gm.data.mapCell_data.getBuildProduct(this._buildCfg.buildType);\r\n        this.showProductNode();\r\n        if (11002 == this._buildData.productData.productID) {\r\n            gm.ui.show_coin_fly(RewardIdEnum.GOLD, this.productNode.convertToWorldSpaceAR(cc.Vec3.ZERO));\r\n        }\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        this.clickNode?.targetOff(this);\r\n        gm.ui.off(\"item_move\", this.on_move_item_move, this);\r\n        gm.ui.off(\"item_move_end\", this.on_move_item_hide, this);\r\n        gm.ui.off(\"item_move_hide_upgrade\", this.hideUpgrade, this);\r\n        gm.ui.off(\"build_metarail_change\", this.refreshUpgrade, this);\r\n        gm.ui.off(\"build_show_stateIcon\", this.refreshUpgradeIcon, this);\r\n        if (this._buildCfg?.buildType == BuildTypeEnum.STALL_TYPE) {\r\n            gm.ui.off(\"refresh_red_tips_stall\", this.setStallRed, this);\r\n        } else if (this._buildCfg?.buildType == BuildTypeEnum.TOWER_TYPE) {\r\n            gm.ui.off(\"build_show_towerBuff\", this.showDefenseIcon, this);\r\n        }\r\n    }\r\n}\r\n"]}