{"version":3,"sources":["assets\\start-scene\\scripts\\BuildInfo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// +-+\r\nimport { Utils } from './Utils';\r\nimport { PropTypeEnum, BundleName, BuildTypeEnum } from './Constants';\r\nimport { gm } from './GameManager';\r\nimport { Build } from \"../../common/configs/build\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass BuildInfo extends cc.Component {\r\n    @property(cc.Label)\r\n    private lblBuildName: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private lblBuildLvl: cc.Label | null = null;\r\n\r\n    @property([cc.Node])\r\n    private attrNode: cc.Node[] = [];\r\n\r\n    @property(cc.Node)\r\n    private btnGet: cc.Node | null = null;\r\n\r\n    @property(cc.Label)\r\n    private lblnum: cc.Label | null = null;\r\n\r\n    @property(cc.Sprite)\r\n    private productIconSpr: cc.Sprite | null = null;\r\n\r\n    @property([cc.SpriteFrame])\r\n    private btnSprframeList: cc.SpriteFrame[] = [];\r\n\r\n    private _buildCfg: Build | null = null;\r\n    private _buildID: number = 0;\r\n    private _reciveTime: number = 0;\r\n    private _curProductNum: number = 0;\r\n    private timeContainer: number = 0;\r\n\r\n    protected onEnable(): void {\r\n        gm.audio.play_effect(gm.const.AUDIO_8_BUILDING_OPEN_CLOSE);\r\n        this._buildID = gm.ui.get_module_args(gm.const.BUILDINFO.key) as number;\r\n        this._buildCfg = gm.data.config_data.getBuildCfgByID(this._buildID);\r\n        if (this._buildCfg) {\r\n            this.lblBuildName.string = this._buildCfg.buildName;\r\n            this.lblBuildLvl.string = \"  Lv.\" + this._buildCfg.buildLv;\r\n            this.refreshPanel();\r\n        }\r\n    }\r\n\r\n    private refreshPanel(): void {\r\n        for (let index = 0; index < this.attrNode.length; index++) {\r\n            this.attrNode[index].active = false;\r\n        }\r\n        this.btnGet.active = false;\r\n        if (0 < this._buildCfg.currency && 2 <= this._buildCfg.rate.length) {\r\n            const cfgByID = gm.data.config_data.getItemCfgByID(this._buildCfg.currency);\r\n            if (cfgByID) {\r\n                this.attrNode[0].active = true;\r\n                this.attrNode[0].children[1].getComponent(cc.Label).string = Utils.format_time(this._buildCfg.rate[1]);\r\n                this.attrNode[0].children[2].getComponent(cc.Label).string = \"Sản xuất \" + this._buildCfg.rate[0] + \" \" + cfgByID.name;\r\n                Utils.async_set_sprite_frame(this.attrNode[0].children[0].getComponent(cc.Sprite), BundleName.COMMON, \"res/attrIcon/Perk_Time\");\r\n                this.attrNode[1].active = true;\r\n                this.attrNode[1].children[1].getComponent(cc.Label).string = \"0/\" + this._buildCfg.capacity;\r\n                this.attrNode[1].children[2].getComponent(cc.Label).string = \"Lưu trữ tối đa\";\r\n                let currency = this._buildCfg.currency;\r\n\r\n                if (cfgByID.type == PropTypeEnum.WOOD_TYPE) {\r\n                    currency = 11004;\r\n                } else if (cfgByID.type == PropTypeEnum.IRON_TYPE) {\r\n                    (currency = 11005);\r\n                }\r\n\r\n                Utils.async_set_sprite_frame(this.attrNode[1].children[0].getComponent(cc.Sprite), BundleName.COMMON, \"res/attrIcon/\" + currency);\r\n                this.attrNode[2].active = true;\r\n                this.attrNode[2].children[1].getComponent(cc.Label).string = this._buildCfg.hp + \"\";\r\n                this.attrNode[2].children[2].getComponent(cc.Label).string = \"Sinh mạng\";\r\n                Utils.async_set_sprite_frame(this.attrNode[2].children[0].getComponent(cc.Sprite), BundleName.COMMON, \"res/attrIcon/Perk_HP\");\r\n                this._reciveTime = 0;\r\n                this._curProductNum = 0;\r\n                const productData = gm.data.mapCell_data.buildData[this._buildCfg.buildType].productData;\r\n\r\n                if (productData) {\r\n                    if (0 == productData.fullTime) {\r\n                        this._curProductNum = productData.curNum;\r\n                    } else if (productData.fullTime > Math.floor(Date.now() / 1e3)) {\r\n                        if (productData.beginTime + productData.productCd > Math.floor(Date.now() / 1e3)) {\r\n                            this._curProductNum = productData.curNum;\r\n                            this._reciveTime = productData.beginTime + productData.productCd - Math.floor(Date.now() / 1e3);\r\n                        } else {\r\n                            const _number = Math.floor((Math.floor(Date.now() / 1e3) - productData.beginTime) / productData.productCd);\r\n                            this._curProductNum = _number * productData.productNum;\r\n                            this._reciveTime = productData.beginTime + (_number + 1) * productData.productCd - Math.floor(Date.now() / 1e3);\r\n                        }\r\n                    } else {\r\n                        this._curProductNum = productData.maxNum;\r\n                    }\r\n                }\r\n\r\n                if (this._buildCfg.buildType != BuildTypeEnum.WHARFTAX_TYPE) {\r\n                    this.btnGet.active = true;\r\n                    this.btnGet.children[0].getComponent(cc.Sprite).spriteFrame = 0 < this._curProductNum ? this.btnSprframeList[0] : this.btnSprframeList[1];\r\n                    this.btnGet.children[0].getComponent(cc.Button).interactable = 0 < this._curProductNum;\r\n                    Utils.async_set_sprite_frame(this.productIconSpr, BundleName.MAP, \"res/\" + this._buildCfg.currency);\r\n                    this.attrNode[1].children[1].getComponent(cc.Label).string = this._curProductNum + \"/\" + this._buildCfg.capacity;\r\n                    this.lblnum.string = \"\" + this._curProductNum;\r\n\r\n                } else {\r\n                    const roleBarrelData = gm.data.mapCell_data.roleBarrelData;\r\n                    if (roleBarrelData) {\r\n                        this.attrNode[1].children[1].getComponent(cc.Label).string = roleBarrelData.curBarrelNum + \"/\" + this._buildCfg.capacity;\r\n                        if (roleBarrelData.curBarrelNum < roleBarrelData.maxBarrelNum && Math.floor(Date.now() / 1e3) < roleBarrelData.nextFreeBarrelTime) {\r\n                            this._reciveTime = roleBarrelData.nextFreeBarrelTime - Math.floor(Date.now() / 1e3);\r\n                        }\r\n                    }\r\n                    this.attrNode[1].children[1].getComponent(cc.Label).string = gm.data.mapCell_data.roleBarrelData.curBarrelNum + \"/\" + gm.data.mapCell_data.roleBarrelData.maxBarrelNum;\r\n                }\r\n            }\r\n\r\n        } else if (this._buildCfg.buildType == BuildTypeEnum.TOWER_TYPE) {\r\n            this._reciveTime = 0;\r\n            this.attrNode[0].active = 0 < this._buildCfg.hp;\r\n            Utils.async_set_sprite_frame(this.attrNode[0].children[0].getComponent(cc.Sprite), BundleName.COMMON, \"res/attrIcon/Perk_HP\");\r\n            this.attrNode[0].children[1].getComponent(cc.Label).string = this._buildCfg.hp + \"\";\r\n            this.attrNode[0].children[2].getComponent(cc.Label).string = \"Sinh mạng\";\r\n            this.attrNode[1].active = 0 < this._buildCfg.attack;\r\n            Utils.async_set_sprite_frame(this.attrNode[1].children[0].getComponent(cc.Sprite), BundleName.COMMON, \"res/attrIcon/Perk_Defense\");\r\n            this.attrNode[1].children[1].getComponent(cc.Label).string = this._buildCfg.attack + \"\";\r\n            this.attrNode[1].children[2].getComponent(cc.Label).string = \"Phòng thủ\";\r\n            this.attrNode[2].active = 0 < this._buildCfg.defense;\r\n            Utils.async_set_sprite_frame(this.attrNode[2].children[0].getComponent(cc.Sprite), BundleName.COMMON, \"res/attrIcon/Perk_Attackers\");\r\n            this.attrNode[2].children[1].getComponent(cc.Label).string = this._buildCfg.defense + \"\";\r\n            this.attrNode[2].children[2].getComponent(cc.Label).string = \"Tấn công\";\r\n        }\r\n\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        if (0 < this._reciveTime) {\r\n            this.timeContainer += dt;\r\n            if (1 <= this.timeContainer) {\r\n                --this.timeContainer;\r\n                this._reciveTime--;\r\n                if (this._reciveTime <= 0) {\r\n                    if (this._buildCfg.buildType != BuildTypeEnum.WHARFTAX_TYPE) {\r\n                        this._curProductNum = 0;\r\n                        const productData = gm.data.mapCell_data.buildData[this._buildCfg.buildType].productData;\r\n                        if (productData) {\r\n                            if (0 == productData.fullTime) {\r\n                                this._curProductNum = productData.curNum;\r\n                            } else if (productData.fullTime > Math.floor(Date.now() / 1e3)) {\r\n                                if (productData.beginTime + productData.productCd > Math.floor(Date.now() / 1e3)) {\r\n                                    this._curProductNum = productData.curNum;\r\n                                    this._reciveTime = productData.beginTime + productData.productCd - Math.floor(Date.now() / 1e3);\r\n                                } else {\r\n                                    const _number = Math.floor((Math.floor(Date.now() / 1e3) - productData.beginTime) / productData.productCd);\r\n                                    this._curProductNum = _number * productData.productNum;\r\n                                    this._reciveTime = productData.beginTime + (_number + 1) * productData.productCd - Math.floor(Date.now() / 1e3);\r\n                                }\r\n\r\n                            } else {\r\n                                this._curProductNum = productData.maxNum;\r\n                            }\r\n                        }\r\n                        this.attrNode[1].children[1].getComponent(cc.Label).string = this._curProductNum + \"/\" + this._buildCfg.capacity;\r\n                        this.lblnum.string = \"\" + this._curProductNum;\r\n                    } else {\r\n                        this._curProductNum = 0;\r\n                        const roleBarrelData = gm.data.mapCell_data.roleBarrelData;\r\n                        if (roleBarrelData) {\r\n                            this.attrNode[1].children[1].getComponent(cc.Label).string = roleBarrelData.curBarrelNum + \"/\" + this._buildCfg.capacity;\r\n                            if (roleBarrelData.curBarrelNum < roleBarrelData.maxBarrelNum && Math.floor(Date.now() / 1e3) < roleBarrelData.nextFreeBarrelTime) {\r\n                                this._reciveTime = roleBarrelData.nextFreeBarrelTime - Math.floor(Date.now() / 1e3);\r\n                            }\r\n                        }\r\n                    }\r\n                    if (0 < this._reciveTime) {\r\n                        this.attrNode[0].children[1].getComponent(cc.Label).string = Utils.format_time(this._reciveTime);\r\n                    } else {\r\n                        this.attrNode[0].children[1].getComponent(cc.Label).string = Utils.format_time(this._buildCfg.rate[1]);\r\n                    }\r\n                } else {\r\n                    this.attrNode[0].children[1].getComponent(cc.Label).string = Utils.format_time(this._reciveTime);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    private onClickClose(): void {\r\n        gm.audio.play_effect(gm.const.AUDIO_8_BUILDING_OPEN_CLOSE);\r\n        gm.ui.async_hide_module(gm.const.BUILDINFO);\r\n    }\r\n\r\n    private onClickGet(): void {\r\n        gm.data.mapCell_data.getBuildProduct(this._buildCfg?.buildType);\r\n        this.refreshPanel();\r\n        gm.ui.show_coin_fly(this._buildCfg?.currency, this.node.convertToWorldSpaceAR(cc.Vec3.ZERO));\r\n        gm.ui.emit(\"item_children_refresh\", gm.data.mapCell_data.buildData[this._buildCfg.buildType].cellID);\r\n    }\r\n\r\n    protected onDisable(): void { }\r\n}\r\n\r\nexport default BuildInfo;"]}