{"version":3,"sources":["assets\\start-scene\\scripts\\MainMapUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { gm } from \"./GameManager\";\r\nimport { GameModule } from \"./GameModule\";\r\nimport { MvcEventDispatcher } from \"./MvcEventDispatcher\";\r\nimport { Item } from \"../../buy/scripts/Item\";\r\nimport {\r\n    BuildTypeEnum,\r\n    SpecialEnum,\r\n    BundleName,\r\n    ItemTypeEnum,\r\n    PropTypeEnum,\r\n    RewardIdEnum,\r\n    SetItemNumEnum,\r\n} from \"./Constants\";\r\nimport { TaskEntry } from \"./TaskEntry\";\r\nimport { TaskMainEntry } from \"./TaskMainEntry\";\r\nimport { DataEvent } from \"./DataEvent\";\r\nimport AutoCompose from \"./AutoCompose\";\r\nimport { TaskConditionType } from \"./TaskData\";\r\nimport { NodePoolItem } from \"./NodePoolItem\";\r\nimport { LadderEntry } from \"./LadderEntry\";\r\nimport { TempData } from \"./TempData\";\r\nimport { SignEntry } from \"./SignEntry\";\r\nimport { MailEntry } from \"./MailEntry\";\r\nimport { GuideGiftEntry } from \"./GuideGiftEntry\";\r\nimport { AddDesktopEntry } from \"./AddDesktopEntry\";\r\nimport { MapItemDataVO } from \"./MapCellCfgData\";\r\nimport { Utils } from \"./Utils\";\r\nimport { ReportData } from \"./NetUtils\";\r\nimport WaterBarrelItem from \"./WaterBarrelItem\";\r\nimport HandAnim from \"./HandAnim\";\r\nimport { MoreEntry } from \"./MoreEntry\";\r\nimport { MapBuildUpgrade } from \"./MapBuildUpgrade\";\r\n//\r\nimport SpecialGift from \"./SpecialGift\";\r\nimport ShowGift from \"./ShowGift\";\r\nimport ShipMgr from \"./ShipMgr\";\r\nimport LockCloudArea from \"./LockCloudArea\";\r\nimport BarrelMgr from \"./BarrelMgr\";\r\nimport MainMapItem from \"./MainMapItem\";\r\nimport BuildIconItem from \"./BuildIconItem\";\r\nimport { MapCell } from \"../../common/configs/mapcell\";\r\nimport Sign from \"../../sign/scripts/Sign\";\r\nimport { EventScriptManager } from \"./EventScriptManager\";\r\n\r\ninterface TypeBuildMeatril {\r\n    max: number;\r\n    id: number;\r\n}\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MainMapUI extends GameModule {\r\n    @property(cc.Node)\r\n    public mapContent: cc.Node | null = null;\r\n\r\n    @property(cc.Prefab)\r\n    public mapItemPrefab: cc.Prefab | null = null;\r\n\r\n    @property(cc.Node)\r\n    private task_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private task_main_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    public ladder_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private sign_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private guide_gift_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private vip_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private super_recruit_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private lucky_wheel_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private record_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private more_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private shop_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private mail_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private add_desktop_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private nextCompTimes: cc.Node | null = null;\r\n\r\n    @property(cc.Prefab)\r\n    public propItemPrefab: cc.Prefab | null = null;\r\n\r\n    @property(cc.Prefab)\r\n    public buildItemPrefab: cc.Prefab | null = null;\r\n\r\n    @property(cc.Node)\r\n    private caseOceanNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private moveItemNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private roleBuildUpgrade: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    public barrelNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    public ship: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    public roleGuideBuildUpgrade: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private roleGuideBuildUpgradeBg: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private roleGuideUpgradeBtn: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private barrelParentNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private roleGuideBuildMertrailNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private buildUpAnim: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private mask: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private composeAnim: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    public diamond_icon_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    public gold_icon_node: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    public handAnim: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    public roleBuildAnimNode: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private mapUI: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private treeLock: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private cavesLock: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private red_btn_book: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private giftBar: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private specialGiftBar: cc.Node | null = null;\r\n\r\n    @property(cc.Node)\r\n    private lockAreaCloudList: cc.Node | null = null;\r\n\r\n    @property(AutoCompose)\r\n    public autoCompose: AutoCompose | null = null;\r\n\r\n    private _mapCfgList: MapCell[] = [];\r\n    private _row: number = 20;\r\n    private _col: number = 22;\r\n    private _mapDataList: any[] = [];\r\n    private _widthHalf: number = 60;\r\n    private _heightHalf: number = 95;\r\n    private _isDragToBorderMoveSpeed: cc.Vec2 = cc.Vec2.ZERO;\r\n    private _touch_position: cc.Vec2 = cc.Vec2.ZERO;\r\n    private isShowSign: boolean = false;\r\n    private isfightEnd: boolean = false;\r\n    private moveToPos: cc.Vec2 = new cc.Vec2(0, 0);\r\n    private isMoving: boolean = false;\r\n    private followSpeed: number = 200;\r\n    private _map_size: cc.Vec2 = new cc.Vec2(1500, 1500);\r\n    private delayTime: number = 0;\r\n    private curTimer: number = 0;\r\n    private isBeginDelayTime: boolean = false;\r\n    private guideID: number = 0;\r\n    private guideScaleNode: /* cc.Component | null = null; */ BuildIconItem | null =\r\n        null;\r\n    private _nextOpenCell: any | null = null;\r\n    private _buildID: number = 0;\r\n    private _buildMeatril: TypeBuildMeatril[] = [];\r\n    private _isLockMoveMap: boolean = false;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    private getBuildUpgradeCb(t: { data: number }): void {\r\n        const buildData = gm.data.mapCell_data.buildData[t.data];\r\n        MvcEventDispatcher.dispatchEvent(\r\n            DataEvent.GUIDENEWERGUIDE,\r\n            new DataEvent(\r\n                DataEvent.GUIDE_CLICK_BUILD_UPGRAE_POS_SUC,\r\n                this.mapContent\r\n                    ?.getChildByName(buildData.cellID.toString())\r\n                    .getComponent(MainMapItem)\r\n                    .mapBuildNode.children[0].getComponent(\r\n                        BuildIconItem\r\n                    ).buildStateIcon.node,\r\n                this.showBuildUpgrade.bind(\r\n                    this,\r\n                    buildData.buildID,\r\n                    buildData.cellID\r\n                )\r\n            )\r\n        );\r\n    }\r\n\r\n    private getBarrelCb(): void {\r\n        MvcEventDispatcher.dispatchEvent(\r\n            DataEvent.GUIDENEWERGUIDE,\r\n            new DataEvent(\r\n                DataEvent.GUIDE_CLICK_BARREL_POS_SUC,\r\n                this.barrelNode.getComponent(BarrelMgr).guideNode,\r\n                this.barrelNode\r\n                    .getComponent(BarrelMgr)\r\n                    .onClickBuy.bind(this.barrelNode.getComponent(BarrelMgr))\r\n            )\r\n        );\r\n    }\r\n\r\n    private getBuildUpCb(): void {\r\n        MvcEventDispatcher.dispatchEvent(\r\n            DataEvent.GUIDENEWERGUIDE,\r\n            new DataEvent(\r\n                DataEvent.GUIDE_CLICK_BUILD_UP_POS_SUC,\r\n                this.roleGuideBuildUpgrade.children[1].children[2],\r\n                this.onClickGuideUplvl.bind(this)\r\n            )\r\n        );\r\n    }\r\n\r\n    private guideDelItem(num: number): void {\r\n        const itemNode = this.mapContent?.getChildByName(num.toString());\r\n        if (itemNode) {\r\n            itemNode.getComponent(MainMapItem).delItemNode();\r\n        }\r\n    }\r\n\r\n    private getClickGoFightCb(): void {\r\n        MvcEventDispatcher.dispatchEvent(\r\n            DataEvent.GUIDENEWERGUIDE,\r\n            new DataEvent(\r\n                DataEvent.GUIDE_CLICK_BEGIN_FIGHT_POS_SUC,\r\n                this.ship?.children[0].children[0].getChildByName(\r\n                    \"fightBtn\"\r\n                ).children[1],\r\n                this.ship?.children[0]\r\n                    .getComponent(ShipMgr)\r\n                    .onClickShip.bind(\r\n                        this.ship.children[0].getComponent(ShipMgr),\r\n                        null,\r\n                        1\r\n                    )\r\n            )\r\n        );\r\n    }\r\n\r\n    public revenge(key: string): void {\r\n        const shipComponent = this.ship.children[0].getComponent(ShipMgr);\r\n        if (shipComponent) {\r\n            shipComponent.revenge(key);\r\n        }\r\n    }\r\n\r\n    private putAllItemToMapAuto(): void {\r\n        const itemsToPut = gm.data.mapCell_data.putAllItemToMapCell();\r\n        for (; 0 < gm.data.mapCell_data._needRefreshCellList.length; ) {\r\n            var e = gm.data.mapCell_data._needRefreshCellList.shift();\r\n            gm.ui.emit(\"item_children_refresh\", e);\r\n        }\r\n\r\n        if (\r\n            0 < this.ship.childrenCount &&\r\n            this.ship.children[0].getComponent(ShipMgr)\r\n        ) {\r\n            this.ship.children[0].getComponent(ShipMgr).refreshItem();\r\n        }\r\n\r\n        for (let a = 0; a < itemsToPut.length; a++) {\r\n            gm.ui.emit(\"set_new_item_alpha\", itemsToPut[a]);\r\n        }\r\n    }\r\n\r\n    public showGiftBar(itemId: number, cellId: number): void {\r\n        const itemConfig = gm.data.config_data.getItemCfgByID(itemId);\r\n        if (!itemConfig) return;\r\n        if (\r\n            itemConfig.type == 13 ||\r\n            itemConfig.type == 14 ||\r\n            itemConfig.type == 19\r\n        ) {\r\n            this.specialGiftBar.scale = 1 - 0.5 * (this.mapContent.scale - 1);\r\n            if (this.specialGiftBar?.active) {\r\n                this.specialGiftBar.active = false;\r\n            }\r\n\r\n            this.specialGiftBar\r\n                .getComponent(SpecialGift)\r\n                .initData(itemId, cellId);\r\n            this.specialGiftBar.active = true;\r\n        } else {\r\n            this.giftBar.scale = 1 - 0.5 * (this.mapContent.scale - 1);\r\n            if (this.giftBar?.active) {\r\n                this.giftBar.active = false;\r\n            }\r\n\r\n            this.giftBar.getComponent(ShowGift).initData(itemId, cellId);\r\n            this.giftBar.active = true;\r\n        }\r\n    }\r\n\r\n    private getCookie(name: string) {\r\n        const cookies = document.cookie.split(\"; \");\r\n        for (let cookie of cookies) {\r\n            const [key, value] = cookie.split(\"=\");\r\n            if (key === name) return value;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private deleteCookie(name: string): void {\r\n        document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/`;\r\n    }\r\n\r\n    private checkPaymentStatus(): void {\r\n        const storedPrice = localStorage.getItem(\"reward_price\");\r\n        const paymentStatus = this.getCookie(\"payment_status\");\r\n        if (paymentStatus === \"success\" && storedPrice) {\r\n            console.log(\"Thanh toán thành công!!!!!\");\r\n            this.deleteCookie(\"payment_status\");\r\n\r\n            const parsedData = JSON.parse(storedPrice);\r\n            localStorage.setItem(\"reward_price\", null);\r\n            console.log(parsedData);\r\n\r\n            ReportData.instance.report_once_point(10833);\r\n            const data = parsedData;\r\n            const rewardIds: number[] = [];\r\n            const rewardNums: number[] = [];\r\n            const multiplier = 1;\r\n\r\n            for (let i = 0; i < data.reward_array.length; i++) {\r\n                const reward = data.reward_array[i];\r\n                rewardIds.push(reward.reward_id);\r\n                rewardNums.push(reward.reward_num * multiplier);\r\n\r\n                if (reward.reward_id >= 23001 && reward.reward_id <= 23099) {\r\n                    gm.data.mapCell_data.reelUnlcokHero(reward.reward_id);\r\n                } else if (reward.reward_id == RewardIdEnum.GOLD) {\r\n                    gm.data.mapCell_data.setAddGameCoin(\r\n                        SetItemNumEnum.ADD_ITEM_TYPE,\r\n                        reward.reward_num * multiplier\r\n                    );\r\n                    gm.ui.show_coin_fly(\r\n                        RewardIdEnum.GOLD,\r\n                        this.node.convertToWorldSpaceAR(cc.Vec3.ZERO)\r\n                    );\r\n                } else if (reward.reward_id == RewardIdEnum.DIAMOND) {\r\n                    gm.data.mapCell_data.setAddGameDiamond(\r\n                        SetItemNumEnum.ADD_ITEM_TYPE,\r\n                        reward.reward_num * multiplier\r\n                    );\r\n                    gm.ui.show_coin_fly(\r\n                        RewardIdEnum.DIAMOND,\r\n                        this.node.convertToWorldSpaceAR(cc.Vec3.ZERO)\r\n                    );\r\n                } else if (reward.reward_id == RewardIdEnum.BARREL) {\r\n                    gm.data.mapCell_data.addBarrelNum(\r\n                        reward.reward_num * multiplier\r\n                    );\r\n                } else {\r\n                    const itemIds: number[] = [];\r\n                    for (let j = 0; j < reward.reward_num * multiplier; j++) {\r\n                        itemIds.push(reward.reward_id);\r\n                    }\r\n                    gm.data.mapCell_data.addWareHouseList(itemIds);\r\n                }\r\n            }\r\n\r\n            gm.ui.set_module_args(gm.const.GETREWARDOP.key, {\r\n                idList: rewardIds,\r\n                numList: rewardNums,\r\n            });\r\n            gm.ui.async_show_module(gm.const.GETREWARDOP);\r\n            data.state = multiplier == 1 ? 2 : 3;\r\n            gm.data.sign_data.sign_state = data.state;\r\n            gm.data.sign_data.async_write_data();\r\n        }\r\n    }\r\n    protected onLoad(): void {\r\n        this._mapCfgList = gm.data.config_data.getMapCellCfg();\r\n        this.initMap();\r\n        this.checkPaymentStatus();\r\n        if (!gm.data.mapCell_data.isGuide) {\r\n            this.popup_offline_op(() => {\r\n                this.popup_sign(() => {\r\n                    gm.ui.show_panel(gm.const.Mail);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    private popup_sign(callback: () => void): void {\r\n        this.isShowSign = 0 == gm.data.sign_data.sign_state;\r\n        if (this.isShowSign) {\r\n            this.isShowSign = false;\r\n            const call = (param: Sign) => {\r\n                if (param == gm.ui.sign) {\r\n                    gm.ui.off(gm.ui.MODULE_HIDE, call, this);\r\n                    callback();\r\n                }\r\n            };\r\n            gm.ui.on(gm.ui.MODULE_HIDE, call, this);\r\n            gm.ui.async_show_module(gm.const.Sign);\r\n        } else {\r\n            callback();\r\n        }\r\n    }\r\n\r\n    private popup_offline_op(callback: () => void): void {\r\n        if (TempData.isShowOffline) {\r\n            TempData.isShowOffline = false;\r\n            const call = (param) => {\r\n                if (param == gm.ui.offline_op) {\r\n                    gm.ui.off(gm.ui.MODULE_HIDE, call, this);\r\n                    callback();\r\n                }\r\n            };\r\n            gm.ui.on(gm.ui.MODULE_HIDE, call, this);\r\n            gm.ui.async_show_module(gm.const.OFFLINEOP);\r\n        } else {\r\n            callback();\r\n        }\r\n    }\r\n\r\n    private addListener() {\r\n        const self = this;\r\n        gm.ui.on(\"item_move\", this.on_move_item_move, this);\r\n        gm.ui.on(\"item_move_end\", this.on_move_item_hide, this);\r\n        gm.ui.on(\"item_children_refresh\", this.on_move_item_refresh, this);\r\n        gm.ui.on(\"item_unlock_refresh\", this.on_item_unlock_refresh, this);\r\n        gm.ui.on(\"compostimeChange\", this.showNextCellNode, this);\r\n        gm.ui.on(\"unLockNewArea\", this.unLockNewArea, this);\r\n        gm.ui.on(\"build_upgrade\", this.refreshBuildItem, this);\r\n        gm.ui.on(\"item_compose_time_change\", this.composeTimesChange, this);\r\n        gm.ui.on(\"build_metarail_change\", this.showBuildMertarilFull, this);\r\n        gm.ui.on(\"guide_del_item\", this.guideDelItem, this);\r\n        gm.ui.on(\"bookRedStatus\", this.refreshRedBtnBook, this);\r\n        gm.ui.on(\"ship_goods_change\", this.putAllItemToMapAuto, this);\r\n\r\n        MvcEventDispatcher.getInstance(\r\n            DataEvent.GUIDENEWERGUIDE\r\n        ).addEventListener(\r\n            DataEvent.GUIDE_CLICK_BUILD_UPGRAE_POS,\r\n            this.getBuildUpgradeCb,\r\n            this\r\n        );\r\n\r\n        MvcEventDispatcher.getInstance(\r\n            DataEvent.GUIDENEWERGUIDE\r\n        ).addEventListener(\r\n            DataEvent.GUIDE_CLICK_BARREL_POS,\r\n            this.getBarrelCb,\r\n            this\r\n        );\r\n\r\n        MvcEventDispatcher.getInstance(\r\n            DataEvent.GUIDENEWERGUIDE\r\n        ).addEventListener(\r\n            DataEvent.GUIDE_CLICK_BUILD_UP_POS,\r\n            this.getBuildUpCb,\r\n            this\r\n        );\r\n\r\n        MvcEventDispatcher.getInstance(\r\n            DataEvent.GUIDENEWERGUIDE\r\n        ).addEventListener(\r\n            DataEvent.GUIDE_CLICK_BEGIN_FIGHT_POS,\r\n            this.getClickGoFightCb,\r\n            this\r\n        );\r\n\r\n        this.node.on(\r\n            cc.Node.EventType.TOUCH_START,\r\n            () => {\r\n                self.roleBuildUpgrade.active = false;\r\n                self.setMapUiShow(true);\r\n            },\r\n            this\r\n        );\r\n\r\n        this.node.on(\r\n            cc.Node.EventType.TOUCH_MOVE,\r\n            (event: cc.Event.EventTouch) => {\r\n                if (!gm.data.mapCell_data.isGuide) {\r\n                    if (event.getTouches().length >= 2) {\r\n                        const touch1 = event.getTouches()[0];\r\n                        const touch2 = event.getTouches()[1];\r\n\r\n                        const delta1 = touch1.getDelta();\r\n                        const delta2 = touch2.getDelta();\r\n                        const pos1 = touch1.getLocation();\r\n                        const pos2 = touch2.getLocation();\r\n\r\n                        const midPoint = cc.v3(\r\n                            pos1.add(pos2).multiplyScalar(0.5)\r\n                        );\r\n                        const mapPoint =\r\n                            self.mapContent?.convertToNodeSpaceAR(midPoint);\r\n\r\n                        const distance = pos1.sub(pos2);\r\n                        const delta = delta1.sub(delta2);\r\n                        let scale = 1;\r\n\r\n                        if (Math.abs(distance.x) > Math.abs(distance.y)) {\r\n                            scale =\r\n                                ((distance.x + delta.x) / distance.x) *\r\n                                self.mapContent.scale;\r\n                        } else {\r\n                            scale =\r\n                                ((distance.y + delta.y) / distance.y) *\r\n                                self.mapContent.scale;\r\n                        }\r\n\r\n                        if (scale < 1) {\r\n                            scale = 1;\r\n                        } else if (scale > 2) {\r\n                            scale = 2;\r\n                        }\r\n\r\n                        const scaleDiff = scale - self.mapContent.scale;\r\n                        self.mapContent.scale = scale;\r\n\r\n                        const newPos = mapPoint.multiplyScalar(scaleDiff);\r\n                        self.mapContent.position =\r\n                            self.mapContent?.position.sub(newPos);\r\n\r\n                        self.treeLock.scale =\r\n                            1 - 0.5 * (self.mapContent.scale - 1);\r\n                        self.cavesLock.scale =\r\n                            1 - 0.5 * (self.mapContent.scale - 1);\r\n                        return;\r\n                    } else {\r\n                        if (!self._isLockMoveMap) {\r\n                            self.mapContent.x += event.getDelta().x;\r\n                            self.mapContent.y += event.getDelta().y;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            this\r\n        );\r\n\r\n        this.node._touchListener.setSwallowTouches(false);\r\n\r\n        this.buildUpAnim?.getComponent(cc.Animation).on(\r\n            cc.Animation.EventType.FINISHED,\r\n            () => {\r\n                gm.ui.emit(\"build_upgrade\");\r\n                const buildCfg = gm.data.config_data.getBuildCfgByID(\r\n                    this._buildID\r\n                );\r\n                if (buildCfg) {\r\n                    const buildData = gm.data.mapCell_data.getBuildDataByType(\r\n                        buildCfg.buildType\r\n                    );\r\n                    if (buildData) {\r\n                        this.buildUpAnim.active = false;\r\n                        if (\r\n                            buildCfg.buildType ==\r\n                            BuildTypeEnum.SEAGOINGBOAT_TYPE\r\n                        ) {\r\n                            this.ship.opacity = 255;\r\n                        } else {\r\n                            this.mapContent\r\n                                ?.getChildByName(buildData.cellID.toString())\r\n                                .getComponent(MainMapItem)\r\n                                .setBuildImgOpacity(255);\r\n                        }\r\n                        this.lockSenceMoveMap(116, 1.5);\r\n                    }\r\n                }\r\n            },\r\n            this\r\n        );\r\n    }\r\n\r\n    private initMapUI(): void {\r\n        this.composeAnim.active = false;\r\n        this.handAnim.active = false;\r\n        this.moveItemNode.active = false;\r\n        this.roleBuildUpgrade.active = false;\r\n        this.roleGuideBuildUpgrade.active = false;\r\n        this.buildUpAnim.active = false;\r\n        this.mask.active = false;\r\n        this.handAnim.active = false;\r\n        this.mapContent.scale = 1;\r\n        this.mapContent.position = cc.v3(-94, 490, 0);\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        this.isfightEnd = false;\r\n        this.addListener();\r\n        this.initMapUI();\r\n        this.showUnComposeCell();\r\n        this.setBarrelNodeActive();\r\n        this.initShip();\r\n        this.lockMainUI();\r\n        const fightTempData = gm.data.fight_temp_data;\r\n        if (\r\n            fightTempData.fight_result_data &&\r\n            fightTempData.fight_result_data.result > 0\r\n        ) {\r\n            gm.data.task_data.update_task_progress(\r\n                TaskConditionType.ATTACK_ISLAND\r\n            );\r\n            gm.audio.play_effect(gm.const.AUDIO_19_FIGHT_RETURN);\r\n            gm.audio.play_music(gm.const.AUDIO_91_MAIN_MUSIC);\r\n            for (\r\n                let a = 0;\r\n                a <\r\n                fightTempData.fight_result_data.alive_hero_data_array.length;\r\n                a++\r\n            ) {\r\n                gm.data.mapCell_data.checkIsPlayItemSound(\r\n                    fightTempData.fight_result_data.alive_hero_data_array[a].id\r\n                );\r\n            }\r\n            this.isfightEnd = true;\r\n        }\r\n        this.lockAreaCloud();\r\n        this.unscheduleAllCallbacks();\r\n        this.scheduleOnce(() => {\r\n            if (\r\n                1 == gm.data.mapCell_data.roleGuideVO.guideID ||\r\n                2 == gm.data.mapCell_data.roleGuideVO.guideID ||\r\n                (6 == gm.data.mapCell_data.roleGuideVO.guideID &&\r\n                    gm.data.mapCell_data.roleGuideVO.isEnd)\r\n            ) {\r\n                this.randomShowCase();\r\n            }\r\n            if (this.isfightEnd) {\r\n                gm.ui.emit(\"ship_play_anim\", 2);\r\n                if (\r\n                    13 != gm.data.mapCell_data.roleGuideVO.guideID ||\r\n                    !gm.data.mapCell_data.roleGuideVO.isEnd\r\n                ) {\r\n                    TempData.setRoleGuideDataEnd();\r\n                    gm.data.mapCell_data.setRoleGuideData(15, 0);\r\n                    gm.ui.mapMainUI.checkGuideIsShow();\r\n                }\r\n            }\r\n            if (15 == gm.data.mapCell_data.roleGuideVO.guideID) {\r\n                gm.ui.mapMainUI.checkGuideIsShow();\r\n            }\r\n            this.lockSenceMoveMap(116, 1.5, this.initMapPosSucc, this);\r\n        }, 2);\r\n        this.show_task_entry();\r\n        this.show_task_main_entry();\r\n        this.show_ladder_entry();\r\n        this.show_sign_entry();\r\n        this.show_super_recruit_node_entry();\r\n        this.show_lucky_wheel_node_entry();\r\n        this.show_record_entry();\r\n        this.show_more_entry();\r\n        this.show_shop_entry();\r\n        this.show_mail_entry();\r\n        this.show_guide_gift_entry();\r\n        this.add_desktop_node.active = false;\r\n        gm.channel.checkShortcut((num: number) => {\r\n            if (num >= 2) {\r\n                this.show_add_desktop_entry();\r\n            }\r\n        });\r\n        this.refreshRedBtnBook();\r\n        // this.autoCompose.autoAnim.node.active = !gm.data.mapCell_data.isGuide; // cũ là this.autoCompose.active\r\n        this.autoCompose.node.active = !gm.data.mapCell_data.isGuide;\r\n        gm.audio.play_music(gm.const.AUDIO_91_MAIN_MUSIC);\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        MvcEventDispatcher.getInstance(\r\n            DataEvent.GUIDENEWERGUIDE\r\n        ).removeEventListener(\r\n            DataEvent.GUIDE_CLICK_BUILD_UPGRAE_POS,\r\n            this.getBuildUpgradeCb,\r\n            this\r\n        );\r\n        MvcEventDispatcher.getInstance(\r\n            DataEvent.GUIDENEWERGUIDE\r\n        ).removeEventListener(\r\n            DataEvent.GUIDE_CLICK_BARREL_POS,\r\n            this.getBarrelCb,\r\n            this\r\n        );\r\n        MvcEventDispatcher.getInstance(\r\n            DataEvent.GUIDENEWERGUIDE\r\n        ).removeEventListener(\r\n            DataEvent.GUIDE_CLICK_BUILD_UP_POS,\r\n            this.getBuildUpCb,\r\n            this\r\n        );\r\n        MvcEventDispatcher.getInstance(\r\n            DataEvent.GUIDENEWERGUIDE\r\n        ).removeEventListener(\r\n            DataEvent.GUIDE_CLICK_BEGIN_FIGHT_POS,\r\n            this.getClickGoFightCb,\r\n            this\r\n        );\r\n        gm.ui.off(\"item_move\", this.on_move_item_move, this);\r\n        gm.ui.off(\"item_move_end\", this.on_move_item_hide, this);\r\n        gm.ui.off(\"item_children_refresh\", this.on_move_item_refresh, this);\r\n        gm.ui.off(\"item_unlock_refresh\", this.on_item_unlock_refresh, this);\r\n        gm.ui.off(\"compostimeChange\", this.showNextCellNode, this);\r\n        gm.ui.off(\"unLockNewArea\", this.unLockNewArea, this);\r\n        gm.ui.off(\"build_upgrade\", this.refreshBuildItem, this);\r\n        gm.ui.off(\"item_compose_time_change\", this.composeTimesChange, this);\r\n        gm.ui.off(\"build_metarail_change\", this.showBuildMertarilFull, this);\r\n        gm.ui.off(\"guide_del_item\", this.guideDelItem, this);\r\n        gm.ui.off(\"bookRedStatus\", this.refreshRedBtnBook, this);\r\n        gm.ui.off(\"ship_goods_change\", this.putAllItemToMapAuto, this);\r\n        this.node.targetOff(this);\r\n    }\r\n\r\n    public lockMainUI(): void {\r\n        const type: SpecialEnum[] = [SpecialEnum.CAVES_TYPE];\r\n        this.mapUI.active = !gm.data.mapCell_data.isGuide;\r\n        const position: cc.Vec3[] = [new cc.Vec3(-206, -900)];\r\n        this.roleBuildAnimNode.active = !gm.data.mapCell_data.isGuide;\r\n        if (this.roleBuildAnimNode?.childrenCount == 0) {\r\n            if (this.roleBuildAnimNode.active) {\r\n                gm.pool.async_get(\r\n                    BundleName.MAP,\r\n                    \"prefabs/staticAnim4\",\r\n                    NodePoolItem,\r\n                    (data) => {\r\n                        if (!data) return;\r\n                        if (this.roleBuildAnimNode?.childrenCount == 0) {\r\n                            const e = gm.data.config_data.getSpecialByID(\r\n                                type[0]\r\n                            );\r\n                            if (e) {\r\n                                this.roleBuildAnimNode.addChild(data.node);\r\n                                if (\r\n                                    gm.data.mapCell_data.role_map_data[\r\n                                        e.unlock\r\n                                    ] &&\r\n                                    gm.data.mapCell_data.specialList[\r\n                                        SpecialEnum.CAVES_TYPE\r\n                                    ].state == 2\r\n                                ) {\r\n                                    this.roleBuildAnimNode.active = false;\r\n                                    gm.pool.put(data.node);\r\n                                }\r\n                            }\r\n                        } else {\r\n                            gm.pool.put(data.node);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n            this.roleBuildAnimNode.zIndex = gm.const.MAX_CELL_NUM - 3;\r\n            this.roleBuildAnimNode.position = position[0];\r\n        }\r\n    }\r\n\r\n    private lockAreaCloud(): void {\r\n        let isAreaLocked = false;\r\n        for (const areaKey in gm.const.localCloudAreaList) {\r\n            ((key) => {\r\n                if (\r\n                    gm.data.mapCell_data.isGuide ||\r\n                    2 == gm.data.mapCell_data.lockArea[key] ||\r\n                    gm.data.mapCell_data.getAreaIDIsUnLock(parseInt(key))\r\n                ) {\r\n                    gm.pool.put_children(\r\n                        this.lockAreaCloudList.children[\r\n                            gm.const.localCloudAreaList[key].index\r\n                        ]\r\n                    );\r\n                } else {\r\n                    isAreaLocked = true;\r\n                    if (\r\n                        0 ==\r\n                        this.lockAreaCloudList.children[\r\n                            gm.const.localCloudAreaList[key].index\r\n                        ].childrenCount\r\n                    ) {\r\n                        gm.pool.async_get(\r\n                            BundleName.MAP,\r\n                            \"prefabs/lockCloud_\" + key,\r\n                            LockCloudArea,\r\n                            (LockCloud) => {\r\n                                if (\r\n                                    0 ==\r\n                                    this.lockAreaCloudList.children[\r\n                                        gm.const.localCloudAreaList[key].index\r\n                                    ].childrenCount\r\n                                ) {\r\n                                    LockCloud.initType(parseInt(key));\r\n                                    this.lockAreaCloudList.children[\r\n                                        gm.const.localCloudAreaList[key].index\r\n                                    ].addChild(LockCloud.node);\r\n                                } else {\r\n                                    gm.pool.put(LockCloud.node);\r\n                                }\r\n                            }\r\n                        );\r\n                    } else {\r\n                        this.lockAreaCloudList.children[\r\n                            gm.const.localCloudAreaList[key].index\r\n                        ].children[0]\r\n                            .getComponent(LockCloudArea)\r\n                            .refreshPanel();\r\n                    }\r\n                }\r\n            })(areaKey);\r\n        }\r\n        this.lockAreaCloudList.zIndex = isAreaLocked\r\n            ? gm.const.MAX_CELL_NUM\r\n            : 0;\r\n    }\r\n\r\n    private show_task_entry(): void {\r\n        if (this.task_node?.childrenCount == 0) {\r\n            gm.pool.async_get(\r\n                BundleName.TASK,\r\n                \"prefabs/task_entry\",\r\n                TaskEntry,\r\n                (data) => {\r\n                    if (this.task_node.childrenCount == 0 && data) {\r\n                        this.task_node.addChild(data.node);\r\n                    } else {\r\n                        if (data) gm.pool.put(data.node);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    private show_task_main_entry(): void {\r\n        if (this.task_main_node?.childrenCount == 0) {\r\n            gm.pool.async_get(\r\n                BundleName.TASK,\r\n                \"prefabs/task_main_entry\",\r\n                TaskMainEntry,\r\n                (data) => {\r\n                    if (!data) return;\r\n                    if (this.task_main_node.childrenCount == 0) {\r\n                        this.task_main_node.addChild(data.node);\r\n                    } else {\r\n                        gm.pool.put(data.node);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    public show_task_main_entry_guide(): void {\r\n        const data = this.task_main_node?.getComponentInChildren(TaskMainEntry);\r\n        if (data) data.show_weak_guide(0);\r\n    }\r\n\r\n    private show_ladder_entry(): void {\r\n        if (this.ladder_node?.childrenCount == 0) {\r\n            gm.pool.async_get(\r\n                BundleName.LADDER,\r\n                \"prefabs/ladder_entry\",\r\n                LadderEntry,\r\n                (data) => {\r\n                    if (!data) return;\r\n                    if (this.ladder_node.childrenCount == 0) {\r\n                        this.ladder_node.addChild(data.node);\r\n                    } else {\r\n                        gm.pool.put(data.node);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    public show_sign_entry(): void {\r\n        if (TempData.mainFunShowSign) {\r\n            this.sign_node.active = true;\r\n            if (this.sign_node?.childrenCount == 0) {\r\n                gm.pool.async_get(\r\n                    BundleName.SIGN,\r\n                    \"prefabs/sign_entry\",\r\n                    SignEntry,\r\n                    (data) => {\r\n                        if (!data) return;\r\n                        if (this.sign_node.childrenCount == 0) {\r\n                            this.sign_node.addChild(data.node);\r\n                        } else {\r\n                            gm.pool.put(data.node);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        } else {\r\n            this.sign_node.active = false;\r\n        }\r\n    }\r\n\r\n    public show_super_recruit_node_entry(): void {\r\n        if (TempData.mainFunShowSuperHero) {\r\n            this.super_recruit_node.active = true;\r\n            if (this.super_recruit_node?.childrenCount == 0) {\r\n                gm.pool.async_get(\r\n                    BundleName.SUPER_RECRUIT,\r\n                    \"prefabs/super_recruit_entry\",\r\n                    NodePoolItem,\r\n                    (data) => {\r\n                        if (!data) return;\r\n                        if (this.super_recruit_node.childrenCount == 0) {\r\n                            this.super_recruit_node.addChild(data.node);\r\n                        } else {\r\n                            gm.pool.put(data.node);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        } else {\r\n            this.super_recruit_node.active = false;\r\n        }\r\n    }\r\n\r\n    public show_lucky_wheel_node_entry(): void {\r\n        if (TempData.mainFunShowLucky) {\r\n            this.lucky_wheel_node.active = true;\r\n            if (this.lucky_wheel_node?.childrenCount == 0) {\r\n                gm.pool.async_get(\r\n                    BundleName.LUCKY_WHEEL,\r\n                    \"prefabs/lucky_wheel_entry\",\r\n                    NodePoolItem,\r\n                    (data) => {\r\n                        if (!data) return;\r\n                        if (this.lucky_wheel_node.childrenCount == 0) {\r\n                            this.lucky_wheel_node.addChild(data.node);\r\n                        } else {\r\n                            gm.pool.put(data.node);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        } else {\r\n            this.lucky_wheel_node.active = false;\r\n        }\r\n    }\r\n\r\n    private show_record_entry(): void {\r\n        // this.record_node.active = true;\r\n        this.record_node.active = gm.channel.is_video_share;\r\n        if (gm.channel.is_video_share && this.record_node?.childrenCount == 0) {\r\n            gm.pool.async_get(\r\n                BundleName.RECORD,\r\n                \"prefabs/record_entry\",\r\n                NodePoolItem,\r\n                (data) => {\r\n                    if (!data) return;\r\n                    if (this.record_node.childrenCount == 0) {\r\n                        this.record_node.addChild(data.node);\r\n                    } else {\r\n                        gm.pool.put(data.node);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    private show_more_entry() {\r\n        this.more_node.active = true;\r\n        if (this.more_node.childrenCount == 0) {\r\n            gm.pool.async_get(\r\n                BundleName.LADDER,\r\n                \"prefabs/more_entry\",\r\n                MoreEntry,\r\n                (data) => {\r\n                    if (!data) return;\r\n                    if (this.more_node.childrenCount == 0) {\r\n                        this.more_node.addChild(data.node);\r\n                    } else {\r\n                        gm.pool.put(data.node);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    private show_shop_entry(): void {\r\n        this.shop_node.active = false;\r\n        // this.shop_node.active = true;\r\n    }\r\n\r\n    private show_mail_entry(): void {\r\n        if (0 == this.mail_node.childrenCount) {\r\n            gm.pool.async_get(\r\n                BundleName.MAIL,\r\n                \"prefabs/mail_entry\",\r\n                MailEntry,\r\n                (data) => {\r\n                    if (0 == this.mail_node.childrenCount) {\r\n                        this.mail_node.addChild(data.node);\r\n                    } else {\r\n                        gm.pool.put(data.node);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    public show_guide_gift_entry(): void {\r\n        if (TempData.mainFunShowGuide) {\r\n            this.guide_gift_node.active = true;\r\n            if (this.guide_gift_node?.childrenCount == 0) {\r\n                gm.pool.async_get(\r\n                    BundleName.GUIDEGIFT,\r\n                    \"prefabs/guide_gift_entry\",\r\n                    GuideGiftEntry,\r\n                    (data) => {\r\n                        if (!data) return;\r\n                        if (this.guide_gift_node.childrenCount == 0) {\r\n                            this.guide_gift_node.addChild(data.node);\r\n                        } else {\r\n                            gm.pool.put(data.node);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        } else {\r\n            this.guide_gift_node.active = false;\r\n        }\r\n    }\r\n\r\n    private show_add_desktop_entry(): void {\r\n        this.add_desktop_node.active = true;\r\n        if (this.add_desktop_node?.childrenCount == 0) {\r\n            gm.pool.async_get(\r\n                BundleName.ADD_DESKTOP,\r\n                \"prefabs/add_desktop_entry\",\r\n                AddDesktopEntry,\r\n                (data) => {\r\n                    if (!data) return;\r\n                    if (this.add_desktop_node.childrenCount == 0) {\r\n                        this.add_desktop_node.addChild(data.node);\r\n                    } else {\r\n                        gm.pool.put(data.node);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    public setBarrelNodeActive(): void {\r\n        if (gm.data.mapCell_data.isGuide) {\r\n            this.barrelNode.y = -208;\r\n            this.barrelNode.active =\r\n                0 < gm.data.mapCell_data.roleBarrelData.curBarrelNum;\r\n            if (this.barrelNode.active) {\r\n                this.barrelNode.y = 105;\r\n            }\r\n        } else {\r\n            this.barrelNode.active = true;\r\n            this.barrelNode.y = 105;\r\n            this.barrelNode.getComponent(BarrelMgr).refreshPanel();\r\n        }\r\n    }\r\n\r\n    private initMapPosSucc(): void {\r\n        if (!gm.data.mapCell_data.isGuide) return;\r\n        this.checkGuideIsShow();\r\n    }\r\n\r\n    public checkGuideIsShow(): void {\r\n        let newE = (this.handAnim.active = !1);\r\n        if (gm.data.mapCell_data.isGuide) {\r\n            const guildData = TempData.getRoleGuideData();\r\n            if (0 < guildData.guideID && !guildData.isEnd) {\r\n                newE = true;\r\n                gm.newerGuideMgr.initEventList();\r\n            }\r\n\r\n            if (!newE) {\r\n                this.checkHandAnimDelay();\r\n            }\r\n        } else {\r\n            this.isBeginDelayTime = false;\r\n        }\r\n    }\r\n\r\n    public update(num: number): void {\r\n        if (this.isBeginDelayTime) {\r\n            this.curTimer += num;\r\n            if (this.curTimer >= this.delayTime) {\r\n                this.isBeginDelayTime = false;\r\n                this.delayTime = 0;\r\n                this.curTimer = 0;\r\n                this.checkHandAnim();\r\n            }\r\n        }\r\n        if (\r\n            !this._isDragToBorderMoveSpeed.equals(cc.Vec2.ZERO) &&\r\n            this.moveItemNode?.activeInHierarchy\r\n        ) {\r\n            this.mapContent.x += this._isDragToBorderMoveSpeed.x * num;\r\n            this.mapContent.y += this._isDragToBorderMoveSpeed.y * num;\r\n            this.moveItemNode.position = cc.v3(\r\n                this.mapContent?.convertToNodeSpaceAR(this._touch_position)\r\n            );\r\n        }\r\n    }\r\n\r\n    public checkHandAnimDelay(num01: number = 0, num02: number = 0): void {\r\n        this.delayTime = num01 == undefined ? 0.3 : num01;\r\n        this.guideID = num02;\r\n        this.isBeginDelayTime = true;\r\n    }\r\n\r\n    private goboundary(): void {\r\n        let num01: number = 0;\r\n        let num02: number = 0;\r\n        const visibleSize = cc.view.getVisibleSize();\r\n        const i = Math.ceil(visibleSize.height / 1500);\r\n        const mapScale = this.mapContent.scale;\r\n        const point = this.mapContent.getAnchorPoint();\r\n        if (\r\n            visibleSize.width / 2 >\r\n            this._map_size.x * point.x * mapScale -\r\n                this.mapContent.getPosition().x\r\n        ) {\r\n            num01 =\r\n                this._map_size.x * point.x * mapScale - visibleSize.width / 2;\r\n            this.mapContent?.setPosition(num01, this.mapContent.y);\r\n        }\r\n        if (\r\n            visibleSize.height / 2 >\r\n            this._map_size.y * point.y * mapScale -\r\n                this.mapContent.getPosition().y\r\n        ) {\r\n            num02 =\r\n                this._map_size.y * point.y * mapScale - visibleSize.height / 2;\r\n            this.mapContent?.setPosition(this.mapContent.x, num02);\r\n        }\r\n        if (\r\n            visibleSize.width / 2 >\r\n            this._map_size.x * (1 - point.x) * mapScale +\r\n                this.mapContent.getPosition().x\r\n        ) {\r\n            num01 =\r\n                visibleSize.width / 2 -\r\n                this._map_size.x * (1 - point.x) * mapScale;\r\n            this.mapContent?.setPosition(num01, this.mapContent.y);\r\n        }\r\n        if (\r\n            visibleSize.height / 2 >\r\n            this._map_size.y * (1 - point.y) * mapScale +\r\n                this.mapContent.getPosition().y\r\n        ) {\r\n            num02 =\r\n                visibleSize.height / 2 -\r\n                this._map_size.y * (1 - point.y) * mapScale;\r\n            this.mapContent?.setPosition(this.mapContent.x, num02);\r\n        }\r\n    }\r\n\r\n    private initShip(): void {\r\n        if (gm.data.mapCell_data.buildData[BuildTypeEnum.WHARFTAX_TYPE]) {\r\n            if (this.ship.childrenCount == 0) {\r\n                gm.pool.async_get(\r\n                    BundleName.MAP,\r\n                    \"prefabs/ship\",\r\n                    ShipMgr,\r\n                    (data) => {\r\n                        if (!data) return;\r\n                        if (this.ship.childrenCount == 0) {\r\n                            if (\r\n                                gm.data.mapCell_data.buildData[\r\n                                    BuildTypeEnum.WHARFTAX_TYPE\r\n                                ]\r\n                            ) {\r\n                                const buildData =\r\n                                    gm.data.mapCell_data.buildData[\r\n                                        BuildTypeEnum.SEAGOINGBOAT_TYPE\r\n                                    ];\r\n                                const mapItemDataVo = new MapItemDataVO();\r\n                                mapItemDataVo.cellID = buildData.cellID;\r\n                                mapItemDataVo.cellState = 2;\r\n                                mapItemDataVo.itemState = 2;\r\n                                mapItemDataVo.itemType =\r\n                                    ItemTypeEnum.BUILD_TYPE;\r\n                                mapItemDataVo.itemID = buildData.buildID;\r\n                                mapItemDataVo.heroUID = 0;\r\n                                data.node\r\n                                    .getComponent(BuildIconItem)\r\n                                    .initData(mapItemDataVo);\r\n                                const newE = buildData.cellID % this._row;\r\n                                const newNum = Math.floor(\r\n                                    buildData.cellID / this._row\r\n                                );\r\n                                this.ship.y =\r\n                                    -this._heightHalf - 51 * newNum - 20 * newE;\r\n                                this.ship.x =\r\n                                    this._widthHalf - 31 * newNum + 75 * newE;\r\n                                this.ship.zIndex = gm.const.MAX_CELL_NUM;\r\n                                this.ship.addChild(data.node);\r\n                            } else {\r\n                                gm.pool.put(data.node);\r\n                            }\r\n                        }\r\n                    }\r\n                );\r\n            } else if (\r\n                gm.data.mapCell_data.buildData[BuildTypeEnum.WHARFTAX_TYPE]\r\n            ) {\r\n                const buildData =\r\n                    gm.data.mapCell_data.buildData[\r\n                        BuildTypeEnum.SEAGOINGBOAT_TYPE\r\n                    ];\r\n                const mapItemDataVO = new MapItemDataVO();\r\n                mapItemDataVO.cellID = buildData.cellID;\r\n                mapItemDataVO.cellState = 2;\r\n                mapItemDataVO.itemState = 2;\r\n                mapItemDataVO.itemType = ItemTypeEnum.BUILD_TYPE;\r\n                mapItemDataVO.itemID = buildData.buildID;\r\n                mapItemDataVO.heroUID = 0;\r\n                this.ship?.children[0]\r\n                    .getComponent(BuildIconItem)\r\n                    .initData(mapItemDataVO);\r\n                const num = buildData.cellID % this._row;\r\n                const newE = Math.floor(buildData.cellID / this._row);\r\n                this.ship.y = -this._heightHalf - 51 * newE - 20 * num;\r\n                this.ship.x = this._widthHalf - 31 * newE + 75 * num;\r\n                this.ship.active = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    private refreshBuildItem(): void {\r\n        for (var key in (this.lockAreaCloud(),\r\n        gm.data.mapCell_data.buildData)) {\r\n            if (parseInt(key) == BuildTypeEnum.SEAGOINGBOAT_TYPE) {\r\n                this.initShip();\r\n            } else {\r\n                const itemNode = this.mapContent.getChildByName(\r\n                    gm.data.mapCell_data.buildData[key].cellID.toString()\r\n                );\r\n                if (itemNode) {\r\n                    const itemComponent = itemNode.getComponent(MainMapItem);\r\n                    if (itemComponent) {\r\n                        itemComponent.showItemNode();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.setBarrelNodeActive();\r\n    }\r\n\r\n    private on_item_unlock_refresh(name: number): void {\r\n        if (this.ship?.active) this.showUnComposeCell();\r\n\r\n        const itemNode = this.mapContent?.getChildByName(name.toString());\r\n        if (itemNode) {\r\n            const itemComponent = itemNode.getComponent(MainMapItem);\r\n            if (itemComponent) {\r\n                itemComponent.playUnlockUpAnim();\r\n            }\r\n        }\r\n    }\r\n\r\n    private on_move_item_refresh(num: number): void {\r\n        if (num != 395 && num != 313 && num != null) {\r\n            const itemNode = this.mapContent?.getChildByName(num.toString());\r\n            if (itemNode) {\r\n                const itemComponent = itemNode.getComponent(MainMapItem);\r\n                if (itemComponent) {\r\n                    itemComponent.showItemNode();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private on_move_item_move(position: cc.Vec2, type: number, number: number) {\r\n        if (!this.moveItemNode.active) {\r\n            if (this.roleBuildUpgrade.active) {\r\n                this.roleBuildUpgrade.active = false;\r\n                this.setMapUiShow(true);\r\n            }\r\n            this.moveItemNode.active = true;\r\n            this.moveItemNode.zIndex = gm.const.MAX_CELL_NUM + 2;\r\n\r\n            if (type == ItemTypeEnum.HERO_TYPE) {\r\n                this.moveItemNode.getComponent(cc.Sprite).enabled = false;\r\n                gm.pool.async_get(\r\n                    BundleName.COMMON,\r\n                    \"prefabs/model/\" + number,\r\n                    NodePoolItem,\r\n                    (nodepool) => {\r\n                        if (0 == this.moveItemNode.children[0].childrenCount) {\r\n                            this.moveItemNode.children[0].addChild(\r\n                                nodepool.node\r\n                            );\r\n                            const skeletonComponent = nodepool.getComponent(\r\n                                sp.Skeleton\r\n                            );\r\n                            if (skeletonComponent) {\r\n                                skeletonComponent.setSkin(\"front\");\r\n                                skeletonComponent.setAnimation(0, \"stay\", true);\r\n                            }\r\n                        } else {\r\n                            gm.pool.put(nodepool.node);\r\n                        }\r\n                    }\r\n                );\r\n            } else if (type == ItemTypeEnum.BUILD_TYPE) {\r\n                this.moveItemNode.getComponent(cc.Sprite).enabled = true;\r\n                const buildConfig = gm.data.config_data.getBuildCfgByID(number);\r\n                if (buildConfig) {\r\n                    Utils.async_set_sprite_frame(\r\n                        this.moveItemNode.getComponent(cc.Sprite),\r\n                        BundleName.MAP,\r\n                        \"res/build/\" + buildConfig.model\r\n                    );\r\n                    this.moveItemNode.scale = 0.6666667;\r\n                }\r\n            } else {\r\n                const itemConfig = gm.data.config_data.getItemCfgByID(number);\r\n                if (itemConfig) {\r\n                    this.moveItemNode.scale = 1;\r\n                    this.moveItemNode.getComponent(cc.Sprite).enabled = true;\r\n                    Utils.async_set_sprite_frame(\r\n                        this.moveItemNode.getComponent(cc.Sprite),\r\n                        BundleName.MAP,\r\n                        \"res/\" + itemConfig.icon\r\n                    );\r\n                    if (\r\n                        gm.data.mapCell_data.isGuide &&\r\n                        this.roleGuideBuildUpgrade.active\r\n                    ) {\r\n                        const buildConfig = gm.data.config_data.getBuildCfgByID(\r\n                            this._buildID\r\n                        );\r\n                        if (buildConfig) {\r\n                            const buildData =\r\n                                gm.data.mapCell_data.buildData[\r\n                                    buildConfig.buildType\r\n                                ];\r\n                            if (buildData) {\r\n                                for (const materialType in buildData.metrailData) {\r\n                                    if (\r\n                                        itemConfig.type ==\r\n                                        parseInt(materialType)\r\n                                    ) {\r\n                                        if (\r\n                                            itemConfig.type ==\r\n                                                PropTypeEnum.WOOD_TYPE ||\r\n                                            itemConfig.type ==\r\n                                                PropTypeEnum.IRON_TYPE\r\n                                        ) {\r\n                                            if (\r\n                                                itemConfig.number ==\r\n                                                buildData.metrailData[\r\n                                                    materialType\r\n                                                ].max\r\n                                            ) {\r\n                                                if (\r\n                                                    buildConfig.buildType ==\r\n                                                    BuildTypeEnum.SEAGOINGBOAT_TYPE\r\n                                                ) {\r\n                                                    this.ship.children[0]\r\n                                                        .getComponent(\r\n                                                            BuildIconItem\r\n                                                        )\r\n                                                        .playScaleAnim();\r\n                                                    this.guideScaleNode =\r\n                                                        this.ship.children[0].getComponent(\r\n                                                            BuildIconItem\r\n                                                        );\r\n                                                } else {\r\n                                                    this.mapContent\r\n                                                        .getChildByName(\r\n                                                            buildData.cellID.toString()\r\n                                                        )\r\n                                                        .getComponent(\r\n                                                            MainMapItem\r\n                                                        )\r\n                                                        .playScaleAnim();\r\n                                                    this.guideScaleNode =\r\n                                                        this.mapContent\r\n                                                            .getChildByName(\r\n                                                                buildData.cellID.toString()\r\n                                                            )\r\n                                                            .getComponent(\r\n                                                                MainMapItem\r\n                                                            )\r\n                                                            .mapBuildNode.children[0].getComponent(\r\n                                                                BuildIconItem\r\n                                                            );\r\n                                                }\r\n                                            }\r\n                                        } else if (\r\n                                            itemConfig.id ==\r\n                                            buildData.metrailData[materialType]\r\n                                                .id\r\n                                        ) {\r\n                                            if (\r\n                                                buildConfig.buildType ==\r\n                                                BuildTypeEnum.SEAGOINGBOAT_TYPE\r\n                                            ) {\r\n                                                this.ship.children[0]\r\n                                                    .getComponent(BuildIconItem)\r\n                                                    .playScaleAnim();\r\n                                                this.guideScaleNode =\r\n                                                    this.ship.children[0].getComponent(\r\n                                                        BuildIconItem\r\n                                                    );\r\n                                            } else {\r\n                                                this.mapContent\r\n                                                    .getChildByName(\r\n                                                        buildData.cellID.toString()\r\n                                                    )\r\n                                                    .getComponent(MainMapItem)\r\n                                                    .playScaleAnim();\r\n                                                this.guideScaleNode =\r\n                                                    this.mapContent\r\n                                                        .getChildByName(\r\n                                                            buildData.cellID.toString()\r\n                                                        )\r\n                                                        .getComponent(\r\n                                                            MainMapItem\r\n                                                        )\r\n                                                        .mapBuildNode.children[0].getComponent(\r\n                                                            BuildIconItem\r\n                                                        );\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.moveItemNode.children[1].getComponent(cc.Label).string = \"\";\r\n            const posV2 = this.mapContent.convertToNodeSpaceAR(position);\r\n            this.moveItemNode.position = new cc.Vec3(posV2.x, posV2.y, 0);\r\n        }\r\n        const posV2 = this.mapContent.convertToNodeSpaceAR(position);\r\n        this.moveItemNode.position = new cc.Vec3(posV2.x, posV2.y, 0);\r\n        if (!gm.data.mapCell_data.isGuide) {\r\n            if (this.moveItemNode.activeInHierarchy) {\r\n                this._touch_position = new cc.Vec2(position.x, position.y);\r\n                const nodeSize = this.node.getContentSize();\r\n                const halfNodeSize = cc.size(\r\n                    0.5 * nodeSize.width,\r\n                    0.5 * nodeSize.height\r\n                );\r\n                const localPosition = this.node.convertToNodeSpaceAR(position);\r\n                const moveSpeed = 150 * this.mapContent.scale;\r\n\r\n                if (localPosition.x < 50 - halfNodeSize.width) {\r\n                    this._isDragToBorderMoveSpeed.x = moveSpeed;\r\n                } else if (localPosition.x > halfNodeSize.width - 50) {\r\n                    this._isDragToBorderMoveSpeed.x = -moveSpeed;\r\n                } else {\r\n                    this._isDragToBorderMoveSpeed.x = 0;\r\n                }\r\n\r\n                if (localPosition.y < 50 - halfNodeSize.height) {\r\n                    this._isDragToBorderMoveSpeed.y = moveSpeed;\r\n                } else if (localPosition.y > halfNodeSize.height - 50) {\r\n                    this._isDragToBorderMoveSpeed.y = -moveSpeed;\r\n                } else {\r\n                    this._isDragToBorderMoveSpeed.y = 0;\r\n                }\r\n            } else {\r\n                this._isDragToBorderMoveSpeed.x = 0;\r\n                this._isDragToBorderMoveSpeed.y = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    public hideMoveItemNode(): void {\r\n        this.moveItemNode.active = false;\r\n        this._isDragToBorderMoveSpeed = cc.Vec2.ZERO;\r\n        gm.pool.put_children(this.moveItemNode.children[0]);\r\n        if (\r\n            gm.data.mapCell_data.isGuide &&\r\n            this.roleGuideBuildUpgrade?.active &&\r\n            this.guideScaleNode\r\n        ) {\r\n            this.guideScaleNode.stopScaleAnim(); // TODO: ???\r\n        }\r\n    }\r\n\r\n    public hideMoveBuildItemNode(): void {\r\n        this.moveItemNode.active = false;\r\n        this._isDragToBorderMoveSpeed = cc.Vec2.ZERO;\r\n        gm.pool.put_children(this.moveItemNode.children[0]);\r\n    }\r\n\r\n    private on_move_item_hide(event: cc.Vec2, number: number): void {\r\n        this.moveItemNode.active = false;\r\n        this._isDragToBorderMoveSpeed = cc.Vec2.ZERO;\r\n        gm.pool.put_children(this.moveItemNode.children[0]);\r\n        if (\r\n            gm.data.mapCell_data.isGuide &&\r\n            this.roleGuideBuildUpgrade?.active &&\r\n            this.guideScaleNode\r\n        ) {\r\n            this.guideScaleNode.stopScaleAnim(); //\r\n        }\r\n        if (gm.data.fight_temp_data.open_battle_panel_state == 0) {\r\n            for (let a = 0; a < this.mapContent.childrenCount; a++) {\r\n                const component =\r\n                    this.mapContent?.children[a].getComponent(MainMapItem);\r\n                if (component && component.playSameItemAnimEnd(event, number))\r\n                    return;\r\n            }\r\n        }\r\n    }\r\n\r\n    public onClickCase(): void {\r\n        if (gm.data.mapCell_data.getIsHaveSpeceCellID()) {\r\n            if (gm.data.mapCell_data.roleBarrelData.curBarrelNum > 0) {\r\n                gm.data.mapCell_data.addBarrelInMap();\r\n            } else {\r\n                gm.channel.show_video_ad(() => {\r\n                    gm.data.mapCell_data.watch_ad_buy_barrel_times++;\r\n                    gm.data.mapCell_data.addBarrelNum(40);\r\n                    ReportData.instance.report_point(10301);\r\n                    ReportData.instance.report_once_point(10302);\r\n                    gm.channel.report_event(\"video_buy_barrel\", {\r\n                        event_desc: \"看视频购买木桶\",\r\n                        buy_count:\r\n                            gm.data.mapCell_data.watch_ad_buy_barrel_times,\r\n                        task_desc: cc.js.formatStr(\r\n                            \"购买木桶%d次\",\r\n                            gm.data.mapCell_data.watch_ad_buy_barrel_times\r\n                        ),\r\n                    });\r\n                }, this);\r\n            }\r\n        } else {\r\n            gm.ui.show_auto_merge_message();\r\n        }\r\n    }\r\n\r\n    private randomShowCase(): void {\r\n        const waterBarrelList = gm.data.mapCell_data.waterBarrelList;\r\n        if (waterBarrelList.length > 0) {\r\n            this.barrelParentNode.zIndex = 400;\r\n            for (let t = 0; t < waterBarrelList.length; t++) {\r\n                const e = t;\r\n                gm.pool.async_get(\r\n                    BundleName.MAP,\r\n                    \"prefabs/barrelItem\",\r\n                    WaterBarrelItem,\r\n                    (data) => {\r\n                        if (!data) return;\r\n                        const barrelItem = data as WaterBarrelItem;\r\n                        barrelItem.initData(waterBarrelList[e], e);\r\n                        this.barrelParentNode?.addChild(data.node);\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    private initMapForTest(): void {\r\n        this._mapCfgList = gm.data.config_data.getMapCellCfg();\r\n        for (let i = 0; i < this._mapCfgList.length; i++) {\r\n            if (this._mapCfgList[i]) {\r\n                gm.pool.async_get(\r\n                    BundleName.MAP,\r\n                    \"prefabs/item\",\r\n                    MainMapItem,\r\n                    (data) => {\r\n                        if (!data) return;\r\n                        const num01 = this._mapCfgList[i].mapIndex % this._row;\r\n                        const num02 = Math.floor(\r\n                            this._mapCfgList[i].mapIndex / this._row\r\n                        );\r\n                        const mainMap = data as MainMapItem;\r\n                        mainMap.initData(this._mapCfgList[i], 1, 0, false);\r\n                        data.node.y =\r\n                            -this._heightHalf - 51 * num02 - 20 * num01;\r\n                        data.node.x = this._widthHalf - 31 * num02 + 75 * num01;\r\n                        this.mapContent?.addChild(data.node);\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    private initMap(): void {\r\n        const roleMapTotalData = gm.data.mapCell_data.role_map_total_data;\r\n        Utils.sort_by_props(roleMapTotalData, { itemID: \"ascending\" });\r\n        for (let e = 0; e < roleMapTotalData.length; e++) {\r\n            const roleMap = roleMapTotalData[e];\r\n            if (this._mapCfgList[roleMap]) {\r\n                gm.pool.async_get(\r\n                    BundleName.MAP,\r\n                    \"prefabs/item\",\r\n                    MainMapItem,\r\n                    (data) => {\r\n                        if (!data) return;\r\n                        const num01 =\r\n                            this._mapCfgList[roleMap].mapIndex % this._row;\r\n                        const num02 = Math.floor(\r\n                            this._mapCfgList[roleMap].mapIndex / this._row\r\n                        );\r\n                        const mainMap = data as MainMapItem;\r\n                        mainMap.initData(this._mapCfgList[roleMap], 1, 0);\r\n                        data.node.y =\r\n                            -this._heightHalf - 51 * num02 - 20 * num01;\r\n                        data.node.x = this._widthHalf - 31 * num02 + 75 * num01;\r\n                        this.mapContent?.addChild(data.node);\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    private unLockNewArea(): void {\r\n        if (this.roleBuildUpgrade.active) {\r\n            this.roleBuildUpgrade.active = false;\r\n            this.setMapUiShow(true);\r\n        }\r\n\r\n        this._mapCfgList = gm.data.config_data.getMapCellCfg();\r\n\r\n        const areaUnlock = gm.data.mapCell_data.areaUnlockCellIDList;\r\n        let count = 0;\r\n        for (; 0 < gm.data.mapCell_data._curNewUnlockCellList.length; ) {\r\n            const newUnlock =\r\n                gm.data.mapCell_data._curNewUnlockCellList.shift();\r\n            if (this._mapCfgList[newUnlock]) {\r\n                if (\r\n                    this.mapContent.getChildByName(\r\n                        this._mapCfgList[newUnlock].cellID.toString()\r\n                    )\r\n                ) {\r\n                    gm.pool.put(\r\n                        this.mapContent.getChildByName(\r\n                            this._mapCfgList[newUnlock].cellID.toString()\r\n                        )\r\n                    );\r\n                }\r\n                gm.pool.async_get(\r\n                    BundleName.MAP,\r\n                    \"prefabs/item\",\r\n                    MainMapItem,\r\n                    (mapItem) => {\r\n                        const mapIndex =\r\n                            this._mapCfgList[newUnlock].mapIndex % this._row;\r\n                        const mapFloor = Math.floor(\r\n                            this._mapCfgList[newUnlock].mapIndex / this._row\r\n                        );\r\n\r\n                        mapItem.initData(this._mapCfgList[newUnlock], 3, count);\r\n                        mapItem.node.y =\r\n                            -this._heightHalf - 51 * mapFloor - 20 * mapIndex;\r\n                        mapItem.node.x =\r\n                            this._widthHalf - 31 * mapFloor + 75 * mapIndex;\r\n                        this.mapContent.addChild(mapItem.node);\r\n                        count++;\r\n                    }\r\n                );\r\n            }\r\n            if (0 == gm.data.mapCell_data._curNewUnlockCellList.length) {\r\n                gm.data.mapCell_data.async_write_data();\r\n            }\r\n        }\r\n        let num = 0;\r\n        if (0 < areaUnlock.length) {\r\n            for (; 0 < areaUnlock.length; ) {\r\n                const areaUnlock0 = areaUnlock.shift();\r\n                if (this._mapCfgList[areaUnlock0]) {\r\n                    gm.pool.async_get(\r\n                        BundleName.MAP,\r\n                        \"prefabs/item\",\r\n                        MainMapItem,\r\n                        (mapItem) => {\r\n                            const mapIndex =\r\n                                this._mapCfgList[areaUnlock0].mapIndex %\r\n                                this._row;\r\n                            const mapfloor = Math.floor(\r\n                                this._mapCfgList[areaUnlock0].mapIndex /\r\n                                    this._row\r\n                            );\r\n                            mapItem.initData(\r\n                                this._mapCfgList[areaUnlock0],\r\n                                2,\r\n                                num\r\n                            );\r\n                            mapItem.node.y =\r\n                                -this._heightHalf -\r\n                                51 * mapfloor -\r\n                                20 * mapIndex;\r\n                            mapItem.node.x =\r\n                                this._widthHalf - 31 * mapfloor + 75 * mapIndex;\r\n                            this.mapContent.addChild(mapItem.node);\r\n                            num++;\r\n                            if (0 == areaUnlock.length) {\r\n                                gm.data.mapCell_data.async_write_data();\r\n                                this.showUnComposeCell();\r\n                                const roleGuide = TempData.getRoleGuideData();\r\n                                if (\r\n                                    roleGuide &&\r\n                                    6 == roleGuide.guideID &&\r\n                                    !roleGuide.isEnd\r\n                                ) {\r\n                                    this.scheduleOnce(\r\n                                        this.checkGuideIsShow,\r\n                                        0.5 * num\r\n                                    );\r\n                                }\r\n                            }\r\n                        }\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            this.showUnComposeCell();\r\n        }\r\n\r\n        gm.ui.emit(\"build_show_stateIcon\", true);\r\n        this.scheduleOnce(this.checkGuideIsShow, Math.max(0.5 * num, 1.5));\r\n    }\r\n\r\n    private showUnComposeCell(): void {\r\n        let count = 0;\r\n        const areaUnlockCellIDs = gm.data.mapCell_data.areaUnlockCellIDList;\r\n        if (0 < areaUnlockCellIDs.length) {\r\n            for (; 0 < areaUnlockCellIDs.length; ) {\r\n                const cellID = areaUnlockCellIDs.shift();\r\n                if (this._mapCfgList[cellID]) {\r\n                    gm.pool.async_get(\r\n                        BundleName.MAP,\r\n                        \"prefabs/item\",\r\n                        MainMapItem,\r\n                        (mapItem) => {\r\n                            const columnIndex =\r\n                                this._mapCfgList[cellID].mapIndex % this._row;\r\n                            const rowIndex = Math.floor(\r\n                                this._mapCfgList[cellID].mapIndex / this._row\r\n                            );\r\n\r\n                            mapItem.initData(\r\n                                this._mapCfgList[cellID],\r\n                                4,\r\n                                count\r\n                            );\r\n                            mapItem.node.y =\r\n                                -this._heightHalf -\r\n                                51 * rowIndex -\r\n                                20 * columnIndex;\r\n                            mapItem.node.x =\r\n                                this._widthHalf -\r\n                                31 * rowIndex +\r\n                                75 * columnIndex;\r\n                            this.mapContent.addChild(mapItem.node);\r\n                            count++;\r\n                            if (0 == areaUnlockCellIDs.length) {\r\n                                this.showNextCellNode();\r\n                            }\r\n                        }\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            this.showNextCellNode();\r\n        }\r\n    }\r\n\r\n    private onHideOneHeroByCellID(): void {}\r\n\r\n    private onHidShowHeroByCellID(): void {}\r\n\r\n    private onHideGoBattle(): void {}\r\n\r\n    public showNextCellNode(): void {\r\n        this.nextCompTimes.active = false;\r\n        const nextLockedCell = gm.data.mapCell_data.getNextLockCell();\r\n        if (nextLockedCell) {\r\n            if (\r\n                this.mapContent.getChildByName(nextLockedCell.cellID.toString())\r\n            ) {\r\n                this.nextCompTimes.active = true;\r\n                this.nextCompTimes.zIndex = gm.const.MAX_CELL_NUM + 1;\r\n                this.nextCompTimes.y =\r\n                    this.mapContent.getChildByName(\r\n                        nextLockedCell.cellID.toString()\r\n                    ).y + 90;\r\n                this.nextCompTimes.x =\r\n                    this.mapContent.getChildByName(\r\n                        nextLockedCell.cellID.toString()\r\n                    ).x + 30;\r\n                this.nextCompTimes.children[2].children[0].width = Math.min(\r\n                    (Math.floor(gm.data.mapCell_data.role_compose_times) /\r\n                        nextLockedCell.comTimes) *\r\n                        48,\r\n                    48\r\n                );\r\n                this.nextCompTimes.children[2].children[0].width = Math.max(\r\n                    this.nextCompTimes.children[2].children[0].width,\r\n                    20\r\n                );\r\n                this.nextCompTimes.children[1].getComponent(cc.Label).string =\r\n                    \"\";\r\n            }\r\n        } else {\r\n            this._nextOpenCell = null;\r\n        }\r\n    }\r\n\r\n    private showBuildMertarilFull(buildID: number): void {\r\n        if (\r\n            gm.data.mapCell_data.isGuide &&\r\n            this.roleGuideBuildUpgrade.active &&\r\n            buildID == this._buildID\r\n        ) {\r\n            this.mask.active = false;\r\n            this.roleGuideUpgradeBtn.getComponent(cc.Button).interactable =\r\n                false;\r\n\r\n            let keys = 0;\r\n            for (\r\n                let index = 0;\r\n                index < this.roleGuideBuildMertrailNode.childrenCount;\r\n                index++\r\n            ) {\r\n                const materialNode =\r\n                    this.roleGuideBuildMertrailNode.children[index];\r\n                if (materialNode.active) {\r\n                    const materialProgress =\r\n                        Math.min(\r\n                            this._buildMeatril[index].max,\r\n                            TempData.getBuildGuideMertarilNumByID(\r\n                                buildID,\r\n                                this._buildMeatril[index].id\r\n                            )\r\n                        ) / this._buildMeatril[index].max;\r\n                    materialNode.children[2].getComponent(cc.Label).string =\r\n                        TempData.getBuildGuideMertarilNumByID(\r\n                            buildID,\r\n                            this._buildMeatril[index].id\r\n                        ) +\r\n                        \"/\" +\r\n                        this._buildMeatril[index].max;\r\n                    if (\r\n                        materialProgress >\r\n                        materialNode.children[1].children[0].scaleX\r\n                    ) {\r\n                        materialNode.children[1].children[0].runAction(\r\n                            cc.scaleTo(0.2, materialProgress, 1)\r\n                        );\r\n                    }\r\n\r\n                    if (\r\n                        TempData.getBuildGuideMertarilNumByID(\r\n                            buildID,\r\n                            this._buildMeatril[index].id\r\n                        ) >= this._buildMeatril[index].max\r\n                    ) {\r\n                        materialNode.children[4].active = false;\r\n                        keys++;\r\n                    }\r\n                }\r\n            }\r\n            const buildConfig = gm.data.config_data.getBuildCfgByID(buildID);\r\n            if (buildConfig) {\r\n                const buildData = gm.data.mapCell_data.getBuildDataByType(\r\n                    buildConfig.buildType\r\n                );\r\n                if (\r\n                    buildData &&\r\n                    keys == Object.keys(buildData.metrailData).length\r\n                ) {\r\n                    this.roleGuideUpgradeBtn.getComponent(\r\n                        cc.Button\r\n                    ).interactable = true;\r\n                }\r\n            }\r\n            this.checkHandAnimDelay();\r\n        }\r\n        var n, r;\r\n\r\n        if (!gm.data.mapCell_data.isGuide && !this.roleBuildUpgrade.active) {\r\n            const buildConfig = gm.data.config_data.getBuildCfgByID(buildID);\r\n            if (buildConfig) {\r\n                const buildData = gm.data.mapCell_data.getBuildDataByType(\r\n                    buildConfig.buildType\r\n                );\r\n                if (buildData) {\r\n                    for (const metrail in buildData.metrailData) {\r\n                        if (\r\n                            buildData.metrailData[metrail].cur <\r\n                            buildData.metrailData[metrail].max\r\n                        ) {\r\n                            return;\r\n                        }\r\n                    }\r\n                    this.showBuildUpgrade(buildID, buildData.cellID);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public playGuideBarrelFly(num: number): void {\r\n        gm.ui.show_coin_fly(\r\n            RewardIdEnum.BARREL,\r\n            this.mapContent\r\n                ?.getChildByName(\"186\")\r\n                .convertToWorldSpaceAR(cc.Vec3.ZERO),\r\n            num,\r\n            this.barrelNode.convertToWorldSpaceAR(cc.Vec3.ZERO)\r\n        );\r\n    }\r\n\r\n    private onClickGuideUplvl(): void {\r\n        this.roleGuideBuildUpgrade.active = false;\r\n        const cfgByID = gm.data.config_data.getBuildCfgByID(this._buildID);\r\n        if (!cfgByID) return;\r\n        gm.audio.play_effect(gm.const.AUDIO_6_JIANZUSHEGNJI);\r\n        this.playBuildUpgradeAnim(this._buildID);\r\n        gm.data.mapCell_data.upgradeBuild(cfgByID.buildID);\r\n        this.handAnim.active = false;\r\n    }\r\n\r\n    public playBuildUpgradeAnim(buildID: number) {\r\n        const buildConfig = gm.data.config_data.getBuildCfgByID(buildID);\r\n        if (buildConfig) {\r\n            Utils.async_set_sprite_frame(\r\n                this.buildUpAnim.children[1].getComponent(cc.Sprite),\r\n                BundleName.MAP,\r\n                \"res/build/\" + buildConfig.buildID,\r\n                () => {\r\n                    Utils.async_set_sprite_frame(\r\n                        this.buildUpAnim.children[2].getComponent(cc.Sprite),\r\n                        BundleName.MAP,\r\n                        \"res/build/\" + buildConfig.nextBuildID,\r\n                        () => {\r\n                            this.buildUpAnim.active = true;\r\n\r\n                            if (\r\n                                buildConfig.buildType !=\r\n                                BuildTypeEnum.SEAGOINGBOAT_TYPE\r\n                            ) {\r\n                                const buildData =\r\n                                    gm.data.mapCell_data.getBuildDataByType(\r\n                                        buildConfig.buildType\r\n                                    );\r\n\r\n                                if (!buildData) {\r\n                                    return;\r\n                                }\r\n                                Utils.async_set_sprite_frame(\r\n                                    this.buildUpAnim.children[1].getComponent(\r\n                                        cc.Sprite\r\n                                    ),\r\n                                    BundleName.MAP,\r\n                                    \"res/build/\" + buildConfig.buildID\r\n                                );\r\n                                Utils.async_set_sprite_frame(\r\n                                    this.buildUpAnim.children[2].getComponent(\r\n                                        cc.Sprite\r\n                                    ),\r\n                                    BundleName.MAP,\r\n                                    \"res/build/\" + buildConfig.nextBuildID\r\n                                );\r\n\r\n                                const worldPosition = this.mapContent\r\n                                    .getChildByName(buildData.cellID.toString())\r\n                                    .getComponent(MainMapItem)\r\n                                    .mapBuildNode.children[0].convertToWorldSpaceAR(\r\n                                        this.mapContent\r\n                                            .getChildByName(\r\n                                                buildData.cellID.toString()\r\n                                            )\r\n                                            .getComponent(MainMapItem)\r\n                                            .mapBuildNode.children[0].getComponent(\r\n                                                BuildIconItem\r\n                                            ).itemImg.node.position\r\n                                    );\r\n                                const localPosition =\r\n                                    this.node.convertToNodeSpaceAR(\r\n                                        worldPosition\r\n                                    );\r\n\r\n                                this.buildUpAnim.position = localPosition;\r\n                                this.mapContent\r\n                                    .getChildByName(buildData.cellID.toString())\r\n                                    .getComponent(MainMapItem)\r\n                                    .setBuildImgOpacity(0);\r\n                            } else {\r\n                                const worldPosition =\r\n                                    this.ship.children[0].convertToWorldSpaceAR(\r\n                                        this.ship.children[0].getComponent(\r\n                                            BuildIconItem\r\n                                        ).itemImg.node.position\r\n                                    );\r\n                                const localPosition =\r\n                                    this.node.convertToNodeSpaceAR(\r\n                                        worldPosition\r\n                                    );\r\n                                this.buildUpAnim.position = localPosition;\r\n                                this.ship.opacity = 0;\r\n                            }\r\n\r\n                            this.buildUpAnim.getComponent(cc.Animation).play();\r\n                            this.buildUpAnim.scale = this.mapContent.scale;\r\n                            gm.ui.async_show_module(gm.const.FIREWORKS);\r\n                            this._buildID = buildConfig.nextBuildID;\r\n                        },\r\n                        this\r\n                    );\r\n                },\r\n                this\r\n            );\r\n        }\r\n    }\r\n\r\n    public showBuildUpgrade(buildID: number, cellID: number): void {\r\n        gm.ui.emit(\"build_show_stateIcon\", false);\r\n        if (gm.data.mapCell_data.isGuide) {\r\n            this.roleGuideBuildUpgrade.zIndex = 400;\r\n            this.roleGuideBuildUpgrade.active = true;\r\n            this.roleGuideUpgradeBtn.getComponent(cc.Button).interactable =\r\n                false;\r\n            this.roleGuideBuildUpgrade.scale =\r\n                1 - 0.5 * (this.mapContent.scale - 1);\r\n            this._buildMeatril = [];\r\n\r\n            for (\r\n                let index = 0;\r\n                index < this.roleGuideBuildMertrailNode.childrenCount;\r\n                index++\r\n            ) {\r\n                this.roleGuideBuildMertrailNode.children[index].active = false;\r\n            }\r\n\r\n            const buildConfig = gm.data.config_data.getBuildCfgByID(buildID);\r\n            if (buildConfig) {\r\n                this._buildID = buildID;\r\n                let height = 0;\r\n                const buildData = gm.data.mapCell_data.getBuildDataByType(\r\n                    buildConfig.buildType\r\n                );\r\n                for (const metrail in buildData.metrailData) {\r\n                    const metrailNode =\r\n                        this.roleGuideBuildMertrailNode.children[height];\r\n                    metrailNode.active = true;\r\n\r\n                    const itemConfig = gm.data.config_data.getItemCfgByID(\r\n                        buildData.metrailData[metrail].id\r\n                    );\r\n                    if (itemConfig) {\r\n                        Utils.async_set_sprite_frame(\r\n                            metrailNode.children[0].getComponent(cc.Sprite),\r\n                            BundleName.MAP,\r\n                            \"res/\" + itemConfig.id\r\n                        );\r\n                        metrailNode.children[4].active = true;\r\n                        metrailNode.children[2].getComponent(cc.Label).string =\r\n                            buildData.metrailData[metrail].cur +\r\n                            \"/\" +\r\n                            buildData.metrailData[metrail].max;\r\n                        metrailNode.children[1].children[0].scaleX =\r\n                            buildData.metrailData[metrail].cur /\r\n                            buildData.metrailData[metrail].max;\r\n                    }\r\n                    this._buildMeatril.push(buildData.metrailData[metrail]);\r\n                    height++;\r\n                }\r\n\r\n                this.roleGuideBuildUpgradeBg.height = 88 + 54 * height;\r\n                this.roleGuideBuildUpgrade.children[3].x = 0;\r\n\r\n                if (buildConfig.buildType == BuildTypeEnum.SEAGOINGBOAT_TYPE) {\r\n                    this.roleGuideBuildUpgrade.y = this.ship.y + 10;\r\n                    this.roleGuideBuildUpgrade.x = this.ship.x - 20;\r\n                } else if (\r\n                    buildConfig.buildType == BuildTypeEnum.WHARFTAX_TYPE\r\n                ) {\r\n                    this.roleGuideBuildUpgrade.y =\r\n                        this.mapContent.getChildByName(cellID.toString()).y +\r\n                        10;\r\n                    this.roleGuideBuildUpgrade.x =\r\n                        this.mapContent.getChildByName(cellID.toString()).x +\r\n                        70;\r\n                    this.roleGuideBuildUpgrade.children[3].x = -80;\r\n                } else {\r\n                    this.roleGuideBuildUpgrade.y =\r\n                        this.mapContent.getChildByName(cellID.toString()).y +\r\n                        20;\r\n                    this.roleGuideBuildUpgrade.x =\r\n                        this.mapContent.getChildByName(cellID.toString()).x;\r\n                }\r\n\r\n                if (\r\n                    buildConfig.buildType == BuildTypeEnum.TOWER_TYPE &&\r\n                    15 == gm.data.mapCell_data.roleGuideVO.guideID\r\n                ) {\r\n                    this.checkHandAnimDelay();\r\n                }\r\n\r\n                if (\r\n                    buildConfig.buildType == BuildTypeEnum.TOWER_TYPE &&\r\n                    0 == buildConfig.buildLv\r\n                ) {\r\n                    gm.channel.report_event(\"ohayoo_game_guide\", {\r\n                        guideid: 21,\r\n                        guidedesc: cc.js.formatStr(\r\n                            \"%d.点击%s升级标志\",\r\n                            21,\r\n                            buildConfig.buildName\r\n                        ),\r\n                    });\r\n                }\r\n\r\n                let targetID = 116;\r\n                if (\r\n                    !(\r\n                        buildConfig.buildType != BuildTypeEnum.WHARFTAX_TYPE &&\r\n                        buildConfig.buildType !=\r\n                            BuildTypeEnum.SEAGOINGBOAT_TYPE &&\r\n                        buildConfig.buildType != BuildTypeEnum.TOWER_TYPE\r\n                    )\r\n                ) {\r\n                    targetID = 117;\r\n                }\r\n\r\n                this.lockSenceMoveMap(targetID, 1.5);\r\n            }\r\n        } else {\r\n            this.roleBuildUpgrade.scale = 1 - 0.5 * (this.mapContent.scale - 1);\r\n            this.roleBuildUpgrade\r\n                .getComponent(MapBuildUpgrade)\r\n                .initData(buildID, cellID);\r\n            this.roleBuildUpgrade.active = !this.roleBuildUpgrade.active;\r\n            if (this.roleBuildUpgrade.active) {\r\n                this.setMapUiShow(false);\r\n                const buildType =\r\n                    395 == cellID || 313 == cellID ? \"ship\" : cellID.toString();\r\n                this.roleBuildUpgrade.zIndex = gm.const.MAX_CELL_NUM + 3;\r\n\r\n                const targetPosition =\r\n                    this.mapContent.getChildByName(buildType).position;\r\n                const adjustedPosition = cc.v3(\r\n                    360 + -Math.abs(targetPosition.x) * this.mapContent.scale,\r\n                    Math.abs(targetPosition.y) * this.mapContent.scale - 300\r\n                );\r\n\r\n                this.mapContent.position = adjustedPosition;\r\n                this.roleBuildUpgrade.y =\r\n                    this.mapContent.getChildByName(buildType).y + 88;\r\n                this.roleBuildUpgrade.x =\r\n                    this.mapContent.getChildByName(buildType).x + 5;\r\n            }\r\n        }\r\n    }\r\n\r\n    public setMapUiShow(active: boolean): void {\r\n        if (active) this.mapUI.active = !gm.data.mapCell_data.isGuide;\r\n    }\r\n\r\n    private lockMap(): void {}\r\n\r\n    public showBattleEndCoin(num: number): void {\r\n        if (num > 0) {\r\n            gm.ui.show_coin_fly(RewardIdEnum.GOLD, this.ship?.position);\r\n        }\r\n    }\r\n\r\n    private onClickLockBtn(data: cc.Button): void {\r\n        data.target.children[0].active = !data.target.children[0].active;\r\n        this._isLockMoveMap = data.target.children[0].active;\r\n    }\r\n\r\n    private onClickShop(): void {\r\n        if (\r\n            !gm.data.mapCell_data.buildData[BuildTypeEnum.STALL_TYPE] ||\r\n            gm.data.mapCell_data.buildData[BuildTypeEnum.STALL_TYPE].buildLvl <\r\n                1\r\n        ) {\r\n            gm.ui.show_notice(\"Gian hàng vẫn chưa được mở khóa!!!!\");\r\n        } else {\r\n            gm.ui.async_show_module(gm.const.Store);\r\n        }\r\n    }\r\n\r\n    private composeTimesChange(): void {\r\n        this.showNextCellNode();\r\n    }\r\n\r\n    public lockSenceMoveMap(\r\n        targetID: number,\r\n        scale: number = 1,\r\n        callback: Function | null = null,\r\n        context: TaskMainEntry | EventScriptManager | MainMapUI = null\r\n    ): void {\r\n        this.mask.active = true;\r\n        if (scale === undefined) scale = 1;\r\n        if (callback === undefined) callback = null;\r\n        if (context === undefined) context = null;\r\n\r\n        let childName = \"\";\r\n        if (targetID == 395 || targetID == 313) {\r\n            childName = \"ship\";\r\n        } else {\r\n            childName = targetID.toString();\r\n        }\r\n        const position = this.mapContent.getChildByName(childName).position;\r\n        const targetPosition = new cc.Vec2(\r\n            410 + -Math.abs(position.x) * scale,\r\n            Math.abs(position.y) * scale + 100\r\n        );\r\n        this.mapContent?.stopAllActions();\r\n        this.mapContent?.runAction(\r\n            cc.sequence(\r\n                cc.spawn(cc.scaleTo(1, scale), cc.moveTo(1, targetPosition)),\r\n                cc.callFunc(() => {\r\n                    this.mask.active = false;\r\n                    if (callback) callback.apply(context);\r\n                })\r\n            )\r\n        );\r\n        if (this.roleGuideBuildUpgrade?.active) {\r\n            this.roleGuideBuildUpgrade.runAction(\r\n                cc.scaleTo(1, 1 - 0.5 * (scale - 1))\r\n            );\r\n        }\r\n        if (this.roleBuildUpgrade?.active) {\r\n            this.roleBuildUpgrade.runAction(\r\n                cc.scaleTo(1, 1 - 0.5 * (scale - 1))\r\n            );\r\n        }\r\n    }\r\n\r\n    private onClickBook(): void {\r\n        gm.ui.show_panel(gm.const.BOOK);\r\n    }\r\n\r\n    private onClickTestMove(): void {\r\n        this.playGuideBarrelFly(5);\r\n    }\r\n\r\n    public playComposeAnim(number: number): void {\r\n        gm.audio.play_effect(gm.const.AUDIO_161_COMPOSE);\r\n        const position = this.mapContent\r\n            ?.getChildByName(number.toString())\r\n            .convertToWorldSpaceAR(\r\n                this.mapContent\r\n                    ?.getChildByName(number.toString())\r\n                    .getComponent(MainMapItem).touchNode.position\r\n            );\r\n        this.composeAnim.position =\r\n            this.mapContent?.convertToNodeSpaceAR(position);\r\n        this.composeAnim.active = true;\r\n        this.composeAnim.zIndex = 400;\r\n        this.composeAnim.y =\r\n            this.mapContent?.convertToNodeSpaceAR(position).y + 28;\r\n        this.composeAnim?.getComponent(cc.Animation).play();\r\n    }\r\n\r\n    public moveMapPosForGuide(\r\n        actionType: number,\r\n        moveDistance: number,\r\n        duration: number,\r\n        callback: Function | null,\r\n        context: EventScriptManager\r\n    ): void {\r\n        if (actionType == 0) {\r\n            if (gm.data.mapCell_data.getBuildDataByType(moveDistance)) {\r\n                this.lockSenceMoveMap(116, 0.1 * duration, callback, context);\r\n            }\r\n        } else if (actionType == 2) {\r\n            this.mask.active = true;\r\n            this.mapContent?.runAction(\r\n                cc.sequence(\r\n                    cc.moveBy(1, cc.v2(0, moveDistance)),\r\n                    cc.callFunc(() => {\r\n                        this.mask.active = false;\r\n                        if (callback) callback.apply(context);\r\n                    })\r\n                )\r\n            );\r\n        } else if (actionType == 3) {\r\n            this.barrelNode.active = true;\r\n            this.barrelNode.y = moveDistance == 105 ? -208 : 105;\r\n            this.mask.active = true;\r\n            this.barrelNode?.runAction(\r\n                cc.sequence(\r\n                    cc.moveTo(1, cc.v2(0, moveDistance)),\r\n                    cc.callFunc(() => {\r\n                        this.mask.active = false;\r\n                        if (callback) callback.apply(context);\r\n                    })\r\n                )\r\n            );\r\n        }\r\n    }\r\n\r\n    private guideItemToBuild(itemID: number, targetCellID: number): void {\r\n        let cellID = 0;\r\n        const itemConfig = gm.data.config_data.getItemCfgByID(itemID);\r\n        if (itemConfig) {\r\n            const itemDataArray =\r\n                gm.data.mapCell_data.itemData[itemConfig.type];\r\n            if (itemDataArray) {\r\n                let s = !1;\r\n                for (let index = 0; index < itemDataArray.length; index++) {\r\n                    if (itemDataArray[index].itemID == itemID && 0 == cellID) {\r\n                        cellID = itemDataArray[index].cellID;\r\n                        s = !0;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (12002 == itemID && !s)\r\n                    for (let index = 0; index < itemDataArray.length; index++) {\r\n                        if (\r\n                            12003 == itemDataArray[index].itemID &&\r\n                            0 == cellID\r\n                        ) {\r\n                            cellID = itemDataArray[index].cellID;\r\n                            s = !0;\r\n                            break;\r\n                        }\r\n                    }\r\n            }\r\n            if (cellID) {\r\n                this.handAnim.active = true;\r\n                this.handAnim.zIndex = 401;\r\n                const worldPosition = this.mapContent\r\n                    .getChildByName(a.toString())\r\n                    .convertToWorldSpaceAR(\r\n                        this.mapContent\r\n                            .getChildByName(a.toString())\r\n                            .getComponent(MainMapItem).touchNode.position\r\n                    );\r\n                const localPosition =\r\n                    this.mapContent.convertToNodeSpaceAR(worldPosition);\r\n                let targetWorldPos;\r\n                if (395 == targetCellID || 313 == targetCellID) {\r\n                    targetWorldPos =\r\n                        this.ship.children[0].convertToWorldSpaceAR(\r\n                            this.ship.children[0].getComponent(BuildIconItem)\r\n                                .itemImg.node.position\r\n                        );\r\n                } else {\r\n                    targetWorldPos = this.mapContent\r\n                        .getChildByName(targetCellID.toString())\r\n                        .getComponent(MainMapItem)\r\n                        .mapBuildNode.children[0].convertToWorldSpaceAR(\r\n                            this.mapContent\r\n                                .getChildByName(targetCellID.toString())\r\n                                .getComponent(MainMapItem)\r\n                                .mapBuildNode.children[0].getComponent(\r\n                                    BuildIconItem\r\n                                ).itemImg.node.position\r\n                        );\r\n                }\r\n                const targetLocalPos =\r\n                    this.mapContent.convertToNodeSpaceAR(targetWorldPos);\r\n                this.handAnim.position = localPosition;\r\n                this.handAnim.stopAllActions();\r\n                this.handAnim.getComponent(HandAnim).onStop();\r\n\r\n                const moveDuration = Math.floor(\r\n                    targetLocalPos.sub(localPosition).mag() / 60\r\n                );\r\n                this.handAnim.runAction(\r\n                    cc.repeatForever(\r\n                        cc.sequence(\r\n                            cc.moveTo(\r\n                                0.7 + 0.1 * moveDuration,\r\n                                cc.v2(targetLocalPos)\r\n                            ),\r\n                            cc.moveTo(\r\n                                0.3 + 0.05 * moveDuration,\r\n                                cc.v2(localPosition)\r\n                            )\r\n                        )\r\n                    )\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    private guideWaterBarrel(): void {\r\n        this.handAnim.active = true;\r\n        this.handAnim.zIndex = 401;\r\n        const position = this.barrelParentNode.children[\r\n            this.barrelParentNode.childrenCount - 1\r\n        ].convertToWorldSpaceAR(\r\n            this.barrelParentNode.children[\r\n                this.barrelParentNode.childrenCount - 1\r\n            ].children[2].position\r\n        );\r\n        const localPosition = this.mapContent.convertToNodeSpaceAR(position);\r\n        this.handAnim.position = cc.v3(localPosition.x + 30, localPosition.y);\r\n    }\r\n\r\n    private guideLandBarrel(): void {\r\n        const roleMapData = gm.data.mapCell_data.role_map_data;\r\n        for (let item in roleMapData) {\r\n            if (11006 == roleMapData[item].itemID) {\r\n                this.handAnim.active = true;\r\n                this.handAnim.zIndex = 401;\r\n                this.handAnim.position = cc.v3(\r\n                    this.mapContent.getChildByName(item).x + 25,\r\n                    this.mapContent.getChildByName(item).y + 88\r\n                );\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private guideHeroToCompse(heroID: number, itemID: number): void {\r\n        this.handAnim.active = true;\r\n        let heroCellID = 0;\r\n        let heroCell = 0;\r\n\r\n        if (0 != heroID) {\r\n            const heroConfig = gm.data.config_data.getHeroCfgByID(heroID);\r\n            if (heroConfig) {\r\n                const heroListForRole =\r\n                    gm.data.mapCell_data.heroData[heroConfig.occupation];\r\n                for (const heroKey in heroListForRole) {\r\n                    if (heroListForRole[heroKey].itemID == heroID) {\r\n                        heroCellID = heroListForRole[heroKey].cellID;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (3e4 <= itemID) {\r\n                    for (const heroKey in heroListForRole) {\r\n                        if (\r\n                            heroListForRole[heroKey].itemID == itemID &&\r\n                            heroListForRole[heroKey].cellID != heroCellID\r\n                        ) {\r\n                            heroCell = heroListForRole[heroKey].cellID;\r\n                            break;\r\n                        }\r\n                    }\r\n                } else {\r\n                    const itemConfig =\r\n                        gm.data.config_data.getItemCfgByID(itemID);\r\n                    const itemListByType =\r\n                        gm.data.mapCell_data.itemData[itemConfig.type];\r\n                    for (const itemKey in itemListByType) {\r\n                        if (itemListByType[itemKey].itemID == itemID) {\r\n                            heroCell = itemListByType[itemKey].cellID;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (0 != heroCell) {\r\n                    this.handAnim.active = true;\r\n                    this.handAnim.zIndex = 401;\r\n\r\n                    const worldStartPos = this.mapContent\r\n                        .getChildByName(heroCellID.toString())\r\n                        .convertToWorldSpaceAR(\r\n                            this.mapContent\r\n                                .getChildByName(heroCellID.toString())\r\n                                .getComponent(MainMapItem).touchNode.position\r\n                        );\r\n                    const localTargetPos =\r\n                        this.mapContent.convertToNodeSpaceAR(worldStartPos);\r\n                    const targetWorldPos = this.mapContent\r\n                        .getChildByName(heroCell.toString())\r\n                        .convertToWorldSpaceAR(\r\n                            this.mapContent\r\n                                .getChildByName(heroCell.toString())\r\n                                .getComponent(MainMapItem).touchNode.position\r\n                        );\r\n                    const TargetPos =\r\n                        this.mapContent.convertToNodeSpaceAR(targetWorldPos);\r\n\r\n                    this.handAnim.position = localTargetPos;\r\n                    this.handAnim.stopAllActions();\r\n                    this.handAnim.getComponent(HandAnim).onStop();\r\n                    const distanceFrames = Math.floor(\r\n                        TargetPos.sub(localTargetPos).mag() / 60\r\n                    );\r\n                    this.handAnim.runAction(\r\n                        cc.repeatForever(\r\n                            cc.sequence(\r\n                                cc.moveTo(\r\n                                    0.7 + 0.1 * distanceFrames,\r\n                                    cc.v2(TargetPos)\r\n                                ),\r\n                                cc.moveTo(\r\n                                    0.3 + 0.05 * distanceFrames,\r\n                                    cc.v2(localTargetPos)\r\n                                )\r\n                            )\r\n                        )\r\n                    );\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkHandAnim(): void {\r\n        const guideID = this.guideID;\r\n        this.handAnim.active = false;\r\n        this.handAnim.stopAllActions();\r\n\r\n        if (gm.data.mapCell_data.isGuide) {\r\n            if (0 < guideID && 1 == guideID) {\r\n                const buildeData = gm.data.mapCell_data.getBuildDataByType(1);\r\n                if (0 == buildeData.buildLvl) {\r\n                    this.guideItemToBuild((a = 16005), buildeData.cellID);\r\n                }\r\n            } else if (1 != gm.data.mapCell_data.roleGuideVO.guideID) {\r\n                if (\r\n                    2 == gm.data.mapCell_data.roleGuideVO.guideID ||\r\n                    3 == gm.data.mapCell_data.roleGuideVO.guideID\r\n                ) {\r\n                    var a = 30001,\r\n                        i = 18001;\r\n                    if (1 == gm.data.mapCell_data.role_compose_total_times) {\r\n                        a = 30001;\r\n                        i = 18001;\r\n                    } else if (\r\n                        2 == gm.data.mapCell_data.role_compose_total_times\r\n                    ) {\r\n                        i = a = 31001;\r\n                    }\r\n\r\n                    this.guideHeroToCompse(a, i);\r\n                    return;\r\n                }\r\n\r\n                if (4 == gm.data.mapCell_data.roleGuideVO.guideID) {\r\n                    if (gm.data.mapCell_data.roleGuideVO.isEnd) {\r\n                        this.guideNewBuildUpSort(BuildTypeEnum.TOWER_TYPE);\r\n                    }\r\n                } else if (6 != gm.data.mapCell_data.roleGuideVO.guideID) {\r\n                    if (8 != gm.data.mapCell_data.roleGuideVO.guideID) {\r\n                        if (9 == gm.data.mapCell_data.roleGuideVO.guideID) {\r\n                            if (gm.data.mapCell_data.isFirstGetCoin) {\r\n                                this.handAnim.active = true;\r\n                                this.handAnim.zIndex = 401;\r\n                                const cellID =\r\n                                    gm.data.mapCell_data.buildData[\r\n                                        BuildTypeEnum.PRIVATEHOUSING_TYPE\r\n                                    ].cellID;\r\n                                const position = this.mapContent\r\n                                    .getChildByName(cellID.toString())\r\n                                    .getComponent(MainMapItem)\r\n                                    .mapBuildNode.children[0].convertToWorldSpaceAR(\r\n                                        this.mapContent\r\n                                            .getChildByName(cellID.toString())\r\n                                            .getComponent(MainMapItem)\r\n                                            .mapBuildNode.children[0].getComponent(\r\n                                                BuildIconItem\r\n                                            ).productNode.position\r\n                                    );\r\n                                const nodeSpace =\r\n                                    this.mapContent.convertToNodeSpaceAR(\r\n                                        position\r\n                                    );\r\n                                this.handAnim.position = cc.v3(\r\n                                    nodeSpace.x + 40,\r\n                                    nodeSpace.y\r\n                                );\r\n                            } else if (\r\n                                gm.data.mapCell_data.role_openBarrel_Times < 14\r\n                            ) {\r\n                                if (\r\n                                    gm.data.mapCell_data.roleBarrelData\r\n                                        .curBarrelNum <= 0\r\n                                ) {\r\n                                    this.guideLandBarrel();\r\n                                }\r\n                            } else if (\r\n                                gm.data.mapCell_data.role_compose_total_times <\r\n                                9\r\n                            ) {\r\n                                a = 16002;\r\n                                if (\r\n                                    7 ==\r\n                                    gm.data.mapCell_data\r\n                                        .role_compose_total_times\r\n                                ) {\r\n                                    a = 16003;\r\n                                } else if (\r\n                                    8 ==\r\n                                    gm.data.mapCell_data\r\n                                        .role_compose_total_times\r\n                                ) {\r\n                                    a = 13001;\r\n                                }\r\n                                this.guideItemToCompse(a);\r\n                            } else if (\r\n                                9 ==\r\n                                gm.data.mapCell_data.role_compose_total_times\r\n                            ) {\r\n                                this.guideNewBuildUpSort(\r\n                                    BuildTypeEnum.SEAGOINGBOAT_TYPE\r\n                                );\r\n                            }\r\n                        } else if (\r\n                            10 == gm.data.mapCell_data.roleGuideVO.guideID\r\n                        ) {\r\n                            if (\r\n                                gm.data.mapCell_data.role_openBarrel_Times < 20\r\n                            ) {\r\n                                if (\r\n                                    gm.data.mapCell_data.roleBarrelData\r\n                                        .curBarrelNum <= 0\r\n                                ) {\r\n                                    this.guideLandBarrel();\r\n                                }\r\n                            } else if (\r\n                                gm.data.mapCell_data.role_compose_total_times <\r\n                                12\r\n                            ) {\r\n                                this.guideHeroToCompse(\r\n                                    (a = 30001),\r\n                                    (i = 18001)\r\n                                );\r\n                            } else if (\r\n                                12 ==\r\n                                gm.data.mapCell_data.role_compose_total_times\r\n                            ) {\r\n                                this.guideNewBuildUpSort(\r\n                                    BuildTypeEnum.SEAGOINGBOAT_TYPE\r\n                                );\r\n                            }\r\n                        } else if (\r\n                            11 == gm.data.mapCell_data.roleGuideVO.guideID\r\n                        ) {\r\n                            if (\r\n                                gm.data.mapCell_data.roleGuideVO.isEnd &&\r\n                                gm.data.mapCell_data.role_compose_total_times <\r\n                                    12\r\n                            ) {\r\n                                this.guideHeroToCompse(\r\n                                    (a = 30001),\r\n                                    (i = 18001)\r\n                                );\r\n                            }\r\n                        } else if (\r\n                            12 == gm.data.mapCell_data.roleGuideVO.guideID\r\n                        ) {\r\n                            if (\r\n                                gm.data.mapCell_data.roleGuideVO.isEnd &&\r\n                                12 ==\r\n                                    gm.data.mapCell_data\r\n                                        .role_compose_total_times\r\n                            ) {\r\n                                this.guideHeroToCompse(\r\n                                    (a = 31001),\r\n                                    (i = 31001)\r\n                                );\r\n                            }\r\n                        } else if (\r\n                            15 == gm.data.mapCell_data.roleGuideVO.guideID &&\r\n                            gm.data.mapCell_data.roleGuideVO.isEnd\r\n                        ) {\r\n                            if (\r\n                                gm.data.mapCell_data.role_compose_total_times <\r\n                                5\r\n                            ) {\r\n                                var o = [16004, 17002];\r\n                                for (var n = 0; n < o.length; n++) {\r\n                                    var r = o[n],\r\n                                        s =\r\n                                            gm.data.config_data.getItemCfgByID(\r\n                                                r\r\n                                            );\r\n                                    if (\r\n                                        s &&\r\n                                        gm.data.mapCell_data.itemData[s.type]\r\n                                    ) {\r\n                                        for (\r\n                                            var c = !1, l = 0;\r\n                                            l <\r\n                                            gm.data.mapCell_data.itemData[\r\n                                                s.type\r\n                                            ].length;\r\n                                            l++\r\n                                        )\r\n                                            if (\r\n                                                gm.data.mapCell_data.itemData[\r\n                                                    s.type\r\n                                                ][l].itemID >= r\r\n                                            ) {\r\n                                                c = !0;\r\n                                                break;\r\n                                            }\r\n                                        if (!c) {\r\n                                            this.guideItemToCompse(r - 1);\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            } else if (\r\n                                5 ==\r\n                                gm.data.mapCell_data.role_compose_total_times\r\n                            ) {\r\n                                this.guideNewBuildUpSort(\r\n                                    BuildTypeEnum.TOWER_TYPE\r\n                                );\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (gm.data.mapCell_data.role_openBarrel_Times < 10) {\r\n                            if (\r\n                                gm.data.mapCell_data.roleBarrelData\r\n                                    .curBarrelNum <= 0\r\n                            ) {\r\n                                this.guideLandBarrel();\r\n                            }\r\n                        } else if (\r\n                            gm.data.mapCell_data.role_compose_total_times < 6\r\n                        ) {\r\n                            a = 16002;\r\n                            if (\r\n                                4 ==\r\n                                gm.data.mapCell_data.role_compose_total_times\r\n                            ) {\r\n                                a = 16003;\r\n                            } else if (\r\n                                5 ==\r\n                                gm.data.mapCell_data.role_compose_total_times\r\n                            ) {\r\n                                a = 15001;\r\n                            }\r\n                            this.guideItemToCompse(a);\r\n                        } else if (\r\n                            6 == gm.data.mapCell_data.role_compose_total_times\r\n                        ) {\r\n                            this.guideNewBuildUpSort(\r\n                                BuildTypeEnum.PRIVATEHOUSING_TYPE\r\n                            );\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (gm.data.mapCell_data.role_openBarrel_Times < 6) {\r\n                        if (0 < this.barrelParentNode.childrenCount) {\r\n                            this.guideWaterBarrel();\r\n                        } else {\r\n                            this.guideLandBarrel();\r\n                        }\r\n                    } else if (\r\n                        6 == gm.data.mapCell_data.role_openBarrel_Times\r\n                    ) {\r\n                        if (\r\n                            3 == gm.data.mapCell_data.role_compose_total_times\r\n                        ) {\r\n                            this.guideNewBuildUpSort(\r\n                                BuildTypeEnum.WHARFTAX_TYPE\r\n                            );\r\n                        } else {\r\n                            a = 16003;\r\n                            if (\r\n                                2 ==\r\n                                gm.data.mapCell_data.role_compose_total_times\r\n                            ) {\r\n                                this.guideItemToCompse(a);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (gm.data.mapCell_data.role_openBarrel_Times < 3) {\r\n                    if (0 < this.barrelParentNode.childrenCount) {\r\n                        gm.channel.report_event(\"ohayoo_game_guide\", {\r\n                            guideid: 2,\r\n                            guidedesc: \"2.点击水上木桶\",\r\n                        });\r\n                        this.guideWaterBarrel();\r\n                    } else {\r\n                        gm.channel.report_event(\"ohayoo_game_guide\", {\r\n                            guideid: 3,\r\n                            guidedesc: \"3.打开木桶\",\r\n                        });\r\n                        this.guideLandBarrel();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private guideItemToCompse(itemID: number) {\r\n        this.handAnim.active = true;\r\n        let firstCellID: number = 0;\r\n        let secondCellID: number = 0;\r\n\r\n        if (itemID === 0) return;\r\n        let itemConfig = gm.data.config_data.getItemCfgByID(itemID);\r\n        if (!itemConfig) return;\r\n        let itemType = itemConfig.type;\r\n        let itemList = gm.data.mapCell_data.itemData[itemType];\r\n\r\n        for (let item of itemList) {\r\n            if (item.itemID == itemID) {\r\n                firstCellID == 0\r\n                    ? (firstCellID = item.cellID)\r\n                    : secondCellID === 0 && (secondCellID = item.cellID);\r\n            }\r\n        }\r\n\r\n        this.handAnim.active = true;\r\n        this.handAnim.zIndex = 401;\r\n        let firstNode: cc.Node = this.mapContent.getChildByName(\r\n            firstCellID.toString()\r\n        );\r\n        let secondNode: cc.Node = this.mapContent.getChildByName(\r\n            secondCellID.toString()\r\n        );\r\n\r\n        if (firstNode && secondNode) {\r\n            const firstNodePosition = firstNode.convertToWorldSpaceAR(\r\n                firstNode.getComponent(MainMapItem).touchNode.position\r\n            );\r\n            const firstNode2 =\r\n                this.mapContent?.convertToNodeSpaceAR(firstNodePosition);\r\n            const secondNodePosition = secondNode.convertToWorldSpaceAR(\r\n                secondNode.getComponent(MainMapItem).touchNode.position\r\n            );\r\n            const secondNode2 =\r\n                this.mapContent?.convertToNodeSpaceAR(secondNodePosition);\r\n\r\n            this.handAnim.position = new cc.Vec3(firstNode2.x, firstNode2.y);\r\n            this.handAnim?.stopAllActions();\r\n            this.handAnim?.getComponent(HandAnim).onStop();\r\n\r\n            const distance = Math.floor(secondNode2.sub(firstNode2).mag() / 60);\r\n            this.handAnim?.runAction(\r\n                cc.repeatForever(\r\n                    cc.sequence(\r\n                        cc.moveTo(0.7 + 0.1 * distance, cc.v2(secondNode2)),\r\n                        cc.moveTo(0.3 + 0.05 * distance, cc.v2(firstNode2))\r\n                    )\r\n                )\r\n            );\r\n        }\r\n    }\r\n\r\n    private guideBuildUpBtn(buildID: number): void {\r\n        this.handAnim.active = true;\r\n        this.handAnim.zIndex = 401;\r\n        let position;\r\n        let buildIdentifier = \"\";\r\n\r\n        if (buildID === 395 || buildID === 313) {\r\n            buildIdentifier = \"ship\";\r\n        } else {\r\n            buildIdentifier = buildID.toString();\r\n        }\r\n\r\n        if (buildIdentifier === \"ship\") {\r\n            position = this.ship?.children[0].convertToWorldSpaceAR(\r\n                this.ship.children[0].getComponent(BuildIconItem).buildStateIcon\r\n                    .node.position\r\n            );\r\n        } else {\r\n            position = this.mapContent\r\n                ?.getChildByName(buildIdentifier)\r\n                .getComponent(MainMapItem)\r\n                .mapBuildNode.children[0].convertToWorldSpaceAR(\r\n                    this.mapContent\r\n                        ?.getChildByName(buildIdentifier)\r\n                        .getComponent(MainMapItem)\r\n                        .mapBuildNode.children[0].getComponent(BuildIconItem)\r\n                        .buildStateIcon.node.position\r\n                );\r\n        }\r\n\r\n        position = this.mapContent?.convertToNodeSpaceAR(position);\r\n        this.handAnim.position = position;\r\n    }\r\n\r\n    private guideBuildUpSort(buildType: number) {\r\n        if (this.roleGuideBuildUpgrade?.active) {\r\n            if (this.roleGuideBuildUpgrade.children[1].active) {\r\n                this.handAnim.active = true;\r\n                this.handAnim.stopAllActions();\r\n                this.handAnim.zIndex = 401;\r\n                let worldPosition =\r\n                    this.roleGuideBuildUpgrade.children[1].children[2].convertToWorldSpaceAR(\r\n                        cc.Vec3.ZERO\r\n                    );\r\n                worldPosition =\r\n                    this.mapContent.convertToNodeSpaceAR(worldPosition);\r\n                this.handAnim.position = cc.v3(\r\n                    worldPosition.x + 40,\r\n                    worldPosition.y\r\n                );\r\n            } else {\r\n                let buildData =\r\n                    gm.data.mapCell_data.getBuildDataByType(buildType);\r\n                if (buildData) {\r\n                    this.handAnim.active = true;\r\n                    this.handAnim.zIndex = 401;\r\n                    let materialData = TempData.getBuildGuideMertarilData();\r\n                    for (let materialKey in buildData.metrailData) {\r\n                        let materialExists = false;\r\n                        if (materialData) {\r\n                            for (\r\n                                let r = 0;\r\n                                r < materialData.metrailList.length;\r\n                                r++\r\n                            ) {\r\n                                if (\r\n                                    parseInt(materialKey) ===\r\n                                    materialData.metrailList[r].itemType\r\n                                ) {\r\n                                    materialExists = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        if (!materialExists) {\r\n                            let itemID =\r\n                                parseInt(materialKey) === PropTypeEnum.WOOD_TYPE\r\n                                    ? 16004\r\n                                    : buildData.metrailData[materialKey].id;\r\n                            itemID =\r\n                                parseInt(materialKey) === PropTypeEnum.IRON_TYPE\r\n                                    ? 17002\r\n                                    : itemID;\r\n                            this.guideItemToBuild(itemID, buildData.cellID);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            const buildData =\r\n                gm.data.mapCell_data.getBuildDataByType(buildType);\r\n            if (buildData) this.guideBuildUpBtn(buildData.cellID);\r\n        }\r\n    }\r\n\r\n    private guideNewBuildUpSort(buildType: number) {\r\n        if (this.roleGuideBuildUpgrade?.active) {\r\n            if (this.roleGuideBuildUpgrade.children[1].active) {\r\n                const buildData =\r\n                    gm.data.mapCell_data.getBuildDataByType(buildType);\r\n                this.handAnim.active = true;\r\n                this.handAnim.zIndex = 401;\r\n\r\n                let materialData = TempData.getBuildGuideMertarilData();\r\n                let materialIndex = 0;\r\n\r\n                for (let materialKey in buildData.metrailData) {\r\n                    if (!materialData) {\r\n                        let worldPosition =\r\n                            this.roleGuideBuildMertrailNode.children[\r\n                                materialIndex\r\n                            ].children[4].convertToWorldSpaceAR(cc.Vec3.ZERO);\r\n                        let localPosition =\r\n                            this.mapContent.convertToNodeSpaceAR(worldPosition);\r\n                        this.handAnim.position = cc.v3(\r\n                            localPosition.x + 30,\r\n                            localPosition.y\r\n                        );\r\n                        return;\r\n                    }\r\n\r\n                    let materialExceeded = false;\r\n                    for (let c = 0; c < materialData.metrailList.length; c++) {\r\n                        if (\r\n                            this._buildMeatril[c].id ===\r\n                                buildData.metrailData[materialKey].id &&\r\n                            TempData.getBuildGuideMertarilNumByID(\r\n                                buildData.buildID,\r\n                                this._buildMeatril[c].id\r\n                            ) >= this._buildMeatril[c].max\r\n                        ) {\r\n                            materialExceeded = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!materialExceeded) {\r\n                        let worldPosition =\r\n                            this.roleGuideBuildMertrailNode.children[\r\n                                materialIndex\r\n                            ].children[4].convertToWorldSpaceAR(cc.Vec3.ZERO);\r\n                        let localPosition =\r\n                            this.mapContent.convertToNodeSpaceAR(worldPosition);\r\n                        this.handAnim.position = cc.v3(\r\n                            localPosition.x + 30,\r\n                            localPosition.y\r\n                        );\r\n                        return;\r\n                    }\r\n                    materialIndex++;\r\n                }\r\n\r\n                this.handAnim.active = true;\r\n                this.handAnim.stopAllActions();\r\n                this.handAnim.zIndex = 401;\r\n\r\n                let upgradeButtonWorldPosition =\r\n                    this.roleGuideUpgradeBtn.convertToWorldSpaceAR(\r\n                        cc.Vec3.ZERO\r\n                    );\r\n                let upgradeButtonLocalPosition =\r\n                    this.mapContent.convertToNodeSpaceAR(\r\n                        upgradeButtonWorldPosition\r\n                    );\r\n                this.handAnim.position = cc.v3(\r\n                    upgradeButtonLocalPosition.x + 40,\r\n                    upgradeButtonLocalPosition.y\r\n                );\r\n            }\r\n        } else if (gm.data.mapCell_data.getBuildDataByType(buildType)) {\r\n            const buildData =\r\n                gm.data.mapCell_data.getBuildDataByType(buildType);\r\n            this.guideBuildUpBtn(buildData.cellID);\r\n        }\r\n    }\r\n\r\n    private onClickGuideOneKeyAddItem(event: cc.Event, index: string): void {\r\n        const targetIndex = parseInt(index);\r\n        const buildConfig = gm.data.config_data.getBuildCfgByID(this._buildID);\r\n        if (!buildConfig) return;\r\n\r\n        const buildData = gm.data.mapCell_data.getBuildDataByType(\r\n            buildConfig.buildType\r\n        );\r\n        let currentIndex = 0;\r\n\r\n        for (let materialKey in buildData.metrailData) {\r\n            if (currentIndex === targetIndex) {\r\n                const itemConfig = gm.data.config_data.getItemCfgByID(\r\n                    buildData.metrailData[materialKey].id\r\n                );\r\n                if (itemConfig) {\r\n                    gm.data.mapCell_data.onekeyGetGuideAllMertrail(\r\n                        buildConfig.buildType,\r\n                        itemConfig.type\r\n                    );\r\n                }\r\n                break;\r\n            }\r\n            currentIndex++;\r\n        }\r\n    }\r\n\r\n    public showSpiritLock(): void {\r\n        this.treeLock.active = true;\r\n        this.treeLock.zIndex = gm.const.MAX_CELL_NUM + 3;\r\n        const cell = this.mapContent.getChildByName(\"223\");\r\n        this.treeLock.y = cell.y + 188;\r\n        this.treeLock.x = cell.x + 5;\r\n        this.treeLock.scale = 1 - 0.5 * (this.mapContent.scale - 1);\r\n    }\r\n\r\n    public showHeroUnlockAni(num: number): void {\r\n        gm.ui.set_module_args(gm.const.NEWHEROANIM.key, num);\r\n        gm.ui.show_panel(gm.const.NEWHEROANIM);\r\n    }\r\n\r\n    public showCavesLock(): void {\r\n        this.cavesLock.active = true;\r\n        this.cavesLock.zIndex = gm.const.MAX_CELL_NUM + 3;\r\n        const node = this.mapContent.getChildByName(\"143\");\r\n        this.cavesLock.y = node.y + 188;\r\n        this.cavesLock.x = node.x + 5;\r\n        this.cavesLock.scale = 1 - 0.5 * (this.mapContent.scale - 1);\r\n    }\r\n\r\n    public playUnLockMainTowerMoveMap(towerName: string): void {\r\n        this.mask.active = true;\r\n        const targetNode = this.mapContent?.getChildByName(towerName);\r\n        if (!targetNode) return;\r\n\r\n        const targetPosition = targetNode.position;\r\n        this.mapContent?.stopAllActions();\r\n\r\n        this.mapContent?.runAction(\r\n            cc.sequence(\r\n                cc.spawn(\r\n                    cc.scaleTo(2, 1.2),\r\n                    cc.moveTo(\r\n                        2,\r\n                        cc.v2(360 - targetPosition.x, -targetPosition.y)\r\n                    )\r\n                ),\r\n                cc.delayTime(1),\r\n                cc.callFunc(() => {\r\n                    this.mask.active = false;\r\n                })\r\n            )\r\n        );\r\n    }\r\n\r\n    private playLockSenseMoveMapToFun(): void {\r\n        this.mask.active = true;\r\n        const positions = [\r\n            this.mapContent.getChildByName(\"223\").position,\r\n            this.mapContent.getChildByName(\"215\").position,\r\n            this.mapContent.getChildByName(\"9\").position,\r\n            this.mapContent.getChildByName(\"1\").position,\r\n            this.mapContent.getChildByName(\"116\").position,\r\n        ];\r\n\r\n        this.mapContent?.stopAllActions();\r\n        this.mapContent?.runAction(\r\n            cc.sequence(\r\n                cc.spawn(\r\n                    cc.scaleTo(2, 1.2),\r\n                    cc.moveTo(2, cc.v2(360 - positions[0].x, -positions[0].y))\r\n                ),\r\n                cc.delayTime(2),\r\n                cc.moveTo(2, cc.v2(360 - positions[1].x, -positions[1].y)),\r\n                cc.delayTime(2),\r\n                cc.moveTo(2, cc.v2(360 - positions[2].x, -positions[2].y)),\r\n                cc.delayTime(2),\r\n                cc.moveTo(2, cc.v2(360 - positions[3].x, -positions[3].y)),\r\n                cc.delayTime(2),\r\n                cc.moveTo(2, cc.v2(360 - positions[4].x, -positions[4].y)),\r\n                cc.callFunc(() => {\r\n                    this.mask.active = false;\r\n                })\r\n            )\r\n        );\r\n    }\r\n\r\n    public setLockSenceMoveMap(\r\n        elementName: string,\r\n        duration: number = 1.5\r\n    ): void {\r\n        this.mask.active = true;\r\n        const targetPosition =\r\n            this.mapContent.getChildByName(elementName).position;\r\n        this.mapContent.stopAllActions();\r\n        this.mapContent.runAction(\r\n            cc.sequence(\r\n                cc.spawn(\r\n                    cc.scaleTo(1, duration),\r\n                    cc.moveTo(\r\n                        1,\r\n                        cc.v2(\r\n                            -targetPosition.x * duration + 360,\r\n                            -targetPosition.y * duration\r\n                        )\r\n                    )\r\n                ),\r\n                cc.callFunc(() => {\r\n                    this.mask.active = false;\r\n                    this.handAnim.active = true;\r\n                    this.handAnim.zIndex = 401;\r\n\r\n                    const nodePosition = this.mapContent\r\n                        .getChildByName(elementName)\r\n                        .getComponent(MainMapItem)\r\n                        .touchNode.parent.convertToWorldSpaceAR(\r\n                            this.mapContent\r\n                                .getChildByName(elementName)\r\n                                .getComponent(MainMapItem).touchNode.position\r\n                        );\r\n                    const position =\r\n                        this.mapContent.convertToNodeSpaceAR(nodePosition);\r\n\r\n                    this.handAnim.position = position;\r\n                    gm.ui.emit(\"open_special_fun\", parseInt(elementName));\r\n                    if (42 == parseInt(elementName)) {\r\n                        gm.ui.mapMainUI.roleBuildAnimNode[0].active = false;\r\n                    } else if (27 == parseInt(elementName)) {\r\n                        gm.ui.mapMainUI.roleBuildAnimNode[1].active = false;\r\n                    }\r\n                })\r\n            )\r\n        );\r\n\r\n        if (this.roleGuideBuildUpgrade.active) {\r\n            this.roleGuideBuildUpgrade.runAction(\r\n                cc.scaleTo(1, 1 - 0.5 * (duration - 1))\r\n            );\r\n        }\r\n        if (this.roleBuildUpgrade.active) {\r\n            this.roleBuildUpgrade.runAction(\r\n                cc.scaleTo(1, 1 - 0.5 * (duration - 1))\r\n            );\r\n        }\r\n    }\r\n\r\n    private refreshRedBtnBook(active: boolean | null = null): void {\r\n        let newT = active === undefined ? null : active;\r\n        if (newT === null) {\r\n            newT = gm.data.mapCell_data.checkBookItemHaveUnlockReward();\r\n        }\r\n        this.red_btn_book.active = newT;\r\n    }\r\n\r\n    private test(): void {\r\n        const mapCellCfg = gm.data.config_data.getMapCellCfg();\r\n        let quyu = \"let quyu = [\";\r\n        let plantID = \"let plantID = [\";\r\n        let landImgID = \"let landImgID = [\";\r\n        let landYOffset = \"let landYOffset = [\";\r\n        let plantXOffset = \"let plantXOffset = [\";\r\n        let plantYOffset = \"let plantYOffset = [\";\r\n\r\n        for (let s = 0; s < mapCellCfg.length; s++) {\r\n            quyu += `${mapCellCfg[s].areaID},`;\r\n            plantID += `${mapCellCfg[s].plantID},`;\r\n            landImgID += `${mapCellCfg[s].landImgID},`;\r\n            landYOffset += `${mapCellCfg[s].landYOffset},`;\r\n            plantXOffset += `${mapCellCfg[s].plantXOffset},`;\r\n            plantYOffset += `${mapCellCfg[s].plantYOffset},`;\r\n        }\r\n\r\n        quyu += \"];\";\r\n        plantID += \"];\";\r\n        landImgID += \"];\";\r\n        landYOffset += \"];\";\r\n        plantXOffset += \"];\";\r\n        plantYOffset += \"];\";\r\n\r\n        console.log(quyu);\r\n        console.log(plantID);\r\n        console.log(landImgID);\r\n        console.log(landYOffset);\r\n        console.log(plantXOffset);\r\n        console.log(plantYOffset);\r\n    }\r\n}\r\n"]}