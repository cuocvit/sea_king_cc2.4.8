{"version":3,"sources":["assets\\start-scene\\scripts\\LuckyWheelData.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,EAAE;AACF,6CAAmC;AACnC,6CAA4C;AAE5C,IAAI;AACJ;IAAoC,kCAAW;IAQ3C,IAAI;IACJ;QAAA,YACI,iBAAO,SAOV;QANG,KAAI,CAAC,WAAW,GAAG,gBAAgB,CAAC;QACpC,KAAI,CAAC,2BAA2B,GAAG,CAAC,CAAC;QACrC,KAAI,CAAC,4BAA4B,GAAG,CAAC,CAAC;QACtC,KAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QACxB,KAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;QAC3B,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;;IACzB,CAAC;IAED,IAAI;IACG,wCAAe,GAAtB,UAA0B,QAA4B;QAAtD,iBAgBC;QAfG,iBAAM,eAAe,YAAC,UAAC,IAAO;YAC1B,IAAI,CAAC,KAAI,CAAC,OAAO,EAAE;gBACf,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,KAAI,CAAC,2BAA2B,GAAG,gBAAE,CAAC,KAAK,CAAC,0BAA0B,CAAC;gBACvE,KAAI,CAAC,4BAA4B,GAAG,gBAAE,CAAC,KAAK,CAAC,2BAA2B,CAAC;gBACzE,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;gBACjC,KAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;gBAC3B,KAAI,CAAC,gBAAgB,EAAE,CAAC;aAC3B;iBAAM;gBACH,IAAI,KAAI,CAAC,cAAc,KAAK,IAAI,IAAI,KAAI,CAAC,cAAc,KAAK,SAAS,EAAE;oBACnE,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;iBACpC;aACJ;YACD,IAAI,QAAQ;gBAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,IAAI;IACG,yCAAgB,GAAvB,UAAwB,QAAqB;QACzC,gBAAE,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC;QAC7D,iBAAM,gBAAgB,YAAC,QAAQ,CAAC,CAAC;IACrC,CAAC;IAzCa,gCAAiB,GAAW,kBAAkB,CAAC;IA0CjE,qBAAC;CA3CD,AA2CC,CA3CmC,yBAAW,GA2C9C;AA3CY,wCAAc","file":"","sourceRoot":"/","sourcesContent":["//\r\nimport { gm } from './GameManager';\r\nimport { StorageBase } from './StorageBase';\r\n\r\n// @\r\nexport class LuckyWheelData extends StorageBase {\r\n    public static EVENT_DATA_CHANGE: string = \"hero_data_change\";\r\n    //\r\n    public left_lucky_wheel_free_count: number;\r\n    public left_lucky_wheel_video_count: number;\r\n    public free_timestamp: number;\r\n    public last_reward_index: number;\r\n\r\n    // @\r\n    constructor() {\r\n        super();\r\n        this.STORAGE_KEY = \"LuckyWheelData\";\r\n        this.left_lucky_wheel_free_count = 0;\r\n        this.left_lucky_wheel_video_count = 0;\r\n        this.free_timestamp = 0;\r\n        this.last_reward_index = 0;\r\n        this.is_init = false;\r\n    }\r\n\r\n    // @\r\n    public async_read_data<T>(callback?: (data: T) => void): void {\r\n        super.async_read_data((data: T) => {\r\n            if (!this.is_init) {\r\n                this.is_init = true;\r\n                this.left_lucky_wheel_free_count = gm.const.MAX_LUCKY_WHEEL_FREE_COUNT;\r\n                this.left_lucky_wheel_video_count = gm.const.MAX_LUCKY_WHEEL_VIDEO_COUNT;\r\n                this.free_timestamp = Date.now();\r\n                this.last_reward_index = 0;\r\n                this.async_write_data();\r\n            } else {\r\n                if (this.free_timestamp === null || this.free_timestamp === undefined) {\r\n                    this.free_timestamp = Date.now();\r\n                }\r\n            }\r\n            if (callback) callback(data);\r\n        });\r\n    }\r\n\r\n    // @\r\n    public async_write_data(callback?: () => void): void {\r\n        gm.data.event_emitter.emit(LuckyWheelData.EVENT_DATA_CHANGE);\r\n        super.async_write_data(callback);\r\n    }\r\n}\r\n"]}