{"version":3,"sources":["assets\\buy\\scripts\\Buy.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,2EAA0E;AAC1E,+DAA8D;AAC9D,qEAA2D;AAC3D,mEAAkE;AAClE,+DAA8D;AAC9D,qCAAoC;AACpC,+DAA8D;AAGxD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAkB,uBAAU;IAA5B;QAAA,qEAuDC;QArDW,eAAS,GAAc,IAAI,CAAC;QAG5B,wBAAkB,GAAc,IAAI,CAAC;QAGrC,eAAS,GAAa,IAAI,CAAC;QAG3B,yBAAmB,GAAc,EAAE,CAAC;;IA4ChD,CAAC;IA1Ca,sBAAQ,GAAlB;QACI,mBAAQ,CAAC,eAAe,GAAG,IAAI,CAAC;QAChC,gBAAE,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,CACpB,mBAAQ,CAAC,iBAAiB,EAC1B,IAAI,CAAC,WAAW,EAChB,IAAI,CACP,CAAC;QACF,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,gBAAE,CAAC,OAAO,CAAC,cAAc,CAAC,+BAAc,CAAC,GAAG,CAAC,CAAC;IAClD,CAAC;IAES,uBAAS,GAAnB;QACI,gBAAE,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CACrB,mBAAQ,CAAC,iBAAiB,EAC1B,IAAI,CAAC,WAAW,EAChB,IAAI,CACP,CAAC;QACF,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;QACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtD,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;SACvC;QACD,gBAAE,CAAC,OAAO,CAAC,cAAc,CAAC,+BAAc,CAAC,GAAG,CAAC,CAAC;QAC9C,gBAAE,CAAC,EAAE,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;IACtC,CAAC;IAEM,yBAAW,GAAlB;QACI,IAAM,IAAI,GAAkB,EAAE,CAAC;QAC/B,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,gBAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACzC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtD,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,IAAI;gBAC5B,gBAAE,CAAC,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;SAChD;IACL,CAAC;IAEO,4CAA8B,GAAtC,UAAuC,KAAe;QAClD,IACI,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC,SAAS,CAAC,IAAI;YACpC,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC,kBAAkB,CAAC,IAAI;YAE7C,OAAO;QACX,gBAAE,CAAC,EAAE,CAAC,iBAAiB,CAAC,gBAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAC1C,CAAC;IApDD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;0CACgB;IAGpC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;mDACyB;IAG7C;QADC,QAAQ,CAAC,mBAAQ,CAAC;0CACgB;IAGnC;QADC,QAAQ,CAAC,iBAAO,CAAC;oDAC0B;IAX1C,GAAG;QADR,OAAO;OACF,GAAG,CAuDR;IAAD,UAAC;CAvDD,AAuDC,CAvDiB,uBAAU,GAuD3B;AAED,kBAAe,GAAG,CAAC","file":"","sourceRoot":"/","sourcesContent":["import { BANNER_AD_TYPE } from \"../../start-scene/scripts/ChannelManager\";\r\nimport { SignData } from \"../../start-scene/scripts/SignData\";\r\nimport { gm } from \"../../start-scene/scripts/GameManager\";\r\nimport { GameModule } from \"../../start-scene/scripts/GameModule\";\r\nimport { ListView } from \"../../start-scene/scripts/ListView\";\r\nimport { BuyItem } from \"./buyItem\";\r\nimport { TempData } from \"../../start-scene/scripts/TempData\";\r\nimport { BuyItemData } from \"./data\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass Buy extends GameModule {\r\n    @property(cc.Button)\r\n    private close_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private anywhere_close_btn: cc.Button = null;\r\n\r\n    @property(ListView)\r\n    private sign_list: ListView = null;\r\n\r\n    @property(BuyItem)\r\n    private sign_buy_item_array: BuyItem[] = [];\r\n\r\n    protected onEnable(): void {\r\n        TempData.mainFunShowSign = true;\r\n        gm.data.event_emitter.on(\r\n            SignData.EVENT_DATA_CHANGE,\r\n            this.update_view,\r\n            this\r\n        ); \r\n        this.update_view();\r\n        gm.channel.show_banner_ad(BANNER_AD_TYPE.ALL);\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        gm.data.event_emitter.off(\r\n            SignData.EVENT_DATA_CHANGE,\r\n            this.update_view,\r\n            this\r\n        );\r\n        this.sign_list.reset();\r\n        for (let i = 0; i < this.sign_buy_item_array.length; i++) {\r\n            this.sign_buy_item_array[i].reset();\r\n        }\r\n        gm.channel.hide_banner_ad(BANNER_AD_TYPE.ALL);\r\n        gm.ui.mapMainUI.show_sign_entry();\r\n    }\r\n\r\n    public update_view(): void {\r\n        const data: BuyItemData[] = [];\r\n        this.sign_list.setData(gm.const.BuyData);\r\n        for (let i = 0; i < this.sign_buy_item_array.length; i++) {\r\n            this.sign_buy_item_array[i].data =\r\n                gm.data.sign_data.sign_buy_data_array[i];\r\n        }\r\n    }\r\n\r\n    private editor_on_button_click_handler(event: cc.Event): void {\r\n        if (\r\n            event.target !== this.close_btn.node &&\r\n            event.target !== this.anywhere_close_btn.node\r\n        )\r\n            return;\r\n        gm.ui.async_hide_module(gm.const.Buy);\r\n    }\r\n}\r\n\r\nexport default Buy;\r\n"]}