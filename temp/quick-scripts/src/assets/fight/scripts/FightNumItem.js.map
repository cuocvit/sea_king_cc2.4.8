{"version":3,"sources":["assets\\fight\\scripts\\FightNumItem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qEAA2D;AAC3D,uEAAsE;AAEhE,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAS5C;IAA2B,gCAAY;IAAvC;QAAA,qEA+DC;QA7DC,cAAQ,GAAoB,IAAI,CAAC;QAEzB,WAAK,GAA4B,IAAI,CAAC;;IA2DhD,CAAC;IAzDC,sBAAW,8BAAI;aAAf;YACE,OAAO,IAAI,CAAC,KAAK,CAAC;QACpB,CAAC;aAED,UAAgB,KAA8B;YAC5C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC;;;OALA;IAOS,+BAAQ,GAAlB;QACE,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;iBAChB,IAAI,EAAE;iBACN,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;iBACvB,IAAI,EAAE;iBACN,EAAE,CAAC,GAAG,EAAE;gBACP,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC;gBAChE,OAAO,EAAE,GAAG;aACb,CAAC;iBACD,UAAU,EAAE;iBACZ,KAAK,EAAE,CAAC;SACZ;IACH,CAAC;IAEO,kCAAW,GAAnB;QACE,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IAAI,WAAW,GAAW,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;YACpD,QAAQ,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE;gBACrB,KAAK,CAAC;oBACJ,WAAW,GAAG,KAAG,IAAI,CAAC,KAAK,CAAC,GAAK,CAAC;oBAClC,MAAM;gBACR,KAAK,CAAC;oBACJ,WAAW,GAAG,kBAAM,IAAI,CAAC,KAAK,CAAC,GAAK,CAAC;oBACrC,MAAM;gBACR,KAAK,CAAC;oBACJ,WAAW,GAAG,MAAI,IAAI,CAAC,KAAK,CAAC,GAAK,CAAC;oBACnC,MAAM;gBACR;oBACE,OAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;aACnC;YACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,GAAG,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;YAC1D,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,WAAW,CAAC;SACpC;IACH,CAAC;IAEO,4BAAK,GAAb;QACE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,EAAE,CAAC;SAC3B;QACD,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC;IAC7B,CAAC;IAEM,4BAAK,GAAZ;QACE,iBAAM,KAAK,WAAE,CAAC;QACd,IAAI,CAAC,KAAK,EAAE,CAAC;IACf,CAAC;IA5DD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;kDACc;IAF7B,YAAY;QADjB,OAAO;OACF,YAAY,CA+DjB;IAAD,mBAAC;CA/DD,AA+DC,CA/D0B,2BAAY,GA+DtC;AASQ,oCAAY;AAPrB,IAAM,eAAe,GAAe;IAClC,gBAAE,CAAC,KAAK,CAAC,SAAS;IAClB,gBAAE,CAAC,KAAK,CAAC,SAAS;IAClB,EAAE,CAAC,KAAK,CAAC,KAAK;IACd,gBAAE,CAAC,KAAK,CAAC,YAAY;CACtB,CAAC","file":"","sourceRoot":"/","sourcesContent":["import { gm } from '../../start-scene/scripts/GameManager';\r\nimport { NodePoolItem } from '../../start-scene/scripts/NodePoolItem';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\ninterface FightNumItemData {\r\n  id: number;\r\n  num: number;\r\n  delay: number;\r\n}\r\n\r\n@ccclass\r\nclass FightNumItem extends NodePoolItem {\r\n  @property(cc.Label)\r\n  text_lbl: cc.Label | null = null;\r\n\r\n  private _data: FightNumItemData | null = null;\r\n\r\n  public get data(): FightNumItemData | null {\r\n    return this._data;\r\n  }\r\n\r\n  public set data(value: FightNumItemData | null) {\r\n    this._data = value;\r\n    this.update_view();\r\n  }\r\n\r\n  protected onEnable(): void {\r\n    if (this._data) {\r\n      cc.tween(this.node)\r\n        .hide()\r\n        .delay(this._data.delay)\r\n        .show()\r\n        .to(0.5, {\r\n          position: cc.v3(this.node.position.x, this.node.position.y + 60),\r\n          opacity: 255\r\n        })\r\n        .removeSelf()\r\n        .start();\r\n    }\r\n  }\r\n\r\n  private update_view(): void {\r\n    if (this._data) {\r\n      let displayText: string = this._data.num.toString();\r\n      switch (this._data.id) {\r\n        case 0:\r\n          displayText = `${this._data.num}`;\r\n          break;\r\n        case 1:\r\n          displayText = `暴击 ${this._data.num}`;\r\n          break;\r\n        case 2:\r\n          displayText = `+${this._data.num}`;\r\n          break;\r\n        default:\r\n          console.error(\"NumItem不存在数字类型\");\r\n      }\r\n      this.text_lbl.node.color = NUM_COLOR_ARRAY[this._data.id];\r\n      this.text_lbl.string = displayText;\r\n    }\r\n  }\r\n\r\n  private reset(): void {\r\n    this._data = null;\r\n    if (this.text_lbl) {\r\n      this.text_lbl.string = \"\";\r\n    }\r\n    cc.tween(this.node).stop();\r\n  }\r\n\r\n  public unuse(): void {\r\n    super.unuse();\r\n    this.reset();\r\n  }\r\n}\r\n\r\nconst NUM_COLOR_ARRAY: cc.Color[] = [\r\n  gm.const.COLOR_RED,\r\n  gm.const.COLOR_RED,\r\n  cc.Color.GREEN,\r\n  gm.const.COLOR_YELLOW\r\n];\r\n\r\nexport { FightNumItem, FightNumItemData };"]}