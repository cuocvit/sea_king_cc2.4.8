{"version":3,"sources":["assets\\mail\\scripts\\MailLogNotice.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { gm } from '../../start-scene/scripts/GameManager';\r\nimport { GameModule } from '../../start-scene/scripts/GameModule';\r\nimport { ListView } from '../../start-scene/scripts/ListView';\r\nimport { MailLogItemData } from '../../start-scene/scripts/MailTempData';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass MailLogNotice extends GameModule {\r\n    @property(cc.Button)\r\n    private close_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private anywhere_close_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private fail_ok_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private success_ok_btn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    private revenge_btn: cc.Button = null;\r\n\r\n    @property(cc.Label)\r\n    private enemy_name_lbl: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private enemy_star_lbl: cc.Label = null;\r\n\r\n    @property(ListView)\r\n    private mail_hero_list: ListView = null;\r\n\r\n    @property(ListView)\r\n    private mail_log_reward_list: ListView = null;\r\n\r\n    @property(cc.Label)\r\n    private star_lbl: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    private star_change_lbl: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    private success_node: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private fail_node: cc.Node = null;\r\n\r\n    private _data: MailLogItemData;\r\n\r\n    protected onEnable(): void {\r\n        gm.data.get_player_fight_log_data(\"1\", () => {\r\n            this._data = gm.data.mail_temp_data.mail_defense_log_data_array[0];\r\n            this.update_view();\r\n        });\r\n    }\r\n\r\n    protected onDisable(): void { }\r\n\r\n    public update_view(): void {\r\n        const data = this._data;\r\n        if (data) {\r\n            this.enemy_name_lbl.string = data.target_nickname;\r\n            this.enemy_star_lbl.string = Math.max(0, data.target_change_star + data.target_star) + \"\";\r\n            this.star_lbl.string = Math.max(0, data.star + data.change_star) + \"\";\r\n            this.star_change_lbl.string = (0 < data.change_star ? \"+\" : \"\") + data.change_star;\r\n            if (\"1\" == data.op_type) {\r\n                if (1 == data.op_result) {\r\n                    this.success_node.active = true;\r\n                    this.fail_node.active = false;\r\n                    this.mail_log_reward_list.node.active = false;\r\n                    this.revenge_btn.node.active = false;\r\n                    this.success_ok_btn.node.active = true;\r\n                    this.fail_ok_btn.node.active = false;\r\n                } else {\r\n                    this.success_node.active = false;\r\n                    this.fail_node.active = true;\r\n                    this.mail_log_reward_list.node.active = true;\r\n                    this.mail_log_reward_list.setData(data.op_loss_reward);\r\n                    this.revenge_btn.node.active = true;\r\n                    this.success_ok_btn.node.active = false;\r\n                    this.fail_ok_btn.node.active = true;\r\n                }\r\n            }\r\n            this.mail_hero_list.setData(data.target_op_battle);\r\n        }\r\n    }\r\n\r\n    private editor_on_button_click_handler(event: cc.Event): void {\r\n        let data;\r\n        if (event.target == this.close_btn.node ||\r\n            event.target == this.anywhere_close_btn.node ||\r\n            event.target == this.fail_ok_btn.node ||\r\n            event.target == this.success_ok_btn.node) {\r\n            gm.ui.async_hide_module(gm.const.MailLogNotice);\r\n\r\n        } else if (event.target != this.revenge_btn.node || (data = this._data) && \"\" != data.target_uid) {\r\n            gm.data.get_rob_record(data.target_uid, () => {\r\n                gm.ui.mapMainUI.revenge(data.target_uid);\r\n                gm.ui.async_hide_module(gm.const.MailLogNotice);\r\n            })\r\n        }\r\n    }\r\n}"]}