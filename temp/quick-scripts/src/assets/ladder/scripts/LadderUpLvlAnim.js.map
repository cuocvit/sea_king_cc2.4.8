{"version":3,"sources":["assets\\ladder\\scripts\\LadderUpLvlAnim.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { gm } from '../../start-scene/scripts/GameManager';\r\nimport { LadderRewardItem } from './LadderRewardItem';\r\nimport { TempData } from '../../start-scene/scripts/TempData';\r\nimport { LadderAchievementConfig } from '../../common/configs/ladder_achievement';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nclass LadderUpLvlAnim extends cc.Component {\r\n    @property(cc.Label)\r\n    private star_lbl: cc.Label = null;\r\n\r\n    @property([LadderRewardItem])\r\n    private rewardList: LadderRewardItem[] = [];\r\n\r\n    protected onEnable(): void {\r\n        this.node.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED, this.playAnimEnd, this);\r\n        this.node.getComponent(cc.Animation).play(\"ladder_up_open\");\r\n        this.refreshPanel();\r\n    }\r\n\r\n    private refreshPanel(): void {\r\n        const ladderData = gm.data.ladder_data;\r\n        const rewardArray = gm.data.ladder_temp_data.ladder_achievement_data_array[ladderData.achievement_id - 2].reward_array;\r\n        const configData = gm.config.get_row_data(\"LadderAchievementConfigData\", ladderData.achievement_id - 1 + \"\") as LadderAchievementConfig;\r\n        this.star_lbl.string = configData.star + \"\";\r\n\r\n        for (let index = 0; index < this.rewardList.length; index++) {\r\n            const rewardItem = this.rewardList[index];\r\n            if (index < rewardArray.length) {\r\n                rewardItem.node.active = true;\r\n                rewardItem.data = rewardArray[index];\r\n                const Anim = rewardItem.getComponent(cc.Animation);\r\n                if (Anim) {\r\n                    Anim.play();\r\n                }\r\n            } else {\r\n                rewardItem.node.active = !1;\r\n            }\r\n        }\r\n    }\r\n\r\n    private playAnimEnd(animation: cc.Animation, event?: cc.Animation): void {\r\n        if (event.name == \"ladder_up_close\") {\r\n            \r\n            gm.ui.async_hide_module(gm.const.LADDERUPLVLANIM);\r\n            if (TempData.is_need_open_barrkPanel) {\r\n                TempData.is_need_open_barrkPanel = false;\r\n                gm.ui.async_show_module(gm.const.BARRACKS_LIST);\r\n            }\r\n        }\r\n    }\r\n\r\n    private onClosePanel(): void {\r\n        this.node.getComponent(cc.Animation).play(\"ladder_up_close\");\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        this.node.getComponent(cc.Animation).off(cc.Animation.EventType.FINISHED, this.playAnimEnd, this);\r\n    }\r\n}\r\n"]}