{"version":3,"sources":["assets\\ladder\\scripts\\LadderRankItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ListViewItem } from '../../start-scene/scripts/ListViewItem';\r\nimport { Utils } from '../../start-scene/scripts/Utils';\r\nimport { BundleName } from '../../start-scene/scripts/Constants';\r\nimport { gm } from '../../start-scene/scripts/GameManager';\r\nimport { ListView } from '../../start-scene/scripts/ListView';\r\nimport { LadderRewardConfig } from '../../common/configs/ladder_reward';\r\nimport { LadderRankItemData } from '../../start-scene/scripts/LadderTempData';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class LadderRankItem extends ListViewItem {\r\n    @property(cc.Sprite)\r\n    private rank_spr: cc.Sprite | null = null;\r\n\r\n    @property(cc.Sprite)\r\n    private lv_spr: cc.Sprite | null = null;\r\n\r\n    @property(cc.Label)\r\n    private name_lbl: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private rank_lbl: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private star_lbl: cc.Label | null = null;\r\n\r\n    @property(ListView)\r\n    private reward_list: ListView | null = null;\r\n\r\n    public get data(): LadderRankItemData {\r\n        return this._data;\r\n    }\r\n\r\n    public set data(value: LadderRankItemData) {\r\n        this._data = value;\r\n        this.update_view();\r\n    }\r\n\r\n    public update_view(): void {\r\n        if (this._data.rank <= 0) {\r\n            this.rank_lbl.node.active = true;\r\n            this.rank_lbl.string = \"200+\";\r\n            this.rank_spr.node.active = false;\r\n\r\n        } else if (0 < this._data.rank && this._data.rank < 4) {\r\n            this.rank_lbl.node.active = false;\r\n            this.rank_spr.node.active = true;\r\n            Utils.async_set_sprite_frame(this.rank_spr, BundleName.LADDER, \"res/rank_\" + this._data.rank);\r\n\r\n        } else {\r\n            this.rank_lbl.node.active = true;\r\n            this.rank_lbl.string = this._data.rank + \"\";\r\n            this.rank_spr.node.active = false;\r\n        }\r\n\r\n        this.star_lbl.string = this._data.star + \"\";\r\n        this.name_lbl.string = this._data.name + (\"0\" == this._data.uid ? \".\" : \"\");\r\n\r\n        if (0 < this._data.rank) {\r\n            const number = gm.data.ladder_temp_data.convert_rank_to_lv(this._data.rank);\r\n            const rowData = gm.config.get_row_data(\"LadderRewardConfigData\", number + \"\") as LadderRewardConfig;\r\n            if (rowData) {\r\n                Utils.async_set_sprite_frame(this.lv_spr, BundleName.LADDER, \"res/\" + rowData.iconId);\r\n                this.reward_list.setData(rowData.reward_array);\r\n            }\r\n        } else {\r\n            this.reward_list.reset();\r\n        }\r\n    }\r\n\r\n    public reset(): void {\r\n        this.rank_spr.spriteFrame = null;\r\n        this.lv_spr.spriteFrame = null;\r\n        this.star_lbl.string = \"\";\r\n        this.name_lbl.string = \"\";\r\n        this.reward_list.reset();\r\n    }\r\n}"]}