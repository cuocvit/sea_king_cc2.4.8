{"version":3,"sources":["assets\\ladder\\scripts\\LadderBuildingRankItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ListViewItem } from '../../start-scene/scripts/ListViewItem';\r\nimport { Utils } from '../../start-scene/scripts/Utils';\r\nimport { BundleName } from '../../start-scene/scripts/Constants';\r\nimport { gm } from '../../start-scene/scripts/GameManager';\r\nimport { ListView } from '../../start-scene/scripts/ListView';\r\nimport { LadderBuildding } from '../../common/configs/ladder_building';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\ninterface LadderBuildingRankItemData {\r\n    rank: number;\r\n    castle_level: number;\r\n    name: string;\r\n    uid: string;\r\n}\r\n\r\n@ccclass\r\nexport class LadderBuildingRankItem extends ListViewItem {\r\n    @property(cc.Sprite)\r\n    private rank_spr: cc.Sprite | null = null;\r\n\r\n    @property(cc.Sprite)\r\n    private lv_spr: cc.Sprite | null = null;\r\n\r\n    @property(cc.Label)\r\n    private name_lbl: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private rank_lbl: cc.Label | null = null;\r\n\r\n    @property(cc.Label)\r\n    private building_lv_lbl: cc.Label | null = null;\r\n\r\n    @property(ListView)\r\n    private reward_list: ListView | null = null;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    public get data(): LadderBuildingRankItemData {\r\n        return this._data;\r\n    }\r\n\r\n    public set data(value: LadderBuildingRankItemData) {\r\n        this._data = value;\r\n        this.update_view();\r\n    }\r\n\r\n    public update_view(): void {\r\n        if (this._data.rank <= 0) {\r\n            this.rank_lbl.node.active = true;\r\n            this.rank_lbl.string = \"200+\";\r\n            this.rank_spr.node.active = false;\r\n        } else if (this._data.rank > 0 && this._data.rank < 4) {\r\n            this.rank_lbl.node.active = false;\r\n            this.rank_spr.node.active = true;\r\n            Utils.async_set_sprite_frame(this.rank_spr, BundleName.LADDER, \"res/rank_\" + this._data.rank);\r\n        } else {\r\n            this.rank_lbl.node.active = true;\r\n            this.rank_lbl.string = this._data.rank.toString();\r\n            this.rank_spr.node.active = false;\r\n        }\r\n        this.building_lv_lbl.string = this._data.castle_level.toString();\r\n        this.name_lbl.string = this._data.name + (this._data.uid === \"0\" ? \".\" : \"\");\r\n\r\n        if (this._data.rank > 0) {\r\n            const number = gm.data.ladder_temp_data.convert_building_rank_to_lv(this._data.rank);\r\n            const rowData = gm.config.get_row_data(\"LadderBuildingConfigData\", number.toString()) as LadderBuildding;\r\n            if (rowData) {\r\n                Utils.async_set_sprite_frame(this.lv_spr, BundleName.LADDER, \"res/\" + rowData.iconId);\r\n                this.reward_list.setData(rowData.reward_array);\r\n            }\r\n        } else {\r\n            this.reward_list.reset();\r\n        }\r\n    }\r\n\r\n    public reset(): void {\r\n        this.rank_spr.spriteFrame = null;\r\n        this.lv_spr.spriteFrame = null;\r\n        this.building_lv_lbl.string = \"\";\r\n        this.name_lbl.string = \"\";\r\n    }\r\n}"]}